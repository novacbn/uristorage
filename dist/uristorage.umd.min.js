var URIStorage=(()=>{var ha=Object.create,Tt=Object.defineProperty,ma=Object.getPrototypeOf,va=Object.prototype.hasOwnProperty,ga=Object.getOwnPropertyNames,ya=Object.getOwnPropertyDescriptor,Qn=e=>Tt(e,"__esModule",{value:!0}),Fe=(e,t)=>()=>(t||(t={exports:{}},e(t.exports,t)),t.exports),ba=(e,t)=>{Qn(e);for(var n in t)Tt(e,n,{get:t[n],enumerable:!0})},wa=(e,t,n)=>{if(Qn(e),typeof t=="object"||typeof t=="function")for(let r of ga(t))!va.call(e,r)&&r!=="default"&&Tt(e,r,{get:()=>t[r],enumerable:!(n=ya(t,r))||n.enumerable});return e},Ot=e=>e&&e.__esModule?e:wa(Tt(ha(ma(e)),"default",{value:e,enumerable:!0}),e),$n=Fe((ko,Yn)=>{Yn.exports=function(e,t){if(typeof e!="string")throw new TypeError("Expected a string");for(var n=String(e),r="",a=t?!!t.extended:!1,i=t?!!t.globstar:!1,o=!1,s=t&&typeof t.flags=="string"?t.flags:"",l,c=0,u=n.length;c<u;c++){l=n[c];switch(l){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":r+="\\"+l;break;case"?":if(a){r+=".";break}case"[":case"]":if(a){r+=l;break}case"{":if(a){o=!0,r+="(";break}case"}":if(a){o=!1,r+=")";break}case",":if(o){r+="|";break}r+="\\"+l;break;case"*":for(var p=n[c-1],d=1;n[c+1]==="*";)d++,c++;var m=n[c+1];if(!i)r+=".*";else{var h=d>1&&(p==="/"||p===void 0)&&(m==="/"||m===void 0);h?(r+="((?:[^/]*(?:/|$))*)",c++):r+="([^/]*)"}break;default:r+=l}}return(!s||!~s.indexOf("g"))&&(r="^"+r+"$"),new RegExp(r,s)}}),er=Fe((So,Ln)=>{"use strict";function ue(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function Zn(e,t){for(var n="",r=0,a=-1,i=0,o,s=0;s<=e.length;++s){if(s<e.length)o=e.charCodeAt(s);else{if(o===47)break;o=47}if(o===47){if(!(a===s-1||i===1))if(a!==s-1&&i===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),a=s,i=0;continue}}else if(n.length===2||n.length===1){n="",r=0,a=s,i=0;continue}}t&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),r=s-a-1;a=s,i=0}else o===46&&i!==-1?++i:i=-1}return n}function xa(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+e+r:r}var Ue={resolve:function(){for(var t="",n=!1,r,a=arguments.length-1;a>=-1&&!n;a--){var i;if(a>=0?i=arguments[a]:(r===void 0&&(r=process.cwd()),i=r),ue(i),i.length===0)continue;t=i+"/"+t,n=i.charCodeAt(0)===47}return t=Zn(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(ue(t),t.length===0)return".";var n=t.charCodeAt(0)===47,r=t.charCodeAt(t.length-1)===47;return t=Zn(t,!n),t.length===0&&!n&&(t="."),t.length>0&&r&&(t+="/"),n?"/"+t:t},isAbsolute:function(t){return ue(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,n=0;n<arguments.length;++n){var r=arguments[n];ue(r),r.length>0&&(t===void 0?t=r:t+="/"+r)}return t===void 0?".":Ue.normalize(t)},relative:function(t,n){if(ue(t),ue(n),t===n)return"";if(t=Ue.resolve(t),n=Ue.resolve(n),t===n)return"";for(var r=1;r<t.length&&!(t.charCodeAt(r)!==47);++r);for(var a=t.length,i=a-r,o=1;o<n.length&&!(n.charCodeAt(o)!==47);++o);for(var s=n.length,l=s-o,c=i<l?i:l,u=-1,p=0;p<=c;++p){if(p===c){if(l>c){if(n.charCodeAt(o+p)===47)return n.slice(o+p+1);if(p===0)return n.slice(o+p)}else i>c&&(t.charCodeAt(r+p)===47?u=p:p===0&&(u=0));break}var d=t.charCodeAt(r+p),m=n.charCodeAt(o+p);if(d!==m)break;d===47&&(u=p)}var h="";for(p=r+u+1;p<=a;++p)(p===a||t.charCodeAt(p)===47)&&(h.length===0?h+="..":h+="/..");return h.length>0?h+n.slice(o+u):(o+=u,n.charCodeAt(o)===47&&++o,n.slice(o))},_makeLong:function(t){return t},dirname:function(t){if(ue(t),t.length===0)return".";for(var n=t.charCodeAt(0),r=n===47,a=-1,i=!0,o=t.length-1;o>=1;--o)if(n=t.charCodeAt(o),n===47){if(!i){a=o;break}}else i=!1;return a===-1?r?"/":".":r&&a===1?"//":t.slice(0,a)},basename:function(t,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');ue(t);var r=0,a=-1,i=!0,o;if(n!==void 0&&n.length>0&&n.length<=t.length){if(n.length===t.length&&n===t)return"";var s=n.length-1,l=-1;for(o=t.length-1;o>=0;--o){var c=t.charCodeAt(o);if(c===47){if(!i){r=o+1;break}}else l===-1&&(i=!1,l=o+1),s>=0&&(c===n.charCodeAt(s)?--s===-1&&(a=o):(s=-1,a=l))}return r===a?a=l:a===-1&&(a=t.length),t.slice(r,a)}else{for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===47){if(!i){r=o+1;break}}else a===-1&&(i=!1,a=o+1);return a===-1?"":t.slice(r,a)}},extname:function(t){ue(t);for(var n=-1,r=0,a=-1,i=!0,o=0,s=t.length-1;s>=0;--s){var l=t.charCodeAt(s);if(l===47){if(!i){r=s+1;break}continue}a===-1&&(i=!1,a=s+1),l===46?n===-1?n=s:o!==1&&(o=1):n!==-1&&(o=-1)}return n===-1||a===-1||o===0||o===1&&n===a-1&&n===r+1?"":t.slice(n,a)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return xa("/",t)},parse:function(t){ue(t);var n={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return n;var r=t.charCodeAt(0),a=r===47,i;a?(n.root="/",i=1):i=0;for(var o=-1,s=0,l=-1,c=!0,u=t.length-1,p=0;u>=i;--u){if(r=t.charCodeAt(u),r===47){if(!c){s=u+1;break}continue}l===-1&&(c=!1,l=u+1),r===46?o===-1?o=u:p!==1&&(p=1):o!==-1&&(p=-1)}return o===-1||l===-1||p===0||p===1&&o===l-1&&o===s+1?l!==-1&&(s===0&&a?n.base=n.name=t.slice(1,l):n.base=n.name=t.slice(s,l)):(s===0&&a?(n.name=t.slice(1,o),n.base=t.slice(1,l)):(n.name=t.slice(s,o),n.base=t.slice(s,l)),n.ext=t.slice(o,l)),s>0?n.dir=t.slice(0,s-1):a&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};Ue.posix=Ue;Ln.exports=Ue}),or=Fe((jo,at)=>{var E;(function(e){e.runningInNodeJS=function(){return typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"},e.runningInMainNodeJSModule=function(){return e.runningInNodeJS()&&require.main===at},e.commonJSAvailable=function(){return typeof at=="object"&&typeof at.exports=="object"},e.runningInWebWorker=function(){return typeof window=="undefined"&&typeof self=="object"&&typeof self.addEventListener=="function"&&typeof self.close=="function"},e.runningInNodeChildProcess=function(){return e.runningInNodeJS()&&typeof process.send=="function"},e.runningInNullOrigin=function(){return typeof window!="object"||typeof window.location!="object"?!1:document.location.protocol!=="http:"&&document.location.protocol!=="https:"},e.webWorkersAvailable=function(){return typeof Worker!="function"||e.runningInNullOrigin()||e.runningInNodeJS()?!1:!(navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Android 4.3")>=0)},e.log=function(t,n){if(n===void 0&&(n=!1),typeof console!="object")return;console.log(t),n&&typeof document=="object"&&(document.body.innerHTML+=t+"<br/>")},e.createErrorMessage=function(t,n){if(n===void 0&&(n="Unhandled exception"),t==null)return n;if(n+=": ",typeof t.content=="object"){if(e.runningInNodeJS())return n+t.content.stack;var r=JSON.stringify(t.content);return r!=="{}"?n+r:n+t.content}else return typeof t.content=="string"?n+t.content:n+t},e.printExceptionAndStackTraceToConsole=function(t,n){n===void 0&&(n="Unhandled exception"),e.log(e.createErrorMessage(t,n))},e.getGlobalObject=function(){return typeof global=="object"?global:typeof window=="object"?window:typeof self=="object"?self:{}},e.toString=Object.prototype.toString,e.commonJSAvailable()&&(at.exports=e)})(E||(E={}));var ir;(function(e){if(typeof Uint8Array=="function"&&new Uint8Array(1).subarray(1).byteLength!==0){var t=function(i,o){var s=function(c,u,p){return c<u?u:c>p?p:c};i=i|0,o=o|0,arguments.length<1&&(i=0),arguments.length<2&&(o=this.length),i<0&&(i=this.length+i),o<0&&(o=this.length+o),i=s(i,0,this.length),o=s(o,0,this.length);var l=o-i;return l<0&&(l=0),new this.constructor(this.buffer,this.byteOffset+i*this.BYTES_PER_ELEMENT,l)},n=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],r=void 0;if(typeof window=="object"?r=window:typeof self=="object"&&(r=self),r!==void 0)for(var a=0;a<n.length;a++)r[n[a]]&&(r[n[a]].prototype.subarray=t)}})(ir||(ir={}));var E;(function(e){var t=function(){function n(){}return n.compressAsync=function(r,a,i){var o=new e.Timer,s=new e.Compressor;if(!i)throw new TypeError("compressAsync: No callback argument given");if(typeof r=="string")r=e.encodeUTF8(r);else if(r==null||!(r instanceof Uint8Array)){i(void 0,new TypeError("compressAsync: Invalid input argument, only 'string' and 'Uint8Array' are supported"));return}var l=e.ArrayTools.splitByteArray(r,a.blockSize),c=[],u=function(p){if(p<l.length){var d=void 0;try{d=s.compressBlock(l[p])}catch(h){i(void 0,h);return}c.push(d),o.getElapsedTime()<=20?u(p+1):(e.enqueueImmediate(function(){return u(p+1)}),o.restart())}else{var m=e.ArrayTools.concatUint8Arrays(c);e.enqueueImmediate(function(){var h;try{h=e.CompressionCommon.encodeCompressedBytes(m,a.outputEncoding)}catch(f){i(void 0,f);return}e.enqueueImmediate(function(){return i(h)})})}};e.enqueueImmediate(function(){return u(0)})},n.createCompressionStream=function(){var r=new e.Compressor,a=require("stream"),i=new a.Transform({decodeStrings:!0,highWaterMark:65536});return i._transform=function(o,s,l){var c;try{c=e.BufferTools.uint8ArrayToBuffer(r.compressBlock(e.BufferTools.bufferToUint8Array(o)))}catch(u){i.emit("error",u);return}i.push(c),l()},i},n}();e.AsyncCompressor=t})(E||(E={}));var E;(function(e){var t=function(){function n(){}return n.decompressAsync=function(r,a,i){if(!i)throw new TypeError("decompressAsync: No callback argument given");var o=new e.Timer;try{r=e.CompressionCommon.decodeCompressedBytes(r,a.inputEncoding)}catch(p){i(void 0,p);return}var s=new e.Decompressor,l=e.ArrayTools.splitByteArray(r,a.blockSize),c=[],u=function(p){if(p<l.length){var d=void 0;try{d=s.decompressBlock(l[p])}catch(h){i(void 0,h);return}c.push(d),o.getElapsedTime()<=20?u(p+1):(e.enqueueImmediate(function(){return u(p+1)}),o.restart())}else{var m=e.ArrayTools.concatUint8Arrays(c);e.enqueueImmediate(function(){var h;try{h=e.CompressionCommon.encodeDecompressedBytes(m,a.outputEncoding)}catch(f){i(void 0,f);return}e.enqueueImmediate(function(){return i(h)})})}};e.enqueueImmediate(function(){return u(0)})},n.createDecompressionStream=function(){var r=new e.Decompressor,a=require("stream"),i=new a.Transform({decodeStrings:!0,highWaterMark:65536});return i._transform=function(o,s,l){var c;try{c=e.BufferTools.uint8ArrayToBuffer(r.decompressBlock(e.BufferTools.bufferToUint8Array(o)))}catch(u){i.emit("error",u);return}i.push(c),l()},i},n}();e.AsyncDecompressor=t})(E||(E={}));var E;(function(e){var t;(function(n){n.compressAsync=function(r,a,i){if(a.inputEncoding=="ByteArray"&&!(r instanceof Uint8Array)){i(void 0,new TypeError("compressAsync: input is not a Uint8Array"));return}var o={token:Math.random().toString(),type:"compress",data:r,inputEncoding:a.inputEncoding,outputEncoding:a.outputEncoding},s=function(l){var c=l.data;if(!c||c.token!=o.token)return;n.globalWorker.removeEventListener("message",s),c.type=="error"?i(void 0,new Error(c.error)):i(c.data)};n.globalWorker.addEventListener("message",s),n.globalWorker.postMessage(o,[])},n.decompressAsync=function(r,a,i){var o={token:Math.random().toString(),type:"decompress",data:r,inputEncoding:a.inputEncoding,outputEncoding:a.outputEncoding},s=function(l){var c=l.data;if(!c||c.token!=o.token)return;n.globalWorker.removeEventListener("message",s),c.type=="error"?i(void 0,new Error(c.error)):i(c.data)};n.globalWorker.addEventListener("message",s),n.globalWorker.postMessage(o,[])},n.installWebWorkerIfNeeded=function(){typeof self=="object"&&self.document===void 0&&self.addEventListener!=null&&(self.addEventListener("message",function(r){var a=r.data;if(a.type=="compress"){var i=void 0;try{i=e.compress(a.data,{outputEncoding:a.outputEncoding})}catch(l){self.postMessage({token:a.token,type:"error",error:e.createErrorMessage(l)},[]);return}var o={token:a.token,type:"compressionResult",data:i,encoding:a.outputEncoding};o.data instanceof Uint8Array&&navigator.appVersion.indexOf("MSIE 10")===-1?self.postMessage(o,[o.data.buffer]):self.postMessage(o,[])}else if(a.type=="decompress"){var s=void 0;try{s=e.decompress(a.data,{inputEncoding:a.inputEncoding,outputEncoding:a.outputEncoding})}catch(c){self.postMessage({token:a.token,type:"error",error:e.createErrorMessage(c)},[]);return}var o={token:a.token,type:"decompressionResult",data:s,encoding:a.outputEncoding};o.data instanceof Uint8Array&&navigator.appVersion.indexOf("MSIE 10")===-1?self.postMessage(o,[o.data.buffer]):self.postMessage(o,[])}}),self.addEventListener("error",function(r){e.log(e.createErrorMessage(r.error,"Unexpected LZUTF8 WebWorker exception"))}))},n.createGlobalWorkerIfNeeded=function(){if(n.globalWorker)return!0;if(!e.webWorkersAvailable())return!1;if(!n.scriptURI&&typeof document=="object"){var r=document.getElementById("lzutf8");r!=null&&(n.scriptURI=r.getAttribute("src")||void 0)}return n.scriptURI?(n.globalWorker=new Worker(n.scriptURI),!0):!1},n.terminate=function(){n.globalWorker&&(n.globalWorker.terminate(),n.globalWorker=void 0)}})(t=e.WebWorker||(e.WebWorker={})),t.installWebWorkerIfNeeded()})(E||(E={}));var E;(function(e){var t=function(){function n(r,a,i){this.container=r,this.startPosition=a,this.length=i}return n.prototype.get=function(r){return this.container[this.startPosition+r]},n.prototype.getInReversedOrder=function(r){return this.container[this.startPosition+this.length-1-r]},n.prototype.set=function(r,a){this.container[this.startPosition+r]=a},n}();e.ArraySegment=t})(E||(E={}));var E;(function(e){var t;(function(n){n.copyElements=function(r,a,i,o,s){for(;s--;)i[o++]=r[a++]},n.zeroElements=function(r,a,i){for(;i--;)r[a++]=0},n.countNonzeroValuesInArray=function(r){for(var a=0,i=0;i<r.length;i++)r[i]&&a++;return a},n.truncateStartingElements=function(r,a){if(r.length<=a)throw new RangeError("truncateStartingElements: Requested length should be smaller than array length");for(var i=r.length-a,o=0;o<a;o++)r[o]=r[i+o];r.length=a},n.doubleByteArrayCapacity=function(r){var a=new Uint8Array(r.length*2);return a.set(r),a},n.concatUint8Arrays=function(r){for(var a=0,i=0,o=r;i<o.length;i++){var s=o[i];a+=s.length}for(var l=new Uint8Array(a),c=0,u=0,p=r;u<p.length;u++){var s=p[u];l.set(s,c),c+=s.length}return l},n.splitByteArray=function(r,a){for(var i=[],o=0;o<r.length;){var s=Math.min(a,r.length-o);i.push(r.subarray(o,o+s)),o+=s}return i}})(t=e.ArrayTools||(e.ArrayTools={}))})(E||(E={}));var E;(function(e){var t;(function(n){n.convertToUint8ArrayIfNeeded=function(r){return typeof Buffer=="function"&&Buffer.isBuffer(r)?n.bufferToUint8Array(r):r},n.uint8ArrayToBuffer=function(r){if(Buffer.prototype instanceof Uint8Array){var a=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return Object.setPrototypeOf(a,Buffer.prototype),a}else{for(var i=r.length,o=new Buffer(i),s=0;s<i;s++)o[s]=r[s];return o}},n.bufferToUint8Array=function(r){if(Buffer.prototype instanceof Uint8Array)return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);for(var a=r.length,i=new Uint8Array(a),o=0;o<a;o++)i[o]=r[o];return i}})(t=e.BufferTools||(e.BufferTools={}))})(E||(E={}));var E;(function(e){var t;(function(n){n.getCroppedBuffer=function(r,a,i,o){o===void 0&&(o=0);var s=new Uint8Array(i+o);return s.set(r.subarray(a,a+i)),s},n.getCroppedAndAppendedByteArray=function(r,a,i,o){return e.ArrayTools.concatUint8Arrays([r.subarray(a,a+i),o])},n.detectCompressionSourceEncoding=function(r){if(r==null)throw new TypeError("detectCompressionSourceEncoding: input is null or undefined");if(typeof r=="string")return"String";if(r instanceof Uint8Array||typeof Buffer=="function"&&Buffer.isBuffer(r))return"ByteArray";throw new TypeError("detectCompressionSourceEncoding: input must be of type 'string', 'Uint8Array' or 'Buffer'")},n.encodeCompressedBytes=function(r,a){switch(a){case"ByteArray":return r;case"Buffer":return e.BufferTools.uint8ArrayToBuffer(r);case"Base64":return e.encodeBase64(r);case"BinaryString":return e.encodeBinaryString(r);case"StorageBinaryString":return e.encodeStorageBinaryString(r);default:throw new TypeError("encodeCompressedBytes: invalid output encoding requested")}},n.decodeCompressedBytes=function(r,a){if(a==null)throw new TypeError("decodeCompressedData: Input is null or undefined");switch(a){case"ByteArray":case"Buffer":var i=e.BufferTools.convertToUint8ArrayIfNeeded(r);if(!(i instanceof Uint8Array))throw new TypeError("decodeCompressedData: 'ByteArray' or 'Buffer' input type was specified but input is not a Uint8Array or Buffer");return i;case"Base64":if(typeof r!="string")throw new TypeError("decodeCompressedData: 'Base64' input type was specified but input is not a string");return e.decodeBase64(r);case"BinaryString":if(typeof r!="string")throw new TypeError("decodeCompressedData: 'BinaryString' input type was specified but input is not a string");return e.decodeBinaryString(r);case"StorageBinaryString":if(typeof r!="string")throw new TypeError("decodeCompressedData: 'StorageBinaryString' input type was specified but input is not a string");return e.decodeStorageBinaryString(r);default:throw new TypeError("decodeCompressedData: invalid input encoding requested: '"+a+"'")}},n.encodeDecompressedBytes=function(r,a){switch(a){case"String":return e.decodeUTF8(r);case"ByteArray":return r;case"Buffer":if(typeof Buffer!="function")throw new TypeError("encodeDecompressedBytes: a 'Buffer' type was specified but is not supported at the current envirnment");return e.BufferTools.uint8ArrayToBuffer(r);default:throw new TypeError("encodeDecompressedBytes: invalid output encoding requested")}}})(t=e.CompressionCommon||(e.CompressionCommon={}))})(E||(E={}));var E;(function(e){var t;(function(n){var r=[],a;n.enqueueImmediate=function(i){r.push(i),r.length===1&&a()},n.initializeScheduler=function(){var i=function(){for(var c=0,u=r;c<u.length;c++){var p=u[c];try{p.call(void 0)}catch(d){e.printExceptionAndStackTraceToConsole(d,"enqueueImmediate exception")}}r.length=0};if(e.runningInNodeJS()&&(a=function(){return setImmediate(function(){return i()})}),typeof window=="object"&&typeof window.addEventListener=="function"&&typeof window.postMessage=="function"){var o="enqueueImmediate-"+Math.random().toString();window.addEventListener("message",function(c){c.data===o&&i()});var s;e.runningInNullOrigin()?s="*":s=window.location.href,a=function(){return window.postMessage(o,s)}}else if(typeof MessageChannel=="function"&&typeof MessagePort=="function"){var l=new MessageChannel;l.port1.onmessage=function(){return i()},a=function(){return l.port2.postMessage(0)}}else a=function(){return setTimeout(function(){return i()},0)}},n.initializeScheduler()})(t=e.EventLoop||(e.EventLoop={})),e.enqueueImmediate=function(n){return t.enqueueImmediate(n)}})(E||(E={}));var E;(function(e){var t;(function(n){n.override=function(r,a){return n.extend(r,a)},n.extend=function(r,a){if(r==null)throw new TypeError("obj is null or undefined");if(typeof r!="object")throw new TypeError("obj is not an object");if(a==null&&(a={}),typeof a!="object")throw new TypeError("newProperties is not an object");if(a!=null)for(var i in a)r[i]=a[i];return r}})(t=e.ObjectTools||(e.ObjectTools={}))})(E||(E={}));var E;(function(e){e.getRandomIntegerInRange=function(t,n){return t+Math.floor(Math.random()*(n-t))},e.getRandomUTF16StringOfLength=function(t){for(var n="",r=0;r<t;r++){var a=void 0;do a=e.getRandomIntegerInRange(0,1114111+1);while(a>=55296&&a<=57343);n+=e.Encoding.CodePoint.decodeToString(a)}return n}})(E||(E={}));var E;(function(e){var t=function(){function n(r){r===void 0&&(r=1024),this.outputBufferCapacity=r,this.outputPosition=0,this.outputString="",this.outputBuffer=new Uint16Array(this.outputBufferCapacity)}return n.prototype.appendCharCode=function(r){this.outputBuffer[this.outputPosition++]=r,this.outputPosition===this.outputBufferCapacity&&this.flushBufferToOutputString()},n.prototype.appendCharCodes=function(r){for(var a=0,i=r.length;a<i;a++)this.appendCharCode(r[a])},n.prototype.appendString=function(r){for(var a=0,i=r.length;a<i;a++)this.appendCharCode(r.charCodeAt(a))},n.prototype.appendCodePoint=function(r){if(r<=65535)this.appendCharCode(r);else if(r<=1114111)this.appendCharCode(55296+(r-65536>>>10)),this.appendCharCode(56320+(r-65536&1023));else throw new Error("appendCodePoint: A code point of "+r+" cannot be encoded in UTF-16")},n.prototype.getOutputString=function(){return this.flushBufferToOutputString(),this.outputString},n.prototype.flushBufferToOutputString=function(){this.outputPosition===this.outputBufferCapacity?this.outputString+=String.fromCharCode.apply(null,this.outputBuffer):this.outputString+=String.fromCharCode.apply(null,this.outputBuffer.subarray(0,this.outputPosition)),this.outputPosition=0},n}();e.StringBuilder=t})(E||(E={}));var E;(function(e){var t=function(){function n(){this.restart()}return n.prototype.restart=function(){this.startTime=n.getTimestamp()},n.prototype.getElapsedTime=function(){return n.getTimestamp()-this.startTime},n.prototype.getElapsedTimeAndRestart=function(){var r=this.getElapsedTime();return this.restart(),r},n.prototype.logAndRestart=function(r,a){a===void 0&&(a=!0);var i=this.getElapsedTime(),o=r+": "+i.toFixed(3)+"ms";return e.log(o,a),this.restart(),i},n.getTimestamp=function(){return this.timestampFunc||this.createGlobalTimestampFunction(),this.timestampFunc()},n.getMicrosecondTimestamp=function(){return Math.floor(n.getTimestamp()*1e3)},n.createGlobalTimestampFunction=function(){if(typeof process=="object"&&typeof process.hrtime=="function"){var r=0;this.timestampFunc=function(){var s=process.hrtime(),l=s[0]*1e3+s[1]/1e6;return r+l},r=Date.now()-this.timestampFunc()}else if(typeof chrome=="object"&&chrome.Interval){var a=Date.now(),i=new chrome.Interval;i.start(),this.timestampFunc=function(){return a+i.microseconds()/1e3}}else if(typeof performance=="object"&&performance.now){var o=Date.now()-performance.now();this.timestampFunc=function(){return o+performance.now()}}else Date.now?this.timestampFunc=function(){return Date.now()}:this.timestampFunc=function(){return new Date().getTime()}},n}();e.Timer=t})(E||(E={}));var E;(function(e){var t=function(){function n(r){r===void 0&&(r=!0),this.MinimumSequenceLength=4,this.MaximumSequenceLength=31,this.MaximumMatchDistance=32767,this.PrefixHashTableSize=65537,this.inputBufferStreamOffset=1,r&&typeof Uint32Array=="function"?this.prefixHashTable=new e.CompressorCustomHashTable(this.PrefixHashTableSize):this.prefixHashTable=new e.CompressorSimpleHashTable(this.PrefixHashTableSize)}return n.prototype.compressBlock=function(r){if(r==null)throw new TypeError("compressBlock: undefined or null input received");return typeof r=="string"&&(r=e.encodeUTF8(r)),r=e.BufferTools.convertToUint8ArrayIfNeeded(r),this.compressUtf8Block(r)},n.prototype.compressUtf8Block=function(r){if(!r||r.length==0)return new Uint8Array(0);var a=this.cropAndAddNewBytesToInputBuffer(r),i=this.inputBuffer,o=this.inputBuffer.length;this.outputBuffer=new Uint8Array(r.length),this.outputBufferPosition=0;for(var s=0,l=a;l<o;l++){var c=i[l],u=l<s;if(l>o-this.MinimumSequenceLength){u||this.outputRawByte(c);continue}var p=this.getBucketIndexForPrefix(l);if(!u){var d=this.findLongestMatch(l,p);d!=null&&(this.outputPointerBytes(d.length,d.distance),s=l+d.length,u=!0)}u||this.outputRawByte(c);var m=this.inputBufferStreamOffset+l;this.prefixHashTable.addValueToBucket(p,m)}return this.outputBuffer.subarray(0,this.outputBufferPosition)},n.prototype.findLongestMatch=function(r,a){var i=this.prefixHashTable.getArraySegmentForBucketIndex(a,this.reusableArraySegmentObject);if(i==null)return null;for(var o=this.inputBuffer,s,l=0,c=0;c<i.length;c++){var u=i.getInReversedOrder(c)-this.inputBufferStreamOffset,p=r-u,d=void 0;if(s===void 0?d=this.MinimumSequenceLength-1:s<128&&p>=128?d=l+(l>>>1):d=l,p>this.MaximumMatchDistance||d>=this.MaximumSequenceLength||r+d>=o.length)break;if(o[u+d]!==o[r+d])continue;for(var m=0;;m++)if(r+m===o.length||o[u+m]!==o[r+m]){m>d&&(s=p,l=m);break}else if(m===this.MaximumSequenceLength)return{distance:p,length:this.MaximumSequenceLength}}return s!==void 0?{distance:s,length:l}:null},n.prototype.getBucketIndexForPrefix=function(r){return(this.inputBuffer[r]*7880599+this.inputBuffer[r+1]*39601+this.inputBuffer[r+2]*199+this.inputBuffer[r+3])%this.PrefixHashTableSize},n.prototype.outputPointerBytes=function(r,a){a<128?(this.outputRawByte(192|r),this.outputRawByte(a)):(this.outputRawByte(224|r),this.outputRawByte(a>>>8),this.outputRawByte(a&255))},n.prototype.outputRawByte=function(r){this.outputBuffer[this.outputBufferPosition++]=r},n.prototype.cropAndAddNewBytesToInputBuffer=function(r){if(this.inputBuffer===void 0)return this.inputBuffer=r,0;var a=Math.min(this.inputBuffer.length,this.MaximumMatchDistance),i=this.inputBuffer.length-a;return this.inputBuffer=e.CompressionCommon.getCroppedAndAppendedByteArray(this.inputBuffer,i,a,r),this.inputBufferStreamOffset+=i,a},n}();e.Compressor=t})(E||(E={}));var E;(function(e){var t=function(){function n(r){this.minimumBucketCapacity=4,this.maximumBucketCapacity=64,this.bucketLocators=new Uint32Array(r*2),this.storage=new Uint32Array(r*2),this.storageIndex=1}return n.prototype.addValueToBucket=function(r,a){r<<=1,this.storageIndex>=this.storage.length>>>1&&this.compact();var i=this.bucketLocators[r],o;if(i===0)i=this.storageIndex,o=1,this.storage[this.storageIndex]=a,this.storageIndex+=this.minimumBucketCapacity;else{o=this.bucketLocators[r+1],o===this.maximumBucketCapacity-1&&(o=this.truncateBucketToNewerElements(i,o,this.maximumBucketCapacity/2));var s=i+o;this.storage[s]===0?(this.storage[s]=a,s===this.storageIndex&&(this.storageIndex+=o)):(e.ArrayTools.copyElements(this.storage,i,this.storage,this.storageIndex,o),i=this.storageIndex,this.storageIndex+=o,this.storage[this.storageIndex++]=a,this.storageIndex+=o),o++}this.bucketLocators[r]=i,this.bucketLocators[r+1]=o},n.prototype.truncateBucketToNewerElements=function(r,a,i){var o=r+a-i;return e.ArrayTools.copyElements(this.storage,o,this.storage,r,i),e.ArrayTools.zeroElements(this.storage,r+i,a-i),i},n.prototype.compact=function(){var r=this.bucketLocators,a=this.storage;this.bucketLocators=new Uint32Array(this.bucketLocators.length),this.storageIndex=1;for(var i=0;i<r.length;i+=2){var o=r[i+1];if(o===0)continue;this.bucketLocators[i]=this.storageIndex,this.bucketLocators[i+1]=o,this.storageIndex+=Math.max(Math.min(o*2,this.maximumBucketCapacity),this.minimumBucketCapacity)}this.storage=new Uint32Array(this.storageIndex*8);for(var i=0;i<r.length;i+=2){var s=r[i];if(s===0)continue;var l=this.bucketLocators[i],c=this.bucketLocators[i+1];e.ArrayTools.copyElements(a,s,this.storage,l,c)}},n.prototype.getArraySegmentForBucketIndex=function(r,a){r<<=1;var i=this.bucketLocators[r];return i===0?null:(a===void 0&&(a=new e.ArraySegment(this.storage,i,this.bucketLocators[r+1])),a)},n.prototype.getUsedBucketCount=function(){return Math.floor(e.ArrayTools.countNonzeroValuesInArray(this.bucketLocators)/2)},n.prototype.getTotalElementCount=function(){for(var r=0,a=0;a<this.bucketLocators.length;a+=2)r+=this.bucketLocators[a+1];return r},n}();e.CompressorCustomHashTable=t})(E||(E={}));var E;(function(e){var t=function(){function n(r){this.maximumBucketCapacity=64,this.buckets=new Array(r)}return n.prototype.addValueToBucket=function(r,a){var i=this.buckets[r];i===void 0?this.buckets[r]=[a]:(i.length===this.maximumBucketCapacity-1&&e.ArrayTools.truncateStartingElements(i,this.maximumBucketCapacity/2),i.push(a))},n.prototype.getArraySegmentForBucketIndex=function(r,a){var i=this.buckets[r];return i===void 0?null:(a===void 0&&(a=new e.ArraySegment(i,0,i.length)),a)},n.prototype.getUsedBucketCount=function(){return e.ArrayTools.countNonzeroValuesInArray(this.buckets)},n.prototype.getTotalElementCount=function(){for(var r=0,a=0;a<this.buckets.length;a++)this.buckets[a]!==void 0&&(r+=this.buckets[a].length);return r},n}();e.CompressorSimpleHashTable=t})(E||(E={}));var E;(function(e){var t=function(){function n(){this.MaximumMatchDistance=32767,this.outputPosition=0}return n.prototype.decompressBlockToString=function(r){return r=e.BufferTools.convertToUint8ArrayIfNeeded(r),e.decodeUTF8(this.decompressBlock(r))},n.prototype.decompressBlock=function(r){this.inputBufferRemainder&&(r=e.ArrayTools.concatUint8Arrays([this.inputBufferRemainder,r]),this.inputBufferRemainder=void 0);for(var a=this.cropOutputBufferToWindowAndInitialize(Math.max(r.length*4,1024)),i=0,o=r.length;i<o;i++){var s=r[i];if(s>>>6!=3){this.outputByte(s);continue}var l=s>>>5;if(i==o-1||i==o-2&&l==7){this.inputBufferRemainder=r.subarray(i);break}if(r[i+1]>>>7===1)this.outputByte(s);else{var c=s&31,u=void 0;l==6?(u=r[i+1],i+=1):(u=r[i+1]<<8|r[i+2],i+=2);for(var p=this.outputPosition-u,d=0;d<c;d++)this.outputByte(this.outputBuffer[p+d])}}return this.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence(),e.CompressionCommon.getCroppedBuffer(this.outputBuffer,a,this.outputPosition-a)},n.prototype.outputByte=function(r){this.outputPosition===this.outputBuffer.length&&(this.outputBuffer=e.ArrayTools.doubleByteArrayCapacity(this.outputBuffer)),this.outputBuffer[this.outputPosition++]=r},n.prototype.cropOutputBufferToWindowAndInitialize=function(r){if(!this.outputBuffer)return this.outputBuffer=new Uint8Array(r),0;var a=Math.min(this.outputPosition,this.MaximumMatchDistance);if(this.outputBuffer=e.CompressionCommon.getCroppedBuffer(this.outputBuffer,this.outputPosition-a,a,r),this.outputPosition=a,this.outputBufferRemainder){for(var i=0;i<this.outputBufferRemainder.length;i++)this.outputByte(this.outputBufferRemainder[i]);this.outputBufferRemainder=void 0}return a},n.prototype.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence=function(){for(var r=1;r<=4&&this.outputPosition-r>=0;r++){var a=this.outputBuffer[this.outputPosition-r];if(r<4&&a>>>3===30||r<3&&a>>>4===14||r<2&&a>>>5===6){this.outputBufferRemainder=this.outputBuffer.subarray(this.outputPosition-r,this.outputPosition),this.outputPosition-=r;return}}},n}();e.Decompressor=t})(E||(E={}));var E;(function(e){var t;(function(n){var r;(function(a){var i=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),o=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255]),s="=",l=61;a.encode=function(c){return!c||c.length==0?"":e.runningInNodeJS()?e.BufferTools.uint8ArrayToBuffer(c).toString("base64"):a.encodeWithJS(c)},a.decode=function(c){return c?e.runningInNodeJS()?e.BufferTools.bufferToUint8Array(new Buffer(c,"base64")):a.decodeWithJS(c):new Uint8Array(0)},a.encodeWithJS=function(c,u){if(u===void 0&&(u=!0),!c||c.length==0)return"";for(var p=i,d=new e.StringBuilder,m,h=0,f=c.length;h<f;h+=3)h<=f-3?(m=c[h]<<16|c[h+1]<<8|c[h+2],d.appendCharCode(p[m>>>18&63]),d.appendCharCode(p[m>>>12&63]),d.appendCharCode(p[m>>>6&63]),d.appendCharCode(p[m&63]),m=0):h===f-2?(m=c[h]<<16|c[h+1]<<8,d.appendCharCode(p[m>>>18&63]),d.appendCharCode(p[m>>>12&63]),d.appendCharCode(p[m>>>6&63]),u&&d.appendCharCode(l)):h===f-1&&(m=c[h]<<16,d.appendCharCode(p[m>>>18&63]),d.appendCharCode(p[m>>>12&63]),u&&(d.appendCharCode(l),d.appendCharCode(l)));return d.getOutputString()},a.decodeWithJS=function(c,u){if(!c||c.length==0)return new Uint8Array(0);var p=c.length%4;if(p===1)throw new Error("Invalid Base64 string: length % 4 == 1");p===2?c+=s+s:p===3&&(c+=s),u||(u=new Uint8Array(c.length));for(var d=0,m=c.length,h=0;h<m;h+=4){var f=o[c.charCodeAt(h)]<<18|o[c.charCodeAt(h+1)]<<12|o[c.charCodeAt(h+2)]<<6|o[c.charCodeAt(h+3)];u[d++]=f>>>16&255,u[d++]=f>>>8&255,u[d++]=f&255}return c.charCodeAt(m-1)==l&&d--,c.charCodeAt(m-2)==l&&d--,u.subarray(0,d)}})(r=n.Base64||(n.Base64={}))})(t=e.Encoding||(e.Encoding={}))})(E||(E={}));var E;(function(e){var t;(function(n){var r;(function(a){a.encode=function(i){if(i==null)throw new TypeError("BinaryString.encode: undefined or null input received");if(i.length===0)return"";for(var o=i.length,s=new e.StringBuilder,l=0,c=1,u=0;u<o;u+=2){var p=void 0;u==o-1?p=i[u]<<8:p=i[u]<<8|i[u+1],s.appendCharCode(l<<16-c|p>>>c),l=p&(1<<c)-1,c===15?(s.appendCharCode(l),l=0,c=1):c+=1,u>=o-2&&s.appendCharCode(l<<16-c)}return s.appendCharCode(32768|o%2),s.getOutputString()},a.decode=function(i){if(typeof i!="string")throw new TypeError("BinaryString.decode: invalid input type");if(i=="")return new Uint8Array(0);for(var o=new Uint8Array(i.length*3),s=0,l=function(m){o[s++]=m>>>8,o[s++]=m&255},c=0,u=0,p=0;p<i.length;p++){var d=i.charCodeAt(p);if(d>=32768){d==(32768|1)&&s--,u=0;continue}u==0?c=d:(l(c<<u|d>>>15-u),c=d&(1<<15-u)-1),u==15?u=0:u+=1}return o.subarray(0,s)}})(r=n.BinaryString||(n.BinaryString={}))})(t=e.Encoding||(e.Encoding={}))})(E||(E={}));var E;(function(e){var t;(function(n){var r;(function(a){a.encodeFromString=function(i,o){var s=i.charCodeAt(o);if(s<55296||s>56319)return s;var l=i.charCodeAt(o+1);if(l>=56320&&l<=57343)return 65536+((s-55296<<10)+(l-56320));throw new Error("getUnicodeCodePoint: Received a lead surrogate character, char code "+s+", followed by "+l+", which is not a trailing surrogate character code.")},a.decodeToString=function(i){if(i<=65535)return String.fromCharCode(i);if(i<=1114111)return String.fromCharCode(55296+(i-65536>>>10),56320+(i-65536&1023));throw new Error("getStringFromUnicodeCodePoint: A code point of "+i+" cannot be encoded in UTF-16")}})(r=n.CodePoint||(n.CodePoint={}))})(t=e.Encoding||(e.Encoding={}))})(E||(E={}));var E;(function(e){var t;(function(n){var r;(function(a){var i=["000","001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"];a.encode=function(o){for(var s=[],l=0;l<o.length;l++)s.push(i[o[l]]);return s.join(" ")}})(r=n.DecimalString||(n.DecimalString={}))})(t=e.Encoding||(e.Encoding={}))})(E||(E={}));var E;(function(e){var t;(function(n){var r;(function(a){a.encode=function(i){return n.BinaryString.encode(i).replace(/\0/g,"\u8002")},a.decode=function(i){return n.BinaryString.decode(i.replace(/\u8002/g,"\0"))}})(r=n.StorageBinaryString||(n.StorageBinaryString={}))})(t=e.Encoding||(e.Encoding={}))})(E||(E={}));var E;(function(e){var t;(function(n){var r;(function(a){var i,o;a.encode=function(s){return!s||s.length==0?new Uint8Array(0):e.runningInNodeJS()?e.BufferTools.bufferToUint8Array(new Buffer(s,"utf8")):a.createNativeTextEncoderAndDecoderIfAvailable()?i.encode(s):a.encodeWithJS(s)},a.decode=function(s){return!s||s.length==0?"":e.runningInNodeJS()?e.BufferTools.uint8ArrayToBuffer(s).toString("utf8"):a.createNativeTextEncoderAndDecoderIfAvailable()?o.decode(s):a.decodeWithJS(s)},a.encodeWithJS=function(s,l){if(!s||s.length==0)return new Uint8Array(0);l||(l=new Uint8Array(s.length*4));for(var c=0,u=0;u<s.length;u++){var p=n.CodePoint.encodeFromString(s,u);if(p<=127)l[c++]=p;else if(p<=2047)l[c++]=192|p>>>6,l[c++]=128|p&63;else if(p<=65535)l[c++]=224|p>>>12,l[c++]=128|p>>>6&63,l[c++]=128|p&63;else if(p<=1114111)l[c++]=240|p>>>18,l[c++]=128|p>>>12&63,l[c++]=128|p>>>6&63,l[c++]=128|p&63,u++;else throw new Error("Invalid UTF-16 string: Encountered a character unsupported by UTF-8/16 (RFC 3629)")}return l.subarray(0,c)},a.decodeWithJS=function(s,l,c){if(l===void 0&&(l=0),!s||s.length==0)return"";c===void 0&&(c=s.length);for(var u=new e.StringBuilder,p,d,m=l,h=c;m<h;){if(d=s[m],d>>>7===0)p=d,m+=1;else if(d>>>5===6){if(m+1>=c)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+m);p=(d&31)<<6|s[m+1]&63,m+=2}else if(d>>>4===14){if(m+2>=c)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+m);p=(d&15)<<12|(s[m+1]&63)<<6|s[m+2]&63,m+=3}else if(d>>>3===30){if(m+3>=c)throw new Error("Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+m);p=(d&7)<<18|(s[m+1]&63)<<12|(s[m+2]&63)<<6|s[m+3]&63,m+=4}else throw new Error("Invalid UTF-8 stream: An invalid lead byte value encountered at position "+m);u.appendCodePoint(p)}return u.getOutputString()},a.createNativeTextEncoderAndDecoderIfAvailable=function(){return i?!0:typeof TextEncoder=="function"?(i=new TextEncoder("utf-8"),o=new TextDecoder("utf-8"),!0):!1}})(r=n.UTF8||(n.UTF8={}))})(t=e.Encoding||(e.Encoding={}))})(E||(E={}));var E;(function(e){function t(f,g){if(g===void 0&&(g={}),f==null)throw new TypeError("compress: undefined or null input received");var x=e.CompressionCommon.detectCompressionSourceEncoding(f);g=e.ObjectTools.override({inputEncoding:x,outputEncoding:"ByteArray"},g);var w=new e.Compressor,y=w.compressBlock(f);return e.CompressionCommon.encodeCompressedBytes(y,g.outputEncoding)}e.compress=t;function n(f,g){if(g===void 0&&(g={}),f==null)throw new TypeError("decompress: undefined or null input received");g=e.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String"},g);var x=e.CompressionCommon.decodeCompressedBytes(f,g.inputEncoding),w=new e.Decompressor,y=w.decompressBlock(x);return e.CompressionCommon.encodeDecompressedBytes(y,g.outputEncoding)}e.decompress=n;function r(f,g,x){x==null&&(x=function(){});var w;try{w=e.CompressionCommon.detectCompressionSourceEncoding(f)}catch(y){x(void 0,y);return}g=e.ObjectTools.override({inputEncoding:w,outputEncoding:"ByteArray",useWebWorker:!0,blockSize:65536},g),e.enqueueImmediate(function(){g.useWebWorker&&e.WebWorker.createGlobalWorkerIfNeeded()?e.WebWorker.compressAsync(f,g,x):e.AsyncCompressor.compressAsync(f,g,x)})}e.compressAsync=r;function a(f,g,x){if(x==null&&(x=function(){}),f==null){x(void 0,new TypeError("decompressAsync: undefined or null input received"));return}g=e.ObjectTools.override({inputEncoding:"ByteArray",outputEncoding:"String",useWebWorker:!0,blockSize:65536},g);var w=e.BufferTools.convertToUint8ArrayIfNeeded(f);e.EventLoop.enqueueImmediate(function(){g.useWebWorker&&e.WebWorker.createGlobalWorkerIfNeeded()?e.WebWorker.decompressAsync(w,g,x):e.AsyncDecompressor.decompressAsync(f,g,x)})}e.decompressAsync=a;function i(){return e.AsyncCompressor.createCompressionStream()}e.createCompressionStream=i;function o(){return e.AsyncDecompressor.createDecompressionStream()}e.createDecompressionStream=o;function s(f){return e.Encoding.UTF8.encode(f)}e.encodeUTF8=s;function l(f){return e.Encoding.UTF8.decode(f)}e.decodeUTF8=l;function c(f){return e.Encoding.Base64.encode(f)}e.encodeBase64=c;function u(f){return e.Encoding.Base64.decode(f)}e.decodeBase64=u;function p(f){return e.Encoding.BinaryString.encode(f)}e.encodeBinaryString=p;function d(f){return e.Encoding.BinaryString.decode(f)}e.decodeBinaryString=d;function m(f){return e.Encoding.StorageBinaryString.encode(f)}e.encodeStorageBinaryString=m;function h(f){return e.Encoding.StorageBinaryString.decode(f)}e.decodeStorageBinaryString=h})(E||(E={}))}),ra=Fe((Os,na)=>{"use strict";var et={};et.enc=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","\\","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u"];et.dec=Object.fromEntries(et.enc.map((e,t)=>[e.charCodeAt(0),t]));et.enc=Object.fromEntries(et.enc.map((e,t)=>[t,e]));na.exports=et}),la=Fe((Rs,aa)=>{"use strict";var ia=ra(),so=Math.pow(2,32)-1,co=85*85*85*85,lo=85*85*85,po=85*85,uo=85,fo=[9,10,11,12,13,32],Kn="<~",oa="~>";const Lt={bytes:"ByteArray",string:"String"};function Hn(e){const t=new TextEncoder;return t.encode(e)}function ho(e){const t=new TextDecoder;return t.decode(e)}function sa(e){for(var t=ia.enc,n=e.length%4===0?0:4-e.length%4,r="",a=0;a<e.length;a+=4){for(var i=(e[a]<<24>>>0)+((a+1>e.length?0:e[a+1])<<16>>>0)+((a+2>e.length?0:e[a+2])<<8>>>0)+((a+3>e.length?0:e[a+3])<<0>>>0),o=[],s=0;s<5;++s)o.unshift(t[i%85]),i=Math.floor(i/85);o=o.join(""),o==="!!!!!"&&(o="z"),r+=o}return Kn+r.substring(0,r.length-n)+oa}function ca(e){var t=ia.dec,n=e.length;n-=Kn.length+oa.length;for(var r=n%5===0?0:5-n%5,a=Kn.length,i=a+n,o=new Uint8Array(4*Math.ceil((i-a)/5)),s=function(p){if(p<i)for(;fo.indexOf(e[p])!==-1;)r=(r+1)%5,p++;return p},l=0,c=a;c<i;){var u=0;if(c=s(c),u=t[e[c]]*co,c=s(c+1),u+=(c>=i?84:t[e[c]])*lo,c=s(c+1),u+=(c>=i?84:t[e[c]])*po,c=s(c+1),u+=(c>=i?84:t[e[c]])*uo,c=s(c+1),u+=c>=i?84:t[e[c]],c=s(c+1),u>so||u<0)return!1;o[l]=u>>>24,o[l+1]=u>>>16,o[l+2]=u>>>8,o[l+3]=u&255,l+=4}return o.slice(0,l-r)}aa.exports={encode:function(e,t=Lt.string){return typeof e=="string"&&(e=Hn(e)),t===Lt.bytes?Hn(sa(e)):sa(e)},decode:function(e,t=Lt.bytes){return typeof e=="string"&&(e=Hn(e.replace("z","!!!!!"))),t===Lt.string?ho(ca(e)):ca(e)}}}),da=Fe(wo=>{ba(wo,{BaseAdapter:()=>ae,BaseOverlay:()=>an,FILE_SYSTEM_CHANGES:()=>xe,FileSystemOverlay:()=>Gn,FileSystemRegistry:()=>pa,IndexedDBAdapter:()=>Ze,LocalStorageAdapter:()=>Vn,MemoryAdapter:()=>ot,SessionStorageAdapter:()=>Jn,StorageRegistry:()=>rn,WebStorageAdapter:()=>Ne,basename:()=>nr,can_watch:()=>on,compress:()=>Ke,create_url_object:()=>_e,decode_safe:()=>Zt,decode_utf8:()=>en,decompress:()=>Ie,delimiter:()=>tr,dirname:()=>rt,encode_safe:()=>tn,encode_utf8:()=>nn,extname:()=>Rt,filter_query:()=>qe,get_mime_type:()=>Se,hook_watcher:()=>ke,join:()=>ie,make_glob:()=>pe,normalize:()=>Q,relative:()=>rr,resolve:()=>ar,sep:()=>Ce})});const ve="application/octet-stream";var L;(function(e){e.bytes="MODE_BYTES",e.text="MODE_TEXT"})(L||(L={}));var z;(function(e){e.attached="CHANGE_ATTACHED",e.created="CHANGE_CREATED",e.updated="CHANGE_UPDATED",e.removed="CHANGE_REMOVED"})(z||(z={}));var M;(function(e){e.directory="NODE_DIRECTORY",e.file="NODE_FILE",e.undefined="NODE_UNDEFINED"})(M||(M={}));function J(e){const t=[];let n;const r=i=>{if(t.length>0)for(let o=0;o<t.length;o++){const[s]=t[o];s(i)}},a=i=>{const o=[i];return t.push(o),e&&t.length===1&&(n=e(r)),()=>{const s=t.indexOf(o);s>0&&(t.splice(s,1),n&&t.length==0&&(n(),n=null))}};return{dispatch:r,subscribe:a}}const Xn=Ot($n());function pe(e){return Xn.default(e,{extended:!0,globstar:!0})}const $=Ot(er()),Ea=/[\/]*$/,tr=$.delimiter,Ce=$.sep,nr=$.basename,Rt=$.extname,ie=$.join,rr=$.relative,ar=$.resolve;function rt(e){return e=$.dirname(e),e==="."?Ce:e}function Q(e){return e=$.normalize(e),e==="."||e===Ce?Ce:(e.slice(0,1)!==Ce&&(e=Ce+e),e.replace(Ea,""))}function _a(e={}){const{namespace:t="default"}=e;return{...e,namespace:t}}function _e(e,t){e instanceof Uint8Array&&(t||(t=ve),e=new Blob([e],{type:t}));const n=URL.createObjectURL(e);return{url:n,destroy:async()=>URL.revokeObjectURL(n)}}function on(e,t={}){const{change:n,glob:r,inclusive:a=!1,path:i="/",recursive:o=!1,regex:s,type:l}=t;if(l){if(typeof l=="string"){if(e.type!==l)return!1}else if(!l.includes(e.type))return!1}if(n){if(typeof n=="string"){if(n!==e.change)return!1}else if(!n.includes(e.change))return!1}if(r){const c=pe(Q(r));return c.test(e.path)}else{if(s)return s.test(e.path);if(a){const c=o?ie(i,"**"):ie(i,"*"),u=pe(Q(c));return u.test(e.path)}return e.path===Q(i)}}function qe(e,t={}){const{path:n={},type:r}=t;if(r&&(typeof r=="string"?e=e.filter(a=>a.type===r):e=e.filter(a=>r.includes(a.type))),n.glob){const a=pe(Q(n.glob));e=e.filter(i=>a.test(i.path))}else if(n.regex){const{regex:a}=n;e=e.filter(i=>a.test(i.path))}else{let{path:a="/"}=n;a=n.recursive?ie(a,"**"):ie(a,"*");const i=pe(Q(a));e=e.filter(o=>i.test(o.path))}return e}function ke(e,t={}){return J(n=>{const r=e.subscribe(a=>{on(a,t)&&n(a)});return()=>r()})}class ae{constructor(e={}){this.EVENT_MOUNTED=J();this.EVENT_UNMOUNTED=J();this.options=_a(e)}normalize(e){return Q(e)}async create_url_object(e){throw new Error("bad dispatch to 'create_url_object' (not implemented)")}async get(e){throw new Error("bad dispatch to 'get' (not implemented)")}async put(e,t=M.undefined,n){throw new Error("bad dispatch to 'put' (not implemented)")}async query(e={}){throw new Error("bad dispatch to 'query' (not implemented)")}async read(e){throw new Error("bad dispatch to 'get_stats' (not implemented)")}async reload(){throw new Error("bad dispatch to 'reload' (not implemented)")}async remove(e){throw new Error("bad dispatch to 'remove' (not implemented)")}async watch(e={}){throw new Error("bad dispatch to 'watch' (not implemented)")}async write(e,t){throw new Error("bad dispatch to 'put_payload' (not implemented)")}is_mounted(){throw new Error("bad dispatch to 'is_mounted' (not implemented)")}async mount(){throw new Error("bad dispatch to 'mount' (not implemented)")}async unmount(){throw new Error("bad dispatch to 'unmount' (not implemented)")}}ae.can_hotlink=!1,ae.can_watch=!1,ae.can_watch_reload=!1,ae.is_available=!1,ae.is_readonly=!1,ae.requires_mount=!1;const it=Ot(or());function Ke(e,t={}){const{mode:n=L.bytes}=t;switch(n){case L.bytes:return it.compress(e,{outputEncoding:"ByteArray"});default:throw new Error(`bad option 'options.mode' to 'compress' (encoding mode '${n}' not available)`)}}function Ie(e,t={}){const{mode:n=L.bytes}=t;switch(n){case L.bytes:return it.decompress(e,{outputEncoding:"ByteArray"});case L.text:return it.decompress(e,{outputEncoding:"String"});default:throw new Error(`bad option 'options.mode' to 'decompress' (encoding mode '${n}' not available)`)}}function ge(){return Date.now()}class Nt extends Map{constructor(){super(...arguments);this.clone=e=>{throw new Error("bad dispatch to 'clone' (not implemented)")}}entries(){const{clone:e}=this;let t=Array.from(super.entries());return t=t.map(([n,r],a)=>[n,e(r)]),t[Symbol.iterator]()}forEach(e,t){for(const n of this){const[r,a]=n;e.call(t,this.clone(a),r,this)}}get(e){const t=super.get(e);if(t!==void 0)return this.clone(t)}set(e,t){return t=this.clone(t),super.set(e,t),this}values(){let e=Array.from(super.values());return e=e.map((t,n)=>this.clone(t)),e[Symbol.iterator]()}}var sr={"123":"application/vnd.lotus-1-2-3",ez:"application/andrew-inset",aw:"application/applixware",atom:"application/atom+xml",atomcat:"application/atomcat+xml",atomdeleted:"application/atomdeleted+xml",atomsvc:"application/atomsvc+xml",dwd:"application/atsc-dwd+xml",held:"application/atsc-held+xml",rsat:"application/atsc-rsat+xml",bdoc:"application/bdoc",xcs:"application/calendar+xml",ccxml:"application/ccxml+xml",cdfx:"application/cdfx+xml",cdmia:"application/cdmi-capability",cdmic:"application/cdmi-container",cdmid:"application/cdmi-domain",cdmio:"application/cdmi-object",cdmiq:"application/cdmi-queue",cu:"application/cu-seeme",mpd:"application/dash+xml",davmount:"application/davmount+xml",dbk:"application/docbook+xml",dssc:"application/dssc+der",xdssc:"application/dssc+xml",ecma:"application/ecmascript",es:"application/ecmascript",emma:"application/emma+xml",emotionml:"application/emotionml+xml",epub:"application/epub+zip",exi:"application/exi",fdt:"application/fdt+xml",pfr:"application/font-tdpfr",geojson:"application/geo+json",gml:"application/gml+xml",gpx:"application/gpx+xml",gxf:"application/gxf",gz:"application/gzip",hjson:"application/hjson",stk:"application/hyperstudio",ink:"application/inkml+xml",inkml:"application/inkml+xml",ipfix:"application/ipfix",its:"application/its+xml",jar:"application/java-archive",war:"application/java-archive",ear:"application/java-archive",ser:"application/java-serialized-object",class:"application/java-vm",js:"application/javascript",mjs:"application/javascript",json:"application/json",map:"application/json",json5:"application/json5",jsonml:"application/jsonml+json",jsonld:"application/ld+json",lgr:"application/lgr+xml",lostxml:"application/lost+xml",hqx:"application/mac-binhex40",cpt:"application/mac-compactpro",mads:"application/mads+xml",webmanifest:"application/manifest+json",mrc:"application/marc",mrcx:"application/marcxml+xml",ma:"application/mathematica",nb:"application/mathematica",mb:"application/mathematica",mathml:"application/mathml+xml",mbox:"application/mbox",mscml:"application/mediaservercontrol+xml",metalink:"application/metalink+xml",meta4:"application/metalink4+xml",mets:"application/mets+xml",maei:"application/mmt-aei+xml",musd:"application/mmt-usd+xml",mods:"application/mods+xml",m21:"application/mp21",mp21:"application/mp21",mp4s:"application/mp4",m4p:"application/mp4",xdf:"application/mrb-consumer+xml",doc:"application/msword",dot:"application/msword",mxf:"application/mxf",nq:"application/n-quads",nt:"application/n-triples",cjs:"application/node",bin:"application/octet-stream",dms:"application/octet-stream",lrf:"application/octet-stream",mar:"application/octet-stream",so:"application/octet-stream",dist:"application/octet-stream",distz:"application/octet-stream",pkg:"application/octet-stream",bpk:"application/octet-stream",dump:"application/octet-stream",elc:"application/octet-stream",deploy:"application/octet-stream",exe:"application/x-msdos-program",dll:"application/x-msdownload",deb:"application/x-debian-package",dmg:"application/x-apple-diskimage",iso:"application/x-iso9660-image",img:"application/octet-stream",msi:"application/x-msdownload",msp:"application/octet-stream",msm:"application/octet-stream",buffer:"application/octet-stream",oda:"application/oda",opf:"application/oebps-package+xml",ogx:"application/ogg",omdoc:"application/omdoc+xml",onetoc:"application/onenote",onetoc2:"application/onenote",onetmp:"application/onenote",onepkg:"application/onenote",oxps:"application/oxps",relo:"application/p2p-overlay+xml",xer:"application/patch-ops-error+xml",pdf:"application/pdf",pgp:"application/pgp-encrypted",asc:"application/pgp-signature",sig:"application/pgp-signature",prf:"application/pics-rules",p10:"application/pkcs10",p7m:"application/pkcs7-mime",p7c:"application/pkcs7-mime",p7s:"application/pkcs7-signature",p8:"application/pkcs8",ac:"application/pkix-attr-cert",cer:"application/pkix-cert",crl:"application/pkix-crl",pkipath:"application/pkix-pkipath",pki:"application/pkixcmp",pls:"application/pls+xml",ai:"application/postscript",eps:"application/postscript",ps:"application/postscript",provx:"application/provenance+xml",cww:"application/prs.cww",pskcxml:"application/pskc+xml",raml:"application/raml+yaml",rdf:"application/rdf+xml",owl:"application/rdf+xml",rif:"application/reginfo+xml",rnc:"application/relax-ng-compact-syntax",rl:"application/resource-lists+xml",rld:"application/resource-lists-diff+xml",rs:"application/rls-services+xml",rapd:"application/route-apd+xml",sls:"application/route-s-tsid+xml",rusd:"application/route-usd+xml",gbr:"application/rpki-ghostbusters",mft:"application/rpki-manifest",roa:"application/rpki-roa",rsd:"application/rsd+xml",rss:"application/rss+xml",rtf:"application/rtf",sbml:"application/sbml+xml",scq:"application/scvp-cv-request",scs:"application/scvp-cv-response",spq:"application/scvp-vp-request",spp:"application/scvp-vp-response",sdp:"application/sdp",senmlx:"application/senml+xml",sensmlx:"application/sensml+xml",setpay:"application/set-payment-initiation",setreg:"application/set-registration-initiation",shf:"application/shf+xml",siv:"application/sieve",sieve:"application/sieve",smi:"application/smil+xml",smil:"application/smil+xml",rq:"application/sparql-query",srx:"application/sparql-results+xml",gram:"application/srgs",grxml:"application/srgs+xml",sru:"application/sru+xml",ssdl:"application/ssdl+xml",ssml:"application/ssml+xml",swidtag:"application/swid+xml",tei:"application/tei+xml",teicorpus:"application/tei+xml",tfi:"application/thraud+xml",tsd:"application/timestamped-data",toml:"application/toml",ttml:"application/ttml+xml",rsheet:"application/urc-ressheet+xml","1km":"application/vnd.1000minds.decision-model+xml",plb:"application/vnd.3gpp.pic-bw-large",psb:"application/vnd.3gpp.pic-bw-small",pvb:"application/vnd.3gpp.pic-bw-var",tcap:"application/vnd.3gpp2.tcap",pwn:"application/vnd.3m.post-it-notes",aso:"application/vnd.accpac.simply.aso",imp:"application/vnd.accpac.simply.imp",acu:"application/vnd.acucobol",atc:"application/vnd.acucorp",acutc:"application/vnd.acucorp",air:"application/vnd.adobe.air-application-installer-package+zip",fcdt:"application/vnd.adobe.formscentral.fcdt",fxp:"application/vnd.adobe.fxp",fxpl:"application/vnd.adobe.fxp",xdp:"application/vnd.adobe.xdp+xml",xfdf:"application/vnd.adobe.xfdf",ahead:"application/vnd.ahead.space",azf:"application/vnd.airzip.filesecure.azf",azs:"application/vnd.airzip.filesecure.azs",azw:"application/vnd.amazon.ebook",acc:"application/vnd.americandynamics.acc",ami:"application/vnd.amiga.ami",apk:"application/vnd.android.package-archive",cii:"application/vnd.anser-web-certificate-issue-initiation",fti:"application/vnd.anser-web-funds-transfer-initiation",atx:"application/vnd.antix.game-component",mpkg:"application/vnd.apple.installer+xml",keynote:"application/vnd.apple.keynote",m3u8:"application/vnd.apple.mpegurl",numbers:"application/vnd.apple.numbers",pages:"application/vnd.apple.pages",pkpass:"application/vnd.apple.pkpass",swi:"application/vnd.aristanetworks.swi",iota:"application/vnd.astraea-software.iota",aep:"application/vnd.audiograph",bmml:"application/vnd.balsamiq.bmml+xml",mpm:"application/vnd.blueice.multipass",bmi:"application/vnd.bmi",rep:"application/vnd.businessobjects",cdxml:"application/vnd.chemdraw+xml",mmd:"application/vnd.chipnuts.karaoke-mmd",cdy:"application/vnd.cinderella",csl:"application/vnd.citationstyles.style+xml",cla:"application/vnd.claymore",rp9:"application/vnd.cloanto.rp9",c4g:"application/vnd.clonk.c4group",c4d:"application/vnd.clonk.c4group",c4f:"application/vnd.clonk.c4group",c4p:"application/vnd.clonk.c4group",c4u:"application/vnd.clonk.c4group",c11amc:"application/vnd.cluetrust.cartomobile-config",c11amz:"application/vnd.cluetrust.cartomobile-config-pkg",csp:"application/vnd.commonspace",cdbcmsg:"application/vnd.contact.cmsg",cmc:"application/vnd.cosmocaller",clkx:"application/vnd.crick.clicker",clkk:"application/vnd.crick.clicker.keyboard",clkp:"application/vnd.crick.clicker.palette",clkt:"application/vnd.crick.clicker.template",clkw:"application/vnd.crick.clicker.wordbank",wbs:"application/vnd.criticaltools.wbs+xml",pml:"application/vnd.ctc-posml",ppd:"application/vnd.cups-ppd",car:"application/vnd.curl.car",pcurl:"application/vnd.curl.pcurl",dart:"application/vnd.dart",rdz:"application/vnd.data-vision.rdz",uvf:"application/vnd.dece.data",uvvf:"application/vnd.dece.data",uvd:"application/vnd.dece.data",uvvd:"application/vnd.dece.data",uvt:"application/vnd.dece.ttml+xml",uvvt:"application/vnd.dece.ttml+xml",uvx:"application/vnd.dece.unspecified",uvvx:"application/vnd.dece.unspecified",uvz:"application/vnd.dece.zip",uvvz:"application/vnd.dece.zip",fe_launch:"application/vnd.denovo.fcselayout-link",dna:"application/vnd.dna",mlp:"application/vnd.dolby.mlp",dpg:"application/vnd.dpgraph",dfac:"application/vnd.dreamfactory",kpxx:"application/vnd.ds-keypoint",ait:"application/vnd.dvb.ait",svc:"application/vnd.dvb.service",geo:"application/vnd.dynageo",mag:"application/vnd.ecowin.chart",nml:"application/vnd.enliven",esf:"application/vnd.epson.esf",msf:"application/vnd.epson.msf",qam:"application/vnd.epson.quickanime",slt:"application/vnd.epson.salt",ssf:"application/vnd.epson.ssf",es3:"application/vnd.eszigno3+xml",et3:"application/vnd.eszigno3+xml",ez2:"application/vnd.ezpix-album",ez3:"application/vnd.ezpix-package",fdf:"application/vnd.fdf",mseed:"application/vnd.fdsn.mseed",seed:"application/vnd.fdsn.seed",dataless:"application/vnd.fdsn.seed",gph:"application/vnd.flographit",ftc:"application/vnd.fluxtime.clip",fm:"application/vnd.framemaker",frame:"application/vnd.framemaker",maker:"application/vnd.framemaker",book:"application/vnd.framemaker",fnc:"application/vnd.frogans.fnc",ltf:"application/vnd.frogans.ltf",fsc:"application/vnd.fsc.weblaunch",oas:"application/vnd.fujitsu.oasys",oa2:"application/vnd.fujitsu.oasys2",oa3:"application/vnd.fujitsu.oasys3",fg5:"application/vnd.fujitsu.oasysgp",bh2:"application/vnd.fujitsu.oasysprs",ddd:"application/vnd.fujixerox.ddd",xdw:"application/vnd.fujixerox.docuworks",xbd:"application/vnd.fujixerox.docuworks.binder",fzs:"application/vnd.fuzzysheet",txd:"application/vnd.genomatix.tuxedo",ggb:"application/vnd.geogebra.file",ggt:"application/vnd.geogebra.tool",gex:"application/vnd.geometry-explorer",gre:"application/vnd.geometry-explorer",gxt:"application/vnd.geonext",g2w:"application/vnd.geoplan",g3w:"application/vnd.geospace",gmx:"application/vnd.gmx",gdoc:"application/vnd.google-apps.document",gslides:"application/vnd.google-apps.presentation",gsheet:"application/vnd.google-apps.spreadsheet",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz",gqf:"application/vnd.grafeq",gqs:"application/vnd.grafeq",gac:"application/vnd.groove-account",ghf:"application/vnd.groove-help",gim:"application/vnd.groove-identity-message",grv:"application/vnd.groove-injector",gtm:"application/vnd.groove-tool-message",tpl:"application/vnd.groove-tool-template",vcg:"application/vnd.groove-vcard",hal:"application/vnd.hal+xml",zmm:"application/vnd.handheld-entertainment+xml",hbci:"application/vnd.hbci",les:"application/vnd.hhe.lesson-player",hpgl:"application/vnd.hp-hpgl",hpid:"application/vnd.hp-hpid",hps:"application/vnd.hp-hps",jlt:"application/vnd.hp-jlyt",pcl:"application/vnd.hp-pcl",pclxl:"application/vnd.hp-pclxl","sfd-hdstx":"application/vnd.hydrostatix.sof-data",mpy:"application/vnd.ibm.minipay",afp:"application/vnd.ibm.modcap",listafp:"application/vnd.ibm.modcap",list3820:"application/vnd.ibm.modcap",irm:"application/vnd.ibm.rights-management",sc:"application/vnd.ibm.secure-container",icc:"application/vnd.iccprofile",icm:"application/vnd.iccprofile",igl:"application/vnd.igloader",ivp:"application/vnd.immervision-ivp",ivu:"application/vnd.immervision-ivu",igm:"application/vnd.insors.igm",xpw:"application/vnd.intercon.formnet",xpx:"application/vnd.intercon.formnet",i2g:"application/vnd.intergeo",qbo:"application/vnd.intu.qbo",qfx:"application/vnd.intu.qfx",rcprofile:"application/vnd.ipunplugged.rcprofile",irp:"application/vnd.irepository.package+xml",xpr:"application/vnd.is-xpr",fcs:"application/vnd.isac.fcs",jam:"application/vnd.jam",rms:"application/vnd.jcp.javame.midlet-rms",jisp:"application/vnd.jisp",joda:"application/vnd.joost.joda-archive",ktz:"application/vnd.kahootz",ktr:"application/vnd.kahootz",karbon:"application/vnd.kde.karbon",chrt:"application/vnd.kde.kchart",kfo:"application/vnd.kde.kformula",flw:"application/vnd.kde.kivio",kon:"application/vnd.kde.kontour",kpr:"application/vnd.kde.kpresenter",kpt:"application/vnd.kde.kpresenter",ksp:"application/vnd.kde.kspread",kwd:"application/vnd.kde.kword",kwt:"application/vnd.kde.kword",htke:"application/vnd.kenameaapp",kia:"application/vnd.kidspiration",kne:"application/vnd.kinar",knp:"application/vnd.kinar",skp:"application/vnd.koan",skd:"application/vnd.koan",skt:"application/vnd.koan",skm:"application/vnd.koan",sse:"application/vnd.kodak-descriptor",lasxml:"application/vnd.las.las+xml",lbd:"application/vnd.llamagraphics.life-balance.desktop",lbe:"application/vnd.llamagraphics.life-balance.exchange+xml",apr:"application/vnd.lotus-approach",pre:"application/vnd.lotus-freelance",nsf:"application/vnd.lotus-notes",org:"application/vnd.lotus-organizer",scm:"application/vnd.lotus-screencam",lwp:"application/vnd.lotus-wordpro",portpkg:"application/vnd.macports.portpkg",mcd:"application/vnd.mcd",mc1:"application/vnd.medcalcdata",cdkey:"application/vnd.mediastation.cdkey",mwf:"application/vnd.mfer",mfm:"application/vnd.mfmp",flo:"application/vnd.micrografx.flo",igx:"application/vnd.micrografx.igx",mif:"application/vnd.mif",daf:"application/vnd.mobius.daf",dis:"application/vnd.mobius.dis",mbk:"application/vnd.mobius.mbk",mqy:"application/vnd.mobius.mqy",msl:"application/vnd.mobius.msl",plc:"application/vnd.mobius.plc",txf:"application/vnd.mobius.txf",mpn:"application/vnd.mophun.application",mpc:"application/vnd.mophun.certificate",xul:"application/vnd.mozilla.xul+xml",cil:"application/vnd.ms-artgalry",cab:"application/vnd.ms-cab-compressed",xls:"application/vnd.ms-excel",xlm:"application/vnd.ms-excel",xla:"application/vnd.ms-excel",xlc:"application/vnd.ms-excel",xlt:"application/vnd.ms-excel",xlw:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xltm:"application/vnd.ms-excel.template.macroenabled.12",eot:"application/vnd.ms-fontobject",chm:"application/vnd.ms-htmlhelp",ims:"application/vnd.ms-ims",lrm:"application/vnd.ms-lrm",thmx:"application/vnd.ms-officetheme",msg:"application/vnd.ms-outlook",cat:"application/vnd.ms-pki.seccat",stl:"model/stl",ppt:"application/vnd.ms-powerpoint",pps:"application/vnd.ms-powerpoint",pot:"application/vnd.ms-powerpoint",ppam:"application/vnd.ms-powerpoint.addin.macroenabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroenabled.12",sldm:"application/vnd.ms-powerpoint.slide.macroenabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroenabled.12",potm:"application/vnd.ms-powerpoint.template.macroenabled.12",mpp:"application/vnd.ms-project",mpt:"application/vnd.ms-project",docm:"application/vnd.ms-word.document.macroenabled.12",dotm:"application/vnd.ms-word.template.macroenabled.12",wps:"application/vnd.ms-works",wks:"application/vnd.ms-works",wcm:"application/vnd.ms-works",wdb:"application/vnd.ms-works",wpl:"application/vnd.ms-wpl",xps:"application/vnd.ms-xpsdocument",mseq:"application/vnd.mseq",mus:"application/vnd.musician",msty:"application/vnd.muvee.style",taglet:"application/vnd.mynfc",nlu:"application/vnd.neurolanguage.nlu",ntf:"application/vnd.nitf",nitf:"application/vnd.nitf",nnd:"application/vnd.noblenet-directory",nns:"application/vnd.noblenet-sealer",nnw:"application/vnd.noblenet-web",ngdat:"application/vnd.nokia.n-gage.data","n-gage":"application/vnd.nokia.n-gage.symbian.install",rpst:"application/vnd.nokia.radio-preset",rpss:"application/vnd.nokia.radio-presets",edm:"application/vnd.novadigm.edm",edx:"application/vnd.novadigm.edx",ext:"application/vnd.novadigm.ext",odc:"application/vnd.oasis.opendocument.chart",otc:"application/vnd.oasis.opendocument.chart-template",odb:"application/vnd.oasis.opendocument.database",odf:"application/vnd.oasis.opendocument.formula",odft:"application/vnd.oasis.opendocument.formula-template",odg:"application/vnd.oasis.opendocument.graphics",otg:"application/vnd.oasis.opendocument.graphics-template",odi:"application/vnd.oasis.opendocument.image",oti:"application/vnd.oasis.opendocument.image-template",odp:"application/vnd.oasis.opendocument.presentation",otp:"application/vnd.oasis.opendocument.presentation-template",ods:"application/vnd.oasis.opendocument.spreadsheet",ots:"application/vnd.oasis.opendocument.spreadsheet-template",odt:"application/vnd.oasis.opendocument.text",odm:"application/vnd.oasis.opendocument.text-master",ott:"application/vnd.oasis.opendocument.text-template",oth:"application/vnd.oasis.opendocument.text-web",xo:"application/vnd.olpc-sugar",dd2:"application/vnd.oma.dd2+xml",obgx:"application/vnd.openblox.game+xml",oxt:"application/vnd.openofficeorg.extension",osm:"application/vnd.openstreetmap.data+xml",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",sldx:"application/vnd.openxmlformats-officedocument.presentationml.slide",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",mgp:"application/vnd.osgeo.mapguide.package",dp:"application/vnd.osgi.dp",esa:"application/vnd.osgi.subsystem",pdb:"application/vnd.palm",pqa:"application/vnd.palm",oprc:"application/vnd.palm",paw:"application/vnd.pawaafile",str:"application/vnd.pg.format",ei6:"application/vnd.pg.osasli",efif:"application/vnd.picsel",wg:"application/vnd.pmi.widget",plf:"application/vnd.pocketlearn",pbd:"application/vnd.powerbuilder6",box:"application/vnd.previewsystems.box",mgz:"application/vnd.proteus.magazine",qps:"application/vnd.publishare-delta-tree",ptid:"application/vnd.pvi.ptid1",qxd:"application/vnd.quark.quarkxpress",qxt:"application/vnd.quark.quarkxpress",qwd:"application/vnd.quark.quarkxpress",qwt:"application/vnd.quark.quarkxpress",qxl:"application/vnd.quark.quarkxpress",qxb:"application/vnd.quark.quarkxpress",bed:"application/vnd.realvnc.bed",mxl:"application/vnd.recordare.musicxml",musicxml:"application/vnd.recordare.musicxml+xml",cryptonote:"application/vnd.rig.cryptonote",cod:"application/vnd.rim.cod",rm:"application/vnd.rn-realmedia",rmvb:"application/vnd.rn-realmedia-vbr",link66:"application/vnd.route66.link66+xml",st:"application/vnd.sailingtracker.track",see:"application/vnd.seemail",sema:"application/vnd.sema",semd:"application/vnd.semd",semf:"application/vnd.semf",ifm:"application/vnd.shana.informed.formdata",itp:"application/vnd.shana.informed.formtemplate",iif:"application/vnd.shana.informed.interchange",ipk:"application/vnd.shana.informed.package",twd:"application/vnd.simtech-mindmapper",twds:"application/vnd.simtech-mindmapper",mmf:"application/vnd.smaf",teacher:"application/vnd.smart.teacher",fo:"application/vnd.software602.filler.form+xml",sdkm:"application/vnd.solent.sdkm+xml",sdkd:"application/vnd.solent.sdkm+xml",dxp:"application/vnd.spotfire.dxp",sfs:"application/vnd.spotfire.sfs",sdc:"application/vnd.stardivision.calc",sda:"application/vnd.stardivision.draw",sdd:"application/vnd.stardivision.impress",smf:"application/vnd.stardivision.math",sdw:"application/vnd.stardivision.writer",vor:"application/vnd.stardivision.writer",sgl:"application/vnd.stardivision.writer-global",smzip:"application/vnd.stepmania.package",sm:"application/vnd.stepmania.stepchart",wadl:"application/vnd.sun.wadl+xml",sxc:"application/vnd.sun.xml.calc",stc:"application/vnd.sun.xml.calc.template",sxd:"application/vnd.sun.xml.draw",std:"application/vnd.sun.xml.draw.template",sxi:"application/vnd.sun.xml.impress",sti:"application/vnd.sun.xml.impress.template",sxm:"application/vnd.sun.xml.math",sxw:"application/vnd.sun.xml.writer",sxg:"application/vnd.sun.xml.writer.global",stw:"application/vnd.sun.xml.writer.template",sus:"application/vnd.sus-calendar",susp:"application/vnd.sus-calendar",svd:"application/vnd.svd",sis:"application/vnd.symbian.install",sisx:"application/vnd.symbian.install",xsm:"application/vnd.syncml+xml",bdm:"application/vnd.syncml.dm+wbxml",xdm:"application/vnd.syncml.dm+xml",ddf:"application/vnd.syncml.dmddf+xml",tao:"application/vnd.tao.intent-module-archive",pcap:"application/vnd.tcpdump.pcap",cap:"application/vnd.tcpdump.pcap",dmp:"application/vnd.tcpdump.pcap",tmo:"application/vnd.tmobile-livetv",tpt:"application/vnd.trid.tpt",mxs:"application/vnd.triscape.mxs",tra:"application/vnd.trueapp",ufd:"application/vnd.ufdl",ufdl:"application/vnd.ufdl",utz:"application/vnd.uiq.theme",umj:"application/vnd.umajin",unityweb:"application/vnd.unity",uoml:"application/vnd.uoml+xml",vcx:"application/vnd.vcx",vsd:"application/vnd.visio",vst:"application/vnd.visio",vss:"application/vnd.visio",vsw:"application/vnd.visio",vis:"application/vnd.visionary",vsf:"application/vnd.vsf",wbxml:"application/vnd.wap.wbxml",wmlc:"application/vnd.wap.wmlc",wmlsc:"application/vnd.wap.wmlscriptc",wtb:"application/vnd.webturbo",nbp:"application/vnd.wolfram.player",wpd:"application/vnd.wordperfect",wqd:"application/vnd.wqd",stf:"application/vnd.wt.stf",xar:"application/vnd.xara",xfdl:"application/vnd.xfdl",hvd:"application/vnd.yamaha.hv-dic",hvs:"application/vnd.yamaha.hv-script",hvp:"application/vnd.yamaha.hv-voice",osf:"application/vnd.yamaha.openscoreformat",osfpvg:"application/vnd.yamaha.openscoreformat.osfpvg+xml",saf:"application/vnd.yamaha.smaf-audio",spf:"application/vnd.yamaha.smaf-phrase",cmp:"application/vnd.yellowriver-custom-menu",zir:"application/vnd.zul",zirz:"application/vnd.zul",zaz:"application/vnd.zzazz.deck+xml",vxml:"application/voicexml+xml",wasm:"application/wasm",wgt:"application/widget",hlp:"application/winhlp",wsdl:"application/wsdl+xml",wspolicy:"application/wspolicy+xml","7z":"application/x-7z-compressed",abw:"application/x-abiword",ace:"application/x-ace-compressed",arj:"application/x-arj",aab:"application/x-authorware-bin",x32:"application/x-authorware-bin",u32:"application/x-authorware-bin",vox:"application/x-authorware-bin",aam:"application/x-authorware-map",aas:"application/x-authorware-seg",bcpio:"application/x-bcpio",torrent:"application/x-bittorrent",blb:"application/x-blorb",blorb:"application/x-blorb",bz:"application/x-bzip",bz2:"application/x-bzip2",boz:"application/x-bzip2",cbr:"application/x-cbr",cba:"application/x-cbr",cbt:"application/x-cbr",cbz:"application/x-cbr",cb7:"application/x-cbr",vcd:"application/x-cdlink",cfs:"application/x-cfs-compressed",chat:"application/x-chat",pgn:"application/x-chess-pgn",crx:"application/x-chrome-extension",cco:"application/x-cocoa",nsc:"application/x-conference",cpio:"application/x-cpio",csh:"application/x-csh",udeb:"application/x-debian-package",dgc:"application/x-dgc-compressed",dir:"application/x-director",dcr:"application/x-director",dxr:"application/x-director",cst:"application/x-director",cct:"application/x-director",cxt:"application/x-director",w3d:"application/x-director",fgd:"application/x-director",swa:"application/x-director",wad:"application/x-doom",ncx:"application/x-dtbncx+xml",dtb:"application/x-dtbook+xml",res:"application/x-dtbresource+xml",dvi:"application/x-dvi",evy:"application/x-envoy",eva:"application/x-eva",bdf:"application/x-font-bdf",gsf:"application/x-font-ghostscript",psf:"application/x-font-linux-psf",pcf:"application/x-font-pcf",snf:"application/x-font-snf",pfa:"application/x-font-type1",pfb:"application/x-font-type1",pfm:"application/x-font-type1",afm:"application/x-font-type1",arc:"application/x-freearc",spl:"application/x-futuresplash",gca:"application/x-gca-compressed",ulx:"application/x-glulx",gnumeric:"application/x-gnumeric",gramps:"application/x-gramps-xml",gtar:"application/x-gtar",hdf:"application/x-hdf",php:"application/x-httpd-php",install:"application/x-install-instructions",jardiff:"application/x-java-archive-diff",jnlp:"application/x-java-jnlp-file",kdbx:"application/x-keepass2",latex:"application/x-latex",luac:"application/x-lua-bytecode",lzh:"application/x-lzh-compressed",lha:"application/x-lzh-compressed",run:"application/x-makeself",mie:"application/x-mie",prc:"application/x-mobipocket-ebook",mobi:"application/x-mobipocket-ebook",application:"application/x-ms-application",lnk:"application/x-ms-shortcut",wmd:"application/x-ms-wmd",wmz:"application/x-ms-wmz",xbap:"application/x-ms-xbap",mdb:"application/x-msaccess",obd:"application/x-msbinder",crd:"application/x-mscardfile",clp:"application/x-msclip",com:"application/x-msdownload",bat:"application/x-msdownload",mvb:"application/x-msmediaview",m13:"application/x-msmediaview",m14:"application/x-msmediaview",wmf:"image/wmf",emf:"image/emf",emz:"application/x-msmetafile",mny:"application/x-msmoney",pub:"application/x-mspublisher",scd:"application/x-msschedule",trm:"application/x-msterminal",wri:"application/x-mswrite",nc:"application/x-netcdf",cdf:"application/x-netcdf",pac:"application/x-ns-proxy-autoconfig",nzb:"application/x-nzb",pl:"application/x-perl",pm:"application/x-perl",p12:"application/x-pkcs12",pfx:"application/x-pkcs12",p7b:"application/x-pkcs7-certificates",spc:"application/x-pkcs7-certificates",p7r:"application/x-pkcs7-certreqresp",rar:"application/x-rar-compressed",rpm:"application/x-redhat-package-manager",ris:"application/x-research-info-systems",sea:"application/x-sea",sh:"application/x-sh",shar:"application/x-shar",swf:"application/x-shockwave-flash",xap:"application/x-silverlight-app",sql:"application/x-sql",sit:"application/x-stuffit",sitx:"application/x-stuffitx",srt:"application/x-subrip",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",t3:"application/x-t3vm-image",gam:"application/x-tads",tar:"application/x-tar",tcl:"application/x-tcl",tk:"application/x-tcl",tex:"application/x-tex",tfm:"application/x-tex-tfm",texinfo:"application/x-texinfo",texi:"application/x-texinfo",obj:"model/obj",ustar:"application/x-ustar",hdd:"application/x-virtualbox-hdd",ova:"application/x-virtualbox-ova",ovf:"application/x-virtualbox-ovf",vbox:"application/x-virtualbox-vbox","vbox-extpack":"application/x-virtualbox-vbox-extpack",vdi:"application/x-virtualbox-vdi",vhd:"application/x-virtualbox-vhd",vmdk:"application/x-virtualbox-vmdk",src:"application/x-wais-source",webapp:"application/x-web-app-manifest+json",der:"application/x-x509-ca-cert",crt:"application/x-x509-ca-cert",pem:"application/x-x509-ca-cert",fig:"application/x-xfig",xlf:"application/xliff+xml",xpi:"application/x-xpinstall",xz:"application/x-xz",z1:"application/x-zmachine",z2:"application/x-zmachine",z3:"application/x-zmachine",z4:"application/x-zmachine",z5:"application/x-zmachine",z6:"application/x-zmachine",z7:"application/x-zmachine",z8:"application/x-zmachine",xaml:"application/xaml+xml",xav:"application/xcap-att+xml",xca:"application/xcap-caps+xml",xel:"application/xcap-el+xml",xns:"application/xcap-ns+xml",xenc:"application/xenc+xml",xhtml:"application/xhtml+xml",xht:"application/xhtml+xml",xml:"application/xml",xsl:"application/xml",xsd:"application/xml",rng:"application/xml",dtd:"application/xml-dtd",xop:"application/xop+xml",xpl:"application/xproc+xml",xslt:"application/xslt+xml",xspf:"application/xspf+xml",mxml:"application/xv+xml",xhvml:"application/xv+xml",xvml:"application/xv+xml",xvm:"application/xv+xml",yang:"application/yang",yin:"application/yin+xml",zip:"application/zip","3gpp":"video/3gpp",adp:"audio/adpcm",au:"audio/basic",snd:"audio/basic",mid:"audio/midi",midi:"audio/midi",kar:"audio/midi",rmi:"audio/midi",mxmf:"audio/mobile-xmf",mp3:"audio/mpeg",m4a:"audio/mp4",mp4a:"audio/mp4",mpga:"audio/mpeg",mp2:"audio/mpeg",mp2a:"audio/mpeg",m2a:"audio/mpeg",m3a:"audio/mpeg",oga:"audio/ogg",ogg:"audio/ogg",spx:"audio/ogg",s3m:"audio/s3m",sil:"audio/silk",uva:"audio/vnd.dece.audio",uvva:"audio/vnd.dece.audio",eol:"audio/vnd.digital-winds",dra:"audio/vnd.dra",dts:"audio/vnd.dts",dtshd:"audio/vnd.dts.hd",lvp:"audio/vnd.lucent.voice",pya:"audio/vnd.ms-playready.media.pya",ecelp4800:"audio/vnd.nuera.ecelp4800",ecelp7470:"audio/vnd.nuera.ecelp7470",ecelp9600:"audio/vnd.nuera.ecelp9600",rip:"audio/vnd.rip",wav:"audio/wave",weba:"audio/webm",aac:"audio/x-aac",aif:"audio/x-aiff",aiff:"audio/x-aiff",aifc:"audio/x-aiff",caf:"audio/x-caf",flac:"audio/x-flac",mka:"audio/x-matroska",m3u:"audio/x-mpegurl",wax:"audio/x-ms-wax",wma:"audio/x-ms-wma",ram:"audio/x-pn-realaudio",ra:"audio/x-pn-realaudio",rmp:"audio/x-pn-realaudio-plugin",xm:"audio/xm",cdx:"chemical/x-cdx",cif:"chemical/x-cif",cmdf:"chemical/x-cmdf",cml:"chemical/x-cml",csml:"chemical/x-csml",xyz:"chemical/x-xyz",ttc:"font/collection",otf:"font/otf",ttf:"font/ttf",woff:"font/woff",woff2:"font/woff2",exr:"image/aces",apng:"image/apng",bmp:"image/bmp",cgm:"image/cgm",drle:"image/dicom-rle",fits:"image/fits",g3:"image/g3fax",gif:"image/gif",heic:"image/heic",heics:"image/heic-sequence",heif:"image/heif",heifs:"image/heif-sequence",hej2:"image/hej2k",hsj2:"image/hsj2",ief:"image/ief",jls:"image/jls",jp2:"image/jp2",jpg2:"image/jp2",jpeg:"image/jpeg",jpg:"image/jpeg",jpe:"image/jpeg",jph:"image/jph",jhc:"image/jphc",jpm:"image/jpm",jpx:"image/jpx",jpf:"image/jpx",jxr:"image/jxr",jxra:"image/jxra",jxrs:"image/jxrs",jxs:"image/jxs",jxsc:"image/jxsc",jxsi:"image/jxsi",jxss:"image/jxss",ktx:"image/ktx",png:"image/png",btif:"image/prs.btif",pti:"image/prs.pti",sgi:"image/sgi",svg:"image/svg+xml",svgz:"image/svg+xml",t38:"image/t38",tif:"image/tiff",tiff:"image/tiff",tfx:"image/tiff-fx",psd:"image/vnd.adobe.photoshop",azv:"image/vnd.airzip.accelerator.azv",uvi:"image/vnd.dece.graphic",uvvi:"image/vnd.dece.graphic",uvg:"image/vnd.dece.graphic",uvvg:"image/vnd.dece.graphic",djvu:"image/vnd.djvu",djv:"image/vnd.djvu",sub:"text/vnd.dvb.subtitle",dwg:"image/vnd.dwg",dxf:"image/vnd.dxf",fbs:"image/vnd.fastbidsheet",fpx:"image/vnd.fpx",fst:"image/vnd.fst",mmr:"image/vnd.fujixerox.edmics-mmr",rlc:"image/vnd.fujixerox.edmics-rlc",ico:"image/vnd.microsoft.icon",dds:"image/vnd.ms-dds",mdi:"image/vnd.ms-modi",wdp:"image/vnd.ms-photo",npx:"image/vnd.net-fpx",tap:"image/vnd.tencent.tap",vtf:"image/vnd.valve.source.texture",wbmp:"image/vnd.wap.wbmp",xif:"image/vnd.xiff",pcx:"image/vnd.zbrush.pcx",webp:"image/webp","3ds":"image/x-3ds",ras:"image/x-cmu-raster",cmx:"image/x-cmx",fh:"image/x-freehand",fhc:"image/x-freehand",fh4:"image/x-freehand",fh5:"image/x-freehand",fh7:"image/x-freehand",jng:"image/x-jng",sid:"image/x-mrsid-image",pic:"image/x-pict",pct:"image/x-pict",pnm:"image/x-portable-anymap",pbm:"image/x-portable-bitmap",pgm:"image/x-portable-graymap",ppm:"image/x-portable-pixmap",rgb:"image/x-rgb",tga:"image/x-tga",xbm:"image/x-xbitmap",xpm:"image/x-xpixmap",xwd:"image/x-xwindowdump","disposition-notification":"message/disposition-notification",u8msg:"message/global",u8dsn:"message/global-delivery-status",u8mdn:"message/global-disposition-notification",u8hdr:"message/global-headers",eml:"message/rfc822",mime:"message/rfc822",wsc:"message/vnd.wfa.wsc","3mf":"model/3mf",gltf:"model/gltf+json",glb:"model/gltf-binary",igs:"model/iges",iges:"model/iges",msh:"model/mesh",mesh:"model/mesh",silo:"model/mesh",mtl:"model/mtl",dae:"model/vnd.collada+xml",dwf:"model/vnd.dwf",gdl:"model/vnd.gdl",gtw:"model/vnd.gtw",mts:"model/vnd.mts",ogex:"model/vnd.opengex",x_b:"model/vnd.parasolid.transmit.binary",x_t:"model/vnd.parasolid.transmit.text",usdz:"model/vnd.usdz+zip",bsp:"model/vnd.valve.source.compiled-map",vtu:"model/vnd.vtu",wrl:"model/vrml",vrml:"model/vrml",x3db:"model/x3d+fastinfoset",x3dbz:"model/x3d+binary",x3dv:"model/x3d-vrml",x3dvz:"model/x3d+vrml",x3d:"model/x3d+xml",x3dz:"model/x3d+xml",appcache:"text/cache-manifest",manifest:"text/cache-manifest",ics:"text/calendar",ifb:"text/calendar",coffee:"text/coffeescript",litcoffee:"text/coffeescript",css:"text/css",csv:"text/csv",html:"text/html",htm:"text/html",shtml:"text/html",jade:"text/jade",jsx:"text/jsx",less:"text/less",markdown:"text/markdown",md:"text/markdown",mml:"text/mathml",mdx:"text/mdx",n3:"text/n3",txt:"text/plain",text:"text/plain",conf:"text/plain",def:"text/plain",list:"text/plain",log:"text/plain",in:"text/plain",ini:"text/plain",dsc:"text/prs.lines.tag",rtx:"text/richtext",sgml:"text/sgml",sgm:"text/sgml",shex:"text/shex",slim:"text/slim",slm:"text/slim",stylus:"text/stylus",styl:"text/stylus",tsv:"text/tab-separated-values",t:"text/troff",tr:"text/troff",roff:"text/troff",man:"text/troff",me:"text/troff",ms:"text/troff",ttl:"text/turtle",uri:"text/uri-list",uris:"text/uri-list",urls:"text/uri-list",vcard:"text/vcard",curl:"text/vnd.curl",dcurl:"text/vnd.curl.dcurl",mcurl:"text/vnd.curl.mcurl",scurl:"text/vnd.curl.scurl",fly:"text/vnd.fly",flx:"text/vnd.fmi.flexstor",gv:"text/vnd.graphviz","3dml":"text/vnd.in3d.3dml",spot:"text/vnd.in3d.spot",jad:"text/vnd.sun.j2me.app-descriptor",wml:"text/vnd.wap.wml",wmls:"text/vnd.wap.wmlscript",vtt:"text/vtt",s:"text/x-asm",asm:"text/x-asm",c:"text/x-c",cc:"text/x-c",cxx:"text/x-c",cpp:"text/x-c",h:"text/x-c",hh:"text/x-c",dic:"text/x-c",htc:"text/x-component",f:"text/x-fortran",for:"text/x-fortran",f77:"text/x-fortran",f90:"text/x-fortran",hbs:"text/x-handlebars-template",java:"text/x-java-source",lua:"text/x-lua",mkd:"text/x-markdown",nfo:"text/x-nfo",opml:"text/x-opml",p:"text/x-pascal",pas:"text/x-pascal",pde:"text/x-processing",sass:"text/x-sass",scss:"text/x-scss",etx:"text/x-setext",sfv:"text/x-sfv",ymp:"text/x-suse-ymp",uu:"text/x-uuencode",vcs:"text/x-vcalendar",vcf:"text/x-vcard",yaml:"text/yaml",yml:"text/yaml","3gp":"video/3gpp","3g2":"video/3gpp2",h261:"video/h261",h263:"video/h263",h264:"video/h264",jpgv:"video/jpeg",jpgm:"video/jpm",mj2:"video/mj2",mjp2:"video/mj2",ts:"video/mp2t",mp4:"video/mp4",mp4v:"video/mp4",mpg4:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",mpe:"video/mpeg",m1v:"video/mpeg",m2v:"video/mpeg",ogv:"video/ogg",qt:"video/quicktime",mov:"video/quicktime",uvh:"video/vnd.dece.hd",uvvh:"video/vnd.dece.hd",uvm:"video/vnd.dece.mobile",uvvm:"video/vnd.dece.mobile",uvp:"video/vnd.dece.pd",uvvp:"video/vnd.dece.pd",uvs:"video/vnd.dece.sd",uvvs:"video/vnd.dece.sd",uvv:"video/vnd.dece.video",uvvv:"video/vnd.dece.video",dvb:"video/vnd.dvb.file",fvt:"video/vnd.fvt",mxu:"video/vnd.mpegurl",m4u:"video/vnd.mpegurl",pyv:"video/vnd.ms-playready.media.pyv",uvu:"video/vnd.uvvu.mp4",uvvu:"video/vnd.uvvu.mp4",viv:"video/vnd.vivo",webm:"video/webm",f4v:"video/x-f4v",fli:"video/x-fli",flv:"video/x-flv",m4v:"video/x-m4v",mkv:"video/x-matroska",mk3d:"video/x-matroska",mks:"video/x-matroska",mng:"video/x-mng",asf:"video/x-ms-asf",asx:"video/x-ms-asf",vob:"video/x-ms-vob",wm:"video/x-ms-wm",wmv:"video/x-ms-wmv",wmx:"video/x-ms-wmx",wvx:"video/x-ms-wvx",avi:"video/x-msvideo",movie:"video/x-sgi-movie",smv:"video/x-smv",ice:"x-conference/x-cooltalk"};function Se(e){const t=Rt("x."+e).toLowerCase().substr(1);if(!t)return null;const n=sr[t];return n||null}class ka extends Nt{constructor(){super(...arguments);this.EVENT_WATCH=J();this.clone=e=>{const{ctime:t,mime_type:n,mtime:r,path:a,type:i}=e;let{payload:o}=e;return o&&(o=o.slice()),{ctime:t,mime_type:n,mtime:r,payload:o,path:a,type:i}}}delete(e){if(this.has(e)){const t=this.get(e);return super.delete(e),this.EVENT_WATCH.dispatch({change:z.removed,path:t.path,type:t.type}),!0}return!1}put(e,t){const n={...t,path:e};return super.set(e,n),this.EVENT_WATCH.dispatch({change:z.created,path:n.path,type:n.type}),this}update(e,t){const n={...this.get(e),...t,path:e};return super.set(e,n),t.payload?this.EVENT_WATCH.dispatch({change:z.attached,path:n.path,type:n.type}):this.EVENT_WATCH.dispatch({change:z.updated,path:n.path,type:n.type}),this}}function Ia(e={}){const{compressed:t=!1}=e;return{...e,compressed:t}}class ot extends ae{constructor(e={}){super(Ia(e));this.storage=new ka}async create_url_object(e){const{storage:t}=this,{compressed:n}=this.options,r=this.normalize(e);if(!t.has(r))throw new Error("bad argument #0 to 'create_url_object' (Node must be created before using 'create_url_object')");const a=t.get(r);if(!a.payload)throw new Error("bad argument #0 to 'create_url_object' (Node payload must be created before using 'create_url_object')");const i=n?Ie(a.payload):a.payload,o=_e(i,a.mime_type);return{destroy:o.destroy,path:a.path,url:o.url}}async get(e){const{storage:t}=this,n=this.normalize(e);if(!t.has(n))return null;const r=t.get(n);return{ctime:r.ctime,mime_type:r.mime_type,mtime:r.mtime,path:r.path,type:r.type}}async put(e,t=M.undefined,n){const{storage:r}=this,a=this.normalize(e),i=ge();n||(n=Se(a)||ve),r.has(a)?r.update(a,{mime_type:n,mtime:i,type:t}):r.put(a,{ctime:i,mime_type:n,mtime:i,type:t})}async query(e={}){const t=Array.from(this.storage.entries()),n=t.map((r,a)=>{const i=r[0],{type:o=M.undefined}=r[1];return{path:i,type:o}});return qe(n,e)}async read(e){const{storage:t}=this,{compressed:n}=this.options,r=this.normalize(e);if(!t.has(r))return null;const a=t.get(r);return a.payload?n?Ie(a.payload):a.payload:null}async remove(e){const{storage:t}=this,n=this.normalize(e);return t.delete(n)}async watch(e={}){return ke(this.storage.EVENT_WATCH,e)}async write(e,t){const{storage:n}=this,{compressed:r}=this.options,a=this.normalize(e);if(!n.has(a))throw new Error("bad argument #0 to 'attach' (Node must be created before using 'attach')");n.update(a,{mtime:ge(),payload:r?Ke(t):t})}is_mounted(){return!0}async mount(){}async unmount(){}}ot.can_hotlink=!0,ot.can_watch=!0,ot.is_available=!0;var U=function(){return U=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},U.apply(this,arguments)};function sn(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),a=0,t=0;t<n;t++)for(var i=arguments[t],o=0,s=i.length;o<s;o++,a++)r[a]=i[o];return r}var Z=Object.keys,ne=Array.isArray,K=typeof self!="undefined"?self:typeof window!="undefined"?window:global;typeof Promise!="undefined"&&!K.Promise&&(K.Promise=Promise);function oe(e,t){return typeof t!="object"||Z(t).forEach(function(n){e[n]=t[n]}),e}var cr=Object.getPrototypeOf,Sa={}.hasOwnProperty;function ce(e,t){return Sa.call(e,t)}function st(e,t){typeof t=="function"&&(t=t(cr(e))),Z(t).forEach(function(n){ye(e,n,t[n])})}var lr=Object.defineProperty;function ye(e,t,n,r){lr(e,t,oe(n&&ce(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function He(e){return{from:function(t){return e.prototype=Object.create(t.prototype),ye(e.prototype,"constructor",e),{extend:st.bind(null,e.prototype)}}}}var Aa=Object.getOwnPropertyDescriptor;function pr(e,t){var n=Aa(e,t),r;return n||(r=cr(e))&&pr(r,t)}var Ta=[].slice;function Ct(e,t,n){return Ta.call(e,t,n)}function ur(e,t){return t(e)}function ct(e){if(!e)throw new Error("Assertion Failed")}function dr(e){K.setImmediate?setImmediate(e):setTimeout(e,0)}function fr(e,t){return e.reduce(function(n,r,a){var i=t(r,a);return i&&(n[i[0]]=i[1]),n},{})}function Oa(e,t,n){try{e.apply(null,n)}catch(r){t&&t(r)}}function be(e,t){if(ce(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,a=t.length;r<a;++r){var i=be(e,t[r]);n.push(i)}return n}var o=t.indexOf(".");if(o!==-1){var s=e[t.substr(0,o)];return s===void 0?void 0:be(s,t.substr(o+1))}return}function le(e,t,n){if(!e||t===void 0)return;if("isFrozen"in Object&&Object.isFrozen(e))return;if(typeof t!="string"&&"length"in t){ct(typeof n!="string"&&"length"in n);for(var r=0,a=t.length;r<a;++r)le(e,t[r],n[r])}else{var i=t.indexOf(".");if(i!==-1){var o=t.substr(0,i),s=t.substr(i+1);if(s==="")n===void 0?ne(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n;else{var l=e[o];l||(l=e[o]={}),le(l,s,n)}}else n===void 0?ne(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function Ra(e,t){typeof t=="string"?le(e,t,void 0):"length"in t&&[].map.call(t,function(n){le(e,n,void 0)})}function hr(e){var t={};for(var n in e)ce(e,n)&&(t[n]=e[n]);return t}var Na=[].concat;function mr(e){return Na.apply([],e)}var vr="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(mr([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return K[e]}),Ca=vr.map(function(e){return K[e]}),Ba=fr(vr,function(e){return[e,!0]});function Bt(e){if(!e||typeof e!="object")return e;var t;if(ne(e)){t=[];for(var n=0,r=e.length;n<r;++n)t.push(Bt(e[n]))}else if(Ca.indexOf(e.constructor)>=0)t=e;else{t=e.constructor?Object.create(e.constructor.prototype):{};for(var a in e)ce(e,a)&&(t[a]=Bt(e[a]))}return t}var Da={}.toString;function cn(e){return Da.call(e).slice(8,-1)}var ln=function(e,t){return t==="Array"?""+e.map(function(n){return ln(n,cn(n))}):t==="ArrayBuffer"?""+new Uint8Array(e):t==="Date"?e.getTime():ArrayBuffer.isView(e)?""+new Uint8Array(e.buffer):e};function pn(e,t,n,r){return n=n||{},r=r||"",Z(e).forEach(function(a){if(!ce(t,a))n[r+a]=void 0;else{var i=e[a],o=t[a];if(typeof i=="object"&&typeof o=="object"&&i&&o){var s=cn(i),l=cn(o);s===l?Ba[s]?ln(i,s)!==ln(o,l)&&(n[r+a]=t[a]):pn(i,o,n,r+a+"."):n[r+a]=t[a]}else i!==o&&(n[r+a]=t[a])}}),Z(t).forEach(function(a){ce(e,a)||(n[r+a]=t[a])}),n}var gr=typeof Symbol!="undefined"&&Symbol.iterator,ja=gr?function(e){var t;return e!=null&&(t=e[gr])&&t.apply(e)}:function(){return null},Ve={};function we(e){var t,n,r,a;if(arguments.length===1){if(ne(e))return e.slice();if(this===Ve&&typeof e=="string")return[e];if(a=ja(e)){for(n=[];r=a.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var yr=typeof Symbol!="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},de=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function wr(e,t){de=e,br=t}var br=function(){return!0},Ma=!new Error("").stack;function Je(){if(Ma)try{throw new Error}catch(e){return e}return new Error}function un(e,t){var n=e.stack;return n?(t=t||0,n.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),n.split(`
`).slice(t).filter(br).map(function(r){return`
`+r}).join("")):""}var Pa=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],xr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],dn=Pa.concat(xr),Wa={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function Ge(e,t){this._e=Je(),this.name=e,this.message=t}He(Ge).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+un(this._e,2))}},toString:function(){return this.name+": "+this.message}});function Er(e,t){return e+". Errors: "+Object.keys(t).map(function(n){return t[n].toString()}).filter(function(n,r,a){return a.indexOf(n)===r}).join(`
`)}function Dt(e,t,n,r){this._e=Je(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=Er(e,t)}He(Dt).from(Ge);function lt(e,t){this._e=Je(),this.name="BulkError",this.failures=t,this.message=Er(e,t)}He(lt).from(Ge);var za=dn.reduce(function(e,t){return e[t]=t+"Error",e},{}),Fa=Ge,N=dn.reduce(function(e,t){var n=t+"Error";function r(a,i){this._e=Je(),this.name=n,a?typeof a=="string"?(this.message=""+a+(i?`
 `+i:""),this.inner=i||null):typeof a=="object"&&(this.message=a.name+" "+a.message,this.inner=a):(this.message=Wa[t]||n,this.inner=null)}return He(r).from(Fa),e[t]=r,e},{});N.Syntax=SyntaxError;N.Type=TypeError;N.Range=RangeError;var _r=xr.reduce(function(e,t){return e[t+"Error"]=N[t],e},{});function Ua(e,t){if(!e||e instanceof Ge||e instanceof TypeError||e instanceof SyntaxError||!e.name||!_r[e.name])return e;var n=new _r[e.name](t||e.message,e);return"stack"in e&&ye(n,"stack",{get:function(){return this.inner.stack}}),n}var jt=dn.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=N[t]),e},{});jt.ModifyError=Dt;jt.DexieError=Ge;jt.BulkError=lt;function q(){}function pt(e){return e}function qa(e,t){return e==null||e===pt?t:function(n){return t(e(n))}}function Be(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Ka(e,t){return e===q?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Be(r,this.onsuccess):r),a&&(this.onerror=this.onerror?Be(a,this.onerror):a),i!==void 0?i:n}}function Ha(e,t){return e===q?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Be(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Be(r,this.onerror):r)}}function Va(e,t){return e===q?t:function(n){var r=e.apply(this,arguments);oe(n,r);var a=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?Be(a,this.onsuccess):a),i&&(this.onerror=this.onerror?Be(i,this.onerror):i),r===void 0?o===void 0?void 0:o:oe(r,o)}}function Ja(e,t){return e===q?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function kr(e,t){return e===q?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,a=arguments.length,i=new Array(a);a--;)i[a]=arguments[a];return n.then(function(){return t.apply(r,i)})}return t.apply(this,arguments)}}var ut={},Ga=100,Qa=20,Ir=100,fn=typeof Promise=="undefined"?[]:function(){var e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,e.__proto__,e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,t.__proto__,e]}(),hn=fn[0],Mt=fn[1],mn=fn[2],Sr=Mt&&Mt.then,Pt=hn&&hn.constructor,vn=!!mn,gn=!1,Ya=mn?function(){mn.then(Wt)}:K.setImmediate?setImmediate.bind(null,Wt):K.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){Wt(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(Wt,0)},ft=function(e,t){dt.push([e,t]),zt&&(Ya(),zt=!1)},yn=!0,zt=!0,De=[],Ft=[],bn=null,wn=pt,Qe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ar,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{Ar(e[0],e[1])}catch(t){}})}},R=Qe,dt=[],je=0,Ut=[];function k(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=q,this._lib=!1;var t=this._PSD=R;if(de&&(this._stackHolder=Je(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==ut)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&xn(this,this._value);return}this._state=null,this._value=null,++t.ref,Tr(this,e)}var En={get:function(){var e=R,t=kn;function n(r,a){var i=this,o=!e.global&&(e!==R||t!==kn);o&&Ye();var s=new k(function(l,c){_n(i,new Or(qt(r,e,o),qt(a,e,o),l,c,e))});return de&&Rr(s,this),s}return n.prototype=ut,n},set:function(e){ye(this,"then",e&&e.prototype===ut?En:{get:function(){return e},set:En.set})}};st(k.prototype,{then:En,_then:function(e,t){_n(this,new Or(null,null,e,t,R))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(r){return r instanceof t?n(r):Kt(r)}):this.then(null,function(r){return r&&r.name===t?n(r):Kt(r)})},finally:function(e){return this.then(function(t){return e(),t},function(t){return e(),Kt(t)})},stack:{get:function(){if(this._stack)return this._stack;try{gn=!0;var e=Nr(this,[],Qa),t=e.join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{gn=!1}}},timeout:function(e,t){var n=this;return e<Infinity?new k(function(r,a){var i=setTimeout(function(){return a(new N.Timeout(t))},e);n.then(r,a).finally(clearTimeout.bind(null,i))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&ye(k.prototype,Symbol.toStringTag,"Dexie.Promise");Qe.env=Cr();function Or(e,t,n,r,a){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=a}st(k,{all:function(){var e=we.apply(null,arguments).map(Ht);return new k(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(a,i){return k.resolve(a).then(function(o){e[i]=o,--r||t(e)},n)})})},resolve:function(e){if(e instanceof k)return e;if(e&&typeof e.then=="function")return new k(function(n,r){e.then(n,r)});var t=new k(ut,!0,e);return Rr(t,bn),t},reject:Kt,race:function(){var e=we.apply(null,arguments).map(Ht);return new k(function(t,n){e.map(function(r){return k.resolve(r).then(t,n)})})},PSD:{get:function(){return R},set:function(e){return R=e}},newPSD:Me,usePSD:ht,scheduler:{get:function(){return ft},set:function(e){ft=e}},rejectionMapper:{get:function(){return wn},set:function(e){wn=e}},follow:function(e,t){return new k(function(n,r){return Me(function(a,i){var o=R;o.unhandleds=[],o.onunhandled=i,o.finalize=Be(function(){var s=this;$a(function(){s.unhandleds.length===0?a():i(s.unhandleds[0])})},o.finalize),e()},t,n,r)})}});Pt&&(Pt.allSettled&&ye(k,"allSettled",function(){var e=we.apply(null,arguments).map(Ht);return new k(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(a,i){return k.resolve(a).then(function(o){return r[i]={status:"fulfilled",value:o}},function(o){return r[i]={status:"rejected",reason:o}}).then(function(){return--n||t(r)})})})}),Pt.any&&typeof AggregateError!="undefined"&&ye(k,"any",function(){var e=we.apply(null,arguments).map(Ht);return new k(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,a=new Array(r);e.forEach(function(i,o){return k.resolve(i).then(function(s){return t(s)},function(s){a[o]=s,--r||n(new AggregateError(a))})})})}));function Tr(e,t){try{t(function(n){if(e._state!==null)return;if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&mt();n&&typeof n.then=="function"?Tr(e,function(a,i){n instanceof k?n._then(a,i):n.then(a,i)}):(e._state=!0,e._value=n,Br(e)),r&&vt()},xn.bind(null,e))}catch(n){xn(e,n)}}function xn(e,t){if(Ft.push(t),e._state!==null)return;var n=e._lib&&mt();t=wn(t),e._state=!1,e._value=t,de&&t!==null&&typeof t=="object"&&!t._promise&&Oa(function(){var r=pr(t,"stack");t._promise=e,ye(t,"stack",{get:function(){return gn?r&&(r.get?r.get.apply(t):r.value):e.stack}})}),Xa(e),Br(e),n&&vt()}function Br(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)_n(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),je===0&&(++je,ft(function(){--je===0&&In()},[]))}function _n(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++je,ft(La,[n,e,t])}function La(e,t,n){try{bn=t;var r,a=t._value;t._state?r=e(a):(Ft.length&&(Ft=[]),r=e(a),Ft.indexOf(a)===-1&&Za(t)),n.resolve(r)}catch(i){n.reject(i)}finally{bn=null,--je===0&&In(),--n.psd.ref||n.psd.finalize()}}function Nr(e,t,n){if(t.length===n)return t;var r="";if(e._state===!1){var a=e._value,i,o;a!=null?(i=a.name||"Error",o=a.message||a,r=un(a,0)):(i=a,o=""),t.push(i+(o?": "+o:"")+r)}return de&&(r=un(e._stackHolder,2),r&&t.indexOf(r)===-1&&t.push(r),e._prev&&Nr(e._prev,t,n)),t}function Rr(e,t){var n=t?t._numPrev+1:0;n<Ga&&(e._prev=t,e._numPrev=n)}function Wt(){mt()&&vt()}function mt(){var e=yn;return yn=!1,zt=!1,e}function vt(){var e,t,n;do for(;dt.length>0;)for(e=dt,dt=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(dt.length>0);yn=!0,zt=!0}function In(){var e=De;De=[],e.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var t=Ut.slice(0),n=t.length;n;)t[--n]()}function $a(e){function t(){e(),Ut.splice(Ut.indexOf(t),1)}Ut.push(t),++je,ft(function(){--je===0&&In()},[])}function Xa(e){De.some(function(t){return t._value===e._value})||De.push(e)}function Za(e){for(var t=De.length;t;)if(De[--t]._value===e._value){De.splice(t,1);return}}function Kt(e){return new k(ut,!1,e)}function V(e,t){var n=R;return function(){var r=mt(),a=R;try{return Ae(n,!0),e.apply(this,arguments)}catch(i){t&&t(i)}finally{Ae(a,!1),r&&vt()}}}var ee={awaits:0,echoes:0,id:0},ei=0,Vt=[],Sn=0,kn=0,ti=0;function Me(e,t,n,r){var a=R,i=Object.create(a);i.parent=a,i.ref=0,i.global=!1,i.id=++ti;var o=Qe.env;i.env=vn?{Promise:k,PromiseProp:{value:k,configurable:!0,writable:!0},all:k.all,race:k.race,allSettled:k.allSettled,any:k.any,resolve:k.resolve,reject:k.reject,nthen:Dr(o.nthen,i),gthen:Dr(o.gthen,i)}:{},t&&oe(i,t),++a.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=ht(i,e,n,r);return i.ref===0&&i.finalize(),s}function gt(){return ee.id||(ee.id=++ei),++ee.awaits,ee.echoes+=Ir,ee.id}function Ye(e){if(!ee.awaits||e&&e!==ee.id)return;--ee.awaits===0&&(ee.id=0),ee.echoes=ee.awaits*Ir}(""+Sr).indexOf("[native code]")===-1&&(gt=Ye=q);function Ht(e){return ee.echoes&&e&&e.constructor===Pt?(gt(),e.then(function(t){return Ye(),t},function(t){return Ye(),te(t)})):e}function ni(e){++kn,(!ee.echoes||--ee.echoes===0)&&(ee.echoes=ee.id=0),Vt.push(R),Ae(e,!0)}function ri(){var e=Vt[Vt.length-1];Vt.pop(),Ae(e,!1)}function Ae(e,t){var n=R;if((t?ee.echoes&&(!Sn++||e!==R):Sn&&(!--Sn||e!==R))&&ai(t?ni.bind(null,e):ri),e===R)return;if(R=e,n===Qe&&(Qe.env=Cr()),vn){var r=Qe.env.Promise,a=e.env;Mt.then=a.nthen,r.prototype.then=a.gthen,(n.global||e.global)&&(Object.defineProperty(K,"Promise",a.PromiseProp),r.all=a.all,r.race=a.race,r.resolve=a.resolve,r.reject=a.reject,a.allSettled&&(r.allSettled=a.allSettled),a.any&&(r.any=a.any))}}function Cr(){var e=K.Promise;return vn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(K,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Mt.then,gthen:e.prototype.then}:{}}function ht(e,t,n,r,a){var i=R;try{return Ae(e,!0),t(n,r,a)}finally{Ae(i,!1)}}function ai(e){Sr.call(hn,e)}function qt(e,t,n){return typeof e!="function"?e:function(){var r=R;n&&gt(),Ae(t,!0);try{return e.apply(this,arguments)}finally{Ae(r,!1)}}}function Dr(e,t){return function(n,r){return e.call(this,qt(n,t,!1),qt(r,t,!1))}}var jr="unhandledrejection";function Ar(e,t){var n;try{n=t.onuncatched(e)}catch(i){}if(n!==!1)try{var r,a={promise:t,reason:e};if(K.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(jr,!0,!0),oe(r,a)):K.CustomEvent&&(r=new CustomEvent(jr,{detail:a}),oe(r,a)),r&&K.dispatchEvent&&(dispatchEvent(r),!K.PromiseRejectionEvent&&K.onunhandledrejection))try{K.onunhandledrejection(r)}catch(i){}de&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(e.stack||e))}catch(i){}}var te=k.reject;function Mr(e,t,n,r){if(!e._state.openComplete&&!R.letThrough){if(!e._state.isBeingOpened){if(!e._options.autoOpen)return te(new N.DatabaseClosed);e.open().catch(q)}return e._state.dbReadyPromise.then(function(){return Mr(e,t,n,r)})}else{var a=e._createTransaction(t,n,e._dbSchema);try{a.create()}catch(i){return te(i)}return a._promise(t,function(i,o){return Me(function(){return R.trans=a,r(i,o,a)})}).then(function(i){return a._completion.then(function(){return i})})}}var Pr="3.0.2",$e=String.fromCharCode(65535),An=-Infinity,Te="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Wr="String expected.",yt=[],Tn=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),ii=Tn,oi=Tn,zr=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)},Jt="__dbnames",On="readonly",Rn="readwrite";function Pe(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Fr={type:3,lower:-Infinity,lowerOpen:!1,upper:[[]],upperOpen:!1},si=function(){function e(){}return e.prototype._trans=function(t,n,r){var a=this._tx||R.trans,i=this.name;function o(l,c,u){if(!u.schema[i])throw new N.NotFound("Table "+i+" not part of transaction");return n(u.idbtrans,u)}var s=mt();try{return a&&a.db===this.db?a===R.trans?a._promise(t,o,r):Me(function(){return a._promise(t,o,r)},{trans:a,transless:R.transless||R}):Mr(this.db,t,[this.name],o)}finally{s&&vt()}},e.prototype.get=function(t,n){var r=this;return t&&t.constructor===Object?this.where(t).first(n):this._trans("readonly",function(a){return r.core.get({trans:a,key:t}).then(function(i){return r.hook.reading.fire(i)})}).then(n)},e.prototype.where=function(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(ne(t))return new this.db.WhereClause(this,"["+t.join("+")+"]");var n=Z(t);if(n.length===1)return this.where(n[0]).equals(t[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(u){return u.compound&&n.every(function(p){return u.keyPath.indexOf(p)>=0})&&u.keyPath.every(function(p){return n.indexOf(p)>=0})})[0];if(r&&this.db._maxKey!==$e)return this.where(r.name).equals(r.keyPath.map(function(u){return t[u]}));!r&&de&&console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var a=this.schema.idxByName,i=this.db._deps.indexedDB;function o(u,p){try{return i.cmp(u,p)===0}catch(d){return!1}}var s=n.reduce(function(u,p){var d=u[0],m=u[1],h=a[p],f=t[p];return[d||h,d||!h?Pe(m,h&&h.multi?function(g){var x=be(g,p);return ne(x)&&x.some(function(w){return o(f,w)})}:function(g){return o(f,be(g,p))}):m]},[null,null]),l=s[0],c=s[1];return l?this.where(l.name).equals(t[l.keyPath]).filter(c):r?this.filter(c):this.where(n).equals("")},e.prototype.filter=function(t){return this.toCollection().and(t)},e.prototype.count=function(t){return this.toCollection().count(t)},e.prototype.offset=function(t){return this.toCollection().offset(t)},e.prototype.limit=function(t){return this.toCollection().limit(t)},e.prototype.each=function(t){return this.toCollection().each(t)},e.prototype.toArray=function(t){return this.toCollection().toArray(t)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(t){return new this.db.Collection(new this.db.WhereClause(this,ne(t)?"["+t.join("+")+"]":t))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(t){this.schema.mappedClass=t;var n=function(r){if(!r)return r;var a=Object.create(t.prototype);for(var i in r)if(ce(r,i))try{a[i]=r[i]}catch(o){}return a};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),t},e.prototype.defineClass=function(){function t(n){oe(this,n)}return this.mapToClass(t)},e.prototype.add=function(t,n){var r=this;return this._trans("readwrite",function(a){return r.core.mutate({trans:a,type:"add",keys:n!=null?[n]:null,values:[t]})}).then(function(a){return a.numFailures?k.reject(a.failures[0]):a.lastResult}).then(function(a){if(!r.core.schema.primaryKey.outbound)try{le(t,r.core.schema.primaryKey.keyPath,a)}catch(i){}return a})},e.prototype.update=function(t,n){if(typeof n!="object"||ne(n))throw new N.InvalidArgument("Modifications must be an object.");if(typeof t=="object"&&!ne(t)){Z(n).forEach(function(a){le(t,a,n[a])});var r=be(t,this.schema.primKey.keyPath);return r===void 0?te(new N.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(t).modify(n)},e.prototype.put=function(t,n){var r=this;return this._trans("readwrite",function(a){return r.core.mutate({trans:a,type:"put",values:[t],keys:n!=null?[n]:null})}).then(function(a){return a.numFailures?k.reject(a.failures[0]):a.lastResult}).then(function(a){if(!r.core.schema.primaryKey.outbound)try{le(t,r.core.schema.primaryKey.keyPath,a)}catch(i){}return a})},e.prototype.delete=function(t){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[t]})}).then(function(r){return r.numFailures?k.reject(r.failures[0]):void 0})},e.prototype.clear=function(){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"deleteRange",range:Fr})}).then(function(n){return n.numFailures?k.reject(n.failures[0]):void 0})},e.prototype.bulkGet=function(t){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:t,trans:r}).then(function(a){return a.map(function(i){return n.hook.reading.fire(i)})})})},e.prototype.bulkAdd=function(t,n,r){var a=this,i=Array.isArray(n)?n:void 0;r=r||(i?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var l=a.core.schema.primaryKey.outbound;if(!l&&i)throw new N.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new N.InvalidArgument("Arguments objects and keys must have the same length");var c=t.length;return a.core.mutate({trans:s,type:"add",keys:i,values:t,wantResults:o}).then(function(u){var p=u.numFailures,d=u.results,m=u.lastResult,h=u.failures,f=o?d:m;if(p===0)return f;throw new lt(a.name+".bulkAdd(): "+p+" of "+c+" operations failed",Object.keys(h).map(function(g){return h[g]}))})})},e.prototype.bulkPut=function(t,n,r){var a=this,i=Array.isArray(n)?n:void 0;r=r||(i?void 0:n);var o=r?r.allKeys:void 0;return this._trans("readwrite",function(s){var l=a.core.schema.primaryKey.outbound;if(!l&&i)throw new N.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==t.length)throw new N.InvalidArgument("Arguments objects and keys must have the same length");var c=t.length;return a.core.mutate({trans:s,type:"put",keys:i,values:t,wantResults:o}).then(function(u){var p=u.numFailures,d=u.results,m=u.lastResult,h=u.failures,f=o?d:m;if(p===0)return f;throw new lt(a.name+".bulkPut(): "+p+" of "+c+" operations failed",Object.keys(h).map(function(g){return h[g]}))})})},e.prototype.bulkDelete=function(t){var n=this,r=t.length;return this._trans("readwrite",function(a){return n.core.mutate({trans:a,type:"delete",keys:t})}).then(function(a){var i=a.numFailures,o=a.lastResult,s=a.failures;if(i===0)return o;throw new lt(n.name+".bulkDelete(): "+i+" of "+r+" operations failed",s)})},e}();function Gt(e){var t={},n=function(s,l){if(l){for(var c=arguments.length,u=new Array(c-1);--c;)u[c-1]=arguments[c];return t[s].subscribe.apply(null,u),e}else if(typeof s=="string")return t[s]};n.addEventType=i;for(var r=1,a=arguments.length;r<a;++r)i(arguments[r]);return n;function i(s,l,c){if(typeof s=="object")return o(s);l||(l=Ja),c||(c=q);var u={subscribers:[],fire:c,subscribe:function(p){u.subscribers.indexOf(p)===-1&&(u.subscribers.push(p),u.fire=l(u.fire,p))},unsubscribe:function(p){u.subscribers=u.subscribers.filter(function(d){return d!==p}),u.fire=u.subscribers.reduce(l,c)}};return t[s]=n[s]=u,u}function o(s){Z(s).forEach(function(l){var c=s[l];if(ne(c))i(l,s[l][0],s[l][1]);else if(c==="asap")var u=i(l,pt,function(){for(var d=arguments.length,m=new Array(d);d--;)m[d]=arguments[d];u.subscribers.forEach(function(h){dr(function(){h.apply(null,m)})})});else throw new N.InvalidArgument("Invalid event config")})}}function bt(e,t){return He(t).from({prototype:e}),t}function ci(e){return bt(si.prototype,function(n,r,a){this.db=e,this._tx=a,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Gt(null,{creating:[Ka,q],reading:[qa,pt],updating:[Va,q],deleting:[Ha,q]})})}function wt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Nn(e,t){e.filter=Pe(e.filter,t)}function Cn(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Pe(r(),t())}:t,e.justLimit=n&&!r}function li(e,t){e.isMatch=Pe(e.isMatch,t)}function Qt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new N.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Ur(e,t,n){var r=Qt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function Yt(e,t,n,r){var a=e.replayFilter?Pe(e.filter,e.replayFilter()):e.filter;if(e.or){var i={},o=function(s,l,c){if(!a||a(l,c,function(d){return l.stop(d)},function(d){return l.fail(d)})){var u=l.primaryKey,p=""+u;p==="[object ArrayBuffer]"&&(p=""+new Uint8Array(u)),ce(i,p)||(i[p]=!0,t(s,l,c))}};return Promise.all([e.or._iterate(o,n),qr(Ur(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}else return qr(Ur(e,r,n),Pe(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function qr(e,t,n,r){var a=r?function(o,s,l){return n(r(o),s,l)}:n,i=V(a);return e.then(function(o){if(o)return o.start(function(){var s=function(){return o.continue()};(!t||t(o,function(l){return s=l},function(l){o.stop(l),s=q},function(l){o.fail(l),s=q}))&&i(o.value,o,function(l){return s=l}),s()})})}var pi=function(){function e(){}return e.prototype._read=function(t,n){var r=this._ctx;return r.error?r.table._trans(null,te.bind(null,r.error)):r.table._trans("readonly",t).then(n)},e.prototype._write=function(t){var n=this._ctx;return n.error?n.table._trans(null,te.bind(null,n.error)):n.table._trans("readwrite",t,"locked")},e.prototype._addAlgorithm=function(t){var n=this._ctx;n.algorithm=Pe(n.algorithm,t)},e.prototype._iterate=function(t,n){return Yt(this._ctx,t,n,this._ctx.table.core)},e.prototype.clone=function(t){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return t&&oe(r,t),n._ctx=r,n},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(t){var n=this._ctx;return this._read(function(r){return Yt(n,t,r,n.table.core)})},e.prototype.count=function(t){var n=this;return this._read(function(r){var a=n._ctx,i=a.table.core;if(wt(a,!0))return i.count({trans:r,query:{index:Qt(a,i.schema),range:a.range}}).then(function(s){return Math.min(s,a.limit)});var o=0;return Yt(a,function(){return++o,!1},r,i).then(function(){return o})}).then(t)},e.prototype.sortBy=function(t,n){var r=t.split(".").reverse(),a=r[0],i=r.length-1;function o(c,u){return u?o(c[r[u]],u-1):c[a]}var s=this._ctx.dir==="next"?1:-1;function l(c,u){var p=o(c,i),d=o(u,i);return p<d?-s:p>d?s:0}return this.toArray(function(c){return c.sort(l)}).then(n)},e.prototype.toArray=function(t){var n=this;return this._read(function(r){var a=n._ctx;if(a.dir==="next"&&wt(a,!0)&&a.limit>0){var i=a.valueMapper,o=Qt(a,a.table.core.schema);return a.table.core.query({trans:r,limit:a.limit,values:!0,query:{index:o,range:a.range}}).then(function(l){var c=l.result;return i?c.map(i):c})}else{var s=[];return Yt(a,function(l){return s.push(l)},r,a.table.core).then(function(){return s})}},t)},e.prototype.offset=function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,wt(n)?Cn(n,function(){var r=t;return function(a,i){return r===0?!0:r===1?(--r,!1):(i(function(){a.advance(r),r=0}),!1)}}):Cn(n,function(){var r=t;return function(){return--r<0}}),this)},e.prototype.limit=function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),Cn(this._ctx,function(){var n=t;return function(r,a,i){return--n<=0&&a(i),n>=0}},!0),this},e.prototype.until=function(t,n){return Nn(this._ctx,function(r,a,i){return t(r.value)?(a(i),n):!0}),this},e.prototype.first=function(t){return this.limit(1).toArray(function(n){return n[0]}).then(t)},e.prototype.last=function(t){return this.reverse().first(t)},e.prototype.filter=function(t){return Nn(this._ctx,function(n){return t(n.value)}),li(this._ctx,t),this},e.prototype.and=function(t){return this.filter(t)},e.prototype.or=function(t){return new this.db.WhereClause(this._ctx.table,t,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,a){t(a.key,a)})},e.prototype.eachUniqueKey=function(t){return this._ctx.unique="unique",this.eachKey(t)},e.prototype.eachPrimaryKey=function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,a){t(a.primaryKey,a)})},e.prototype.keys=function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(a,i){r.push(i.key)}).then(function(){return r}).then(t)},e.prototype.primaryKeys=function(t){var n=this._ctx;if(n.dir==="next"&&wt(n,!0)&&n.limit>0)return this._read(function(a){var i=Qt(n,n.table.core.schema);return n.table.core.query({trans:a,values:!1,limit:n.limit,query:{index:i,range:n.range}})}).then(function(a){var i=a.result;return i}).then(t);n.keysOnly=!n.isMatch;var r=[];return this.each(function(a,i){r.push(i.primaryKey)}).then(function(){return r}).then(t)},e.prototype.uniqueKeys=function(t){return this._ctx.unique="unique",this.keys(t)},e.prototype.firstKey=function(t){return this.limit(1).keys(function(n){return n[0]}).then(t)},e.prototype.lastKey=function(t){return this.reverse().firstKey(t)},e.prototype.distinct=function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return Nn(this._ctx,function(a){var i=a.primaryKey.toString(),o=ce(r,i);return r[i]=!0,!o}),this},e.prototype.modify=function(t){var n=this,r=this._ctx;return this._write(function(a){var i;if(typeof t=="function")i=t;else{var o=Z(t),s=o.length;i=function(w){for(var y=!1,b=0;b<s;++b){var v=o[b],I=t[v];be(w,v)!==I&&(le(w,v,I),y=!0)}return y}}var l=r.table.core,c=l.schema.primaryKey,u=c.outbound,p=c.extractKey,d="testmode"in xt?1:2e3,m=n.db.core.cmp,h=[],f=0,g=[],x=function(w,y){var b=y.failures,v=y.numFailures;f+=w-v;for(var I=0,A=Z(b);I<A.length;I++){var S=A[I];h.push(b[S])}};return n.clone().primaryKeys().then(function(w){var y=function(b){var v=Math.min(d,w.length-b);return l.getMany({trans:a,keys:w.slice(b,b+v)}).then(function(I){for(var A=[],S=[],_=u?[]:null,T=[],O=0;O<v;++O){var F=I[O],C={value:Bt(F),primKey:w[b+O]};i.call(C,C.value,C)!==!1&&(C.value==null?T.push(w[b+O]):!u&&m(p(F),p(C.value))!==0?(T.push(w[b+O]),A.push(C.value)):(S.push(C.value),u&&_.push(w[b+O])))}return Promise.resolve(A.length>0&&l.mutate({trans:a,type:"add",values:A}).then(function(H){for(var P in H.failures)T.splice(parseInt(P),1);x(A.length,H)})).then(function(H){return S.length>0&&l.mutate({trans:a,type:"put",keys:_,values:S}).then(function(P){return x(S.length,P)})}).then(function(){return T.length>0&&l.mutate({trans:a,type:"delete",keys:T}).then(function(H){return x(T.length,H)})}).then(function(){return w.length>b+v&&y(b+d)})})};return y(0).then(function(){if(h.length>0)throw new Dt("Error modifying one or more objects",h,f,g);return w.length})})})},e.prototype.delete=function(){var t=this._ctx,n=t.range;return wt(t)&&(t.isPrimKey&&!oi||n.type===3)?this._write(function(r){var a=t.table.core.schema.primaryKey,i=n;return t.table.core.count({trans:r,query:{index:a,range:i}}).then(function(o){return t.table.core.mutate({trans:r,type:"deleteRange",range:i}).then(function(s){var l=s.failures,c=s.lastResult,u=s.results,p=s.numFailures;if(p)throw new Dt("Could not delete some values",Object.keys(l).map(function(d){return l[d]}),o-p);return o-p})})}):this.modify(function(r,a){return a.value=null})},e}();function ui(e){return bt(pi.prototype,function(n,r){this.db=e;var a=Fr,i=null;if(r)try{a=r()}catch(c){i=c}var o=n._ctx,s=o.table,l=s.hook.reading.fire;this._ctx={table:s,index:o.index,isPrimKey:!o.index||s.schema.primKey.keyPath&&o.index===s.schema.primKey.name,range:a,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:i,or:o.or,valueMapper:l!==pt?l:null}})}function di(e,t){return e<t?-1:e===t?0:1}function fi(e,t){return e>t?-1:e===t?0:1}function se(e,t,n){var r=e instanceof Kr?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function Xe(e){return new e.Collection(e,function(){return Hr("")}).limit(0)}function hi(e){return e==="next"?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function mi(e){return e==="next"?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function vi(e,t,n,r,a,i){for(var o=Math.min(e.length,r.length),s=-1,l=0;l<o;++l){var c=t[l];if(c!==r[l])return a(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):a(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;a(e[l],c)<0&&(s=l)}return o<r.length&&i==="next"?e+n.substr(e.length):o<e.length&&i==="prev"?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function $t(e,t,n,r){var a,i,o,s,l,c,u,p=n.length;if(!n.every(function(f){return typeof f=="string"}))return se(e,Wr);function d(f){a=hi(f),i=mi(f),o=f==="next"?di:fi;var g=n.map(function(x){return{lower:i(x),upper:a(x)}}).sort(function(x,w){return o(x.lower,w.lower)});s=g.map(function(x){return x.upper}),l=g.map(function(x){return x.lower}),c=f,u=f==="next"?"":r}d("next");var m=new e.Collection(e,function(){return Oe(s[0],l[p-1]+r)});m._ondirectionchange=function(f){d(f)};var h=0;return m._addAlgorithm(function(f,g,x){var w=f.key;if(typeof w!="string")return!1;var y=i(w);if(t(y,l,h))return!0;for(var b=null,v=h;v<p;++v){var I=vi(w,y,s[v],l[v],o,c);I===null&&b===null?h=v+1:(b===null||o(b,I)>0)&&(b=I)}return b!==null?g(function(){f.continue(b+u)}):g(x),!1}),m}function Oe(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Hr(e){return{type:1,lower:e,upper:e}}var Kr=function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!0,configurable:!0}),e.prototype.between=function(t,n,r,a){r=r!==!1,a=a===!0;try{return this._cmp(t,n)>0||this._cmp(t,n)===0&&(r||a)&&!(r&&a)?Xe(this):new this.Collection(this,function(){return Oe(t,n,!r,!a)})}catch(i){return se(this,Te)}},e.prototype.equals=function(t){return new this.Collection(this,function(){return Hr(t)})},e.prototype.above=function(t){return t==null?se(this,Te):new this.Collection(this,function(){return Oe(t,void 0,!0)})},e.prototype.aboveOrEqual=function(t){return t==null?se(this,Te):new this.Collection(this,function(){return Oe(t,void 0,!1)})},e.prototype.below=function(t){return t==null?se(this,Te):new this.Collection(this,function(){return Oe(void 0,t,!1,!0)})},e.prototype.belowOrEqual=function(t){return t==null?se(this,Te):new this.Collection(this,function(){return Oe(void 0,t)})},e.prototype.startsWith=function(t){return typeof t!="string"?se(this,Wr):this.between(t,t+$e,!0,!0)},e.prototype.startsWithIgnoreCase=function(t){return t===""?this.startsWith(t):$t(this,function(n,r){return n.indexOf(r[0])===0},[t],$e)},e.prototype.equalsIgnoreCase=function(t){return $t(this,function(n,r){return n===r[0]},[t],"")},e.prototype.anyOfIgnoreCase=function(){var t=we.apply(Ve,arguments);return t.length===0?Xe(this):$t(this,function(n,r){return r.indexOf(n)!==-1},t,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var t=we.apply(Ve,arguments);return t.length===0?Xe(this):$t(this,function(n,r){return r.some(function(a){return n.indexOf(a)===0})},t,$e)},e.prototype.anyOf=function(){var t=this,n=we.apply(Ve,arguments),r=this._cmp;try{n.sort(r)}catch(o){return se(this,Te)}if(n.length===0)return Xe(this);var a=new this.Collection(this,function(){return Oe(n[0],n[n.length-1])});a._ondirectionchange=function(o){r=o==="next"?t._ascending:t._descending,n.sort(r)};var i=0;return a._addAlgorithm(function(o,s,l){for(var c=o.key;r(c,n[i])>0;)if(++i,i===n.length)return s(l),!1;return r(c,n[i])===0?!0:(s(function(){o.continue(n[i])}),!1)}),a},e.prototype.notEqual=function(t){return this.inAnyRange([[An,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var t=we.apply(Ve,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch(r){return se(this,Te)}var n=t.reduce(function(r,a){return r?r.concat([[r[r.length-1][1],a]]):[[An,a]]},null);return n.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(t,n){var r=this,a=this._cmp,i=this._ascending,o=this._descending,s=this._min,l=this._max;if(t.length===0)return Xe(this);if(!t.every(function(v){return v[0]!==void 0&&v[1]!==void 0&&i(v[0],v[1])<=0}))return se(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",N.InvalidArgument);var c=!n||n.includeLowers!==!1,u=n&&n.includeUppers===!0;function p(v,I){for(var A=0,S=v.length;A<S;++A){var _=v[A];if(a(I[0],_[1])<0&&a(I[1],_[0])>0){_[0]=s(_[0],I[0]),_[1]=l(_[1],I[1]);break}}return A===S&&v.push(I),v}var d=i;function m(v,I){return d(v[0],I[0])}var h;try{h=t.reduce(p,[]),h.sort(m)}catch(v){return se(this,Te)}var f=0,g=u?function(v){return i(v,h[f][1])>0}:function(v){return i(v,h[f][1])>=0},x=c?function(v){return o(v,h[f][0])>0}:function(v){return o(v,h[f][0])>=0};function w(v){return!g(v)&&!x(v)}var y=g,b=new this.Collection(this,function(){return Oe(h[0][0],h[h.length-1][1],!c,!u)});return b._ondirectionchange=function(v){v==="next"?(y=g,d=i):(y=x,d=o),h.sort(m)},b._addAlgorithm(function(v,I,A){for(var S=v.key;y(S);)if(++f,f===h.length)return I(A),!1;return w(S)?!0:(r._cmp(S,h[f][1])===0||r._cmp(S,h[f][0])===0||I(function(){d===i?v.continue(h[f][0]):v.continue(h[f][1])}),!1)}),b},e.prototype.startsWithAnyOf=function(){var t=we.apply(Ve,arguments);return t.every(function(n){return typeof n=="string"})?t.length===0?Xe(this):this.inAnyRange(t.map(function(n){return[n,n+$e]})):se(this,"startsWithAnyOf() only works with strings")},e}();function gi(e){return bt(Kr.prototype,function(n,r,a){this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:a};var i=e._deps.indexedDB;if(!i)throw new N.MissingAPI("indexedDB API missing");this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(o,s){return i.cmp(s,o)},this._max=function(o,s){return i.cmp(o,s)>0?o:s},this._min=function(o,s){return i.cmp(o,s)<0?o:s},this._IDBKeyRange=e._deps.IDBKeyRange})}function Vr(e){return e.length===1?e[0]:e}function Bn(e){try{return e.only([[]]),[[]]}catch(t){return $e}}function fe(e){return V(function(t){return Et(t),e(t.target.error),!1})}function Et(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var yi=function(){function e(){}return e.prototype._lock=function(){return ct(!R.global),++this._reculock,this._reculock===1&&!R.global&&(R.lockOwnerFor=this),this},e.prototype._unlock=function(){if(ct(!R.global),--this._reculock===0)for(R.global||(R.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{ht(t[1],t[0])}catch(n){}}return this},e.prototype._locked=function(){return this._reculock&&R.lockOwnerFor!==this},e.prototype.create=function(t){var n=this;if(!this.mode)return this;var r=this.db.idbdb,a=this.db._state.dbOpenError;if(ct(!this.idbtrans),!t&&!r)switch(a&&a.name){case"DatabaseClosedError":throw new N.DatabaseClosed(a);case"MissingAPIError":throw new N.MissingAPI(a.message,a);default:throw new N.OpenFailed(a)}if(!this.active)throw new N.TransactionInactive;return ct(this._completion._state===null),t=this.idbtrans=t||r.transaction(Vr(this.storeNames),this.mode),t.onerror=V(function(i){Et(i),n._reject(t.error)}),t.onabort=V(function(i){Et(i),n.active&&n._reject(new N.Abort(t.error)),n.active=!1,n.on("abort").fire(i)}),t.oncomplete=V(function(){n.active=!1,n._resolve()}),this},e.prototype._promise=function(t,n,r){var a=this;if(t==="readwrite"&&this.mode!=="readwrite")return te(new N.ReadOnly("Transaction is readonly"));if(!this.active)return te(new N.TransactionInactive);if(this._locked())return new k(function(o,s){a._blockedFuncs.push([function(){a._promise(t,n,r).then(o,s)},R])});if(r)return Me(function(){var o=new k(function(s,l){a._lock();var c=n(s,l,a);c&&c.then&&c.then(s,l)});return o.finally(function(){return a._unlock()}),o._lib=!0,o});var i=new k(function(o,s){var l=n(o,s,a);l&&l.then&&l.then(o,s)});return i._lib=!0,i},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(t){var n=this._root(),r=k.resolve(t);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var a=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(a.get(-Infinity).onsuccess=o)})()}var i=n._waitingFor;return new k(function(o,s){r.then(function(l){return n._waitingQueue.push(V(o.bind(null,l)))},function(l){return n._waitingQueue.push(V(s.bind(null,l)))}).finally(function(){n._waitingFor===i&&(n._waitingFor=null)})})},e.prototype.abort=function(){this.active&&this._reject(new N.Abort),this.active=!1},e.prototype.table=function(t){var n=this._memoizedTables||(this._memoizedTables={});if(ce(n,t))return n[t];var r=this.schema[t];if(!r)throw new N.NotFound("Table "+t+" not part of transaction");var a=new this.db.Table(t,r,this);return a.core=this.db.core.table(t),n[t]=a,a},e}();function bi(e){return bt(yi.prototype,function(n,r,a,i){var o=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=a,this.idbtrans=null,this.on=Gt(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new k(function(s,l){o._resolve=s,o._reject=l}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(s){var l=o.active;return o.active=!1,o.on.error.fire(s),o.parent?o.parent._reject(s):l&&o.idbtrans&&o.idbtrans.abort(),te(s)})})}function Dn(e,t,n,r,a,i,o){return{name:e,keyPath:t,unique:n,multi:r,auto:a,compound:i,src:(n&&!o?"&":"")+(r?"*":"")+(a?"++":"")+Jr(t)}}function Jr(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Gr(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:fr(n,function(r){return[r.name,r]})}}function jn(e){return e==null?function(){return}:typeof e=="string"?wi(e):function(t){return be(t,e)}}function wi(e){var t=e.split(".");return t.length===1?function(n){return n[e]}:function(n){return be(n,e)}}function Qr(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}function xi(e,t,n){return t.type==="add"?Promise.resolve(new Array(t.values.length)):e.getMany({trans:t.trans,keys:n})}function Yr(e){return[].slice.call(e)}var Ei=0;function _t(e){return e==null?":id":typeof e=="string"?e:"["+e.join("+")+"]"}function _i(e,t,n,r){var a=t.cmp.bind(t);function i(m,h){var f=Yr(m.objectStoreNames);return{schema:{name:m.name,tables:f.map(function(g){return h.objectStore(g)}).map(function(g){var x=g.keyPath,w=g.autoIncrement,y=ne(x),b=x==null,v={},I={name:g.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:b,compound:y,keyPath:x,autoIncrement:w,unique:!0,extractKey:jn(x)},indexes:Yr(g.indexNames).map(function(A){return g.index(A)}).map(function(A){var S=A.name,_=A.unique,T=A.multiEntry,O=A.keyPath,F=ne(O),C={name:S,compound:F,keyPath:O,unique:_,multiEntry:T,extractKey:jn(O)};return v[_t(O)]=C,C}),getIndexByKeyPath:function(A){return v[_t(A)]}};return v[":id"]=I.primaryKey,x!=null&&(v[_t(x)]=I.primaryKey),I})},hasGetAll:f.length>0&&"getAll"in h.objectStore(f[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function o(m){if(m.type===3)return null;if(m.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var h=m.lower,f=m.upper,g=m.lowerOpen,x=m.upperOpen,w=h===void 0?f===void 0?null:n.upperBound(f,!!x):f===void 0?n.lowerBound(h,!!g):n.bound(h,f,!!g,!!x);return w}function s(m){var h=m.name;function f(w){var y=w.trans,b=w.type,v=w.keys,I=w.values,A=w.range,S=w.wantResults;return new Promise(function(_,T){_=V(_);var O=y.objectStore(h),F=O.keyPath==null,C=b==="put"||b==="add";if(!C&&b!=="delete"&&b!=="deleteRange")throw new Error("Invalid operation type: "+b);var H=(v||I||{length:1}).length;if(v&&I&&v.length!==I.length)throw new Error("Given keys array must have same length as given values array.");if(H===0)return _({numFailures:0,failures:{},results:[],lastResult:void 0});var P=S&&sn(v||Qr(m.primaryKey,{type:b,keys:v,values:I})),W,B=[],re=0,G=function(Y){++re,Et(Y),P&&(P[Y.target._reqno]=void 0),B[Y.target._reqno]=Y.target.error},We=function(Y){var Ee=Y.target;P[Ee._reqno]=Ee.result};if(b==="deleteRange"){if(A.type===4)return _({numFailures:re,failures:B,results:P,lastResult:void 0});A.type===3?W=O.clear():W=O.delete(o(A))}else{var he=C?F?[I,v]:[I,null]:[v,null],nt=he[0],me=he[1];if(C)for(var X=0;X<H;++X)W=me&&me[X]!==void 0?O[b](nt[X],me[X]):O[b](nt[X]),W._reqno=X,P&&P[X]===void 0&&(W.onsuccess=We),W.onerror=G;else for(var X=0;X<H;++X)W=O[b](nt[X]),W._reqno=X,W.onerror=G}var ze=function(Y){var Ee=Y.target.result;P&&(P[H-1]=Ee),_({numFailures:re,failures:B,results:P,lastResult:Ee})};W.onerror=function(Y){G(Y),ze(Y)},W.onsuccess=ze})}function g(w){var y=w.trans,b=w.values,v=w.query,I=w.reverse,A=w.unique;return new Promise(function(S,_){S=V(S);var T=v.index,O=v.range,F=y.objectStore(h),C=T.isPrimaryKey?F:F.index(T.name),H=I?A?"prevunique":"prev":A?"nextunique":"next",P=b||!("openKeyCursor"in C)?C.openCursor(o(O),H):C.openKeyCursor(o(O),H);P.onerror=fe(_),P.onsuccess=V(function(W){var B=P.result;if(!B){S(null);return}B.___id=++Ei,B.done=!1;var re=B.continue.bind(B),G=B.continuePrimaryKey;G&&(G=G.bind(B));var We=B.advance.bind(B),he=function(){throw new Error("Cursor not started")},nt=function(){throw new Error("Cursor not stopped")};B.trans=y,B.stop=B.continue=B.continuePrimaryKey=B.advance=he,B.fail=V(_),B.next=function(){var me=this,X=1;return this.start(function(){return X--?me.continue():me.stop()}).then(function(){return me})},B.start=function(me){var X=new Promise(function(Y,Ee){Y=V(Y),P.onerror=fe(Ee),B.fail=Ee,B.stop=function(fa){B.stop=B.continue=B.continuePrimaryKey=B.advance=nt,Y(fa)}}),ze=function(){if(P.result)try{me()}catch(Y){B.fail(Y)}else B.done=!0,B.start=function(){throw new Error("Cursor behind last entry")},B.stop()};return P.onsuccess=V(function(Y){P.onsuccess=ze,ze()}),B.continue=re,B.continuePrimaryKey=G,B.advance=We,ze(),X},S(B)},_)})}function x(w){return function(y){return new Promise(function(b,v){b=V(b);var I=y.trans,A=y.values,S=y.limit,_=y.query,T=S===Infinity?void 0:S,O=_.index,F=_.range,C=I.objectStore(h),H=O.isPrimaryKey?C:C.index(O.name),P=o(F);if(S===0)return b({result:[]});if(w){var W=A?H.getAll(P,T):H.getAllKeys(P,T);W.onsuccess=function(We){return b({result:We.target.result})},W.onerror=fe(v)}else{var B=0,re=A||!("openKeyCursor"in H)?H.openCursor(P):H.openKeyCursor(P),G=[];re.onsuccess=function(We){var he=re.result;if(!he)return b({result:G});if(G.push(A?he.value:he.primaryKey),++B===S)return b({result:G});he.continue()},re.onerror=fe(v)}})}}return{name:h,schema:m,mutate:f,getMany:function(w){var y=w.trans,b=w.keys;return new Promise(function(v,I){v=V(v);for(var A=y.objectStore(h),S=b.length,_=new Array(S),T=0,O=0,F=0,C,H=function(re){var G=re.target;(_[G._pos]=G.result)!=null&&++F,++O===T&&v(_)},P=fe(I),W=0;W<S;++W){var B=b[W];B!=null&&(C=A.get(b[W]),C._pos=W,C.onsuccess=H,C.onerror=P,++T)}T===0&&v(_)})},get:function(w){var y=w.trans,b=w.key;return new Promise(function(v,I){v=V(v);var A=y.objectStore(h),S=A.get(b);S.onsuccess=function(_){return v(_.target.result)},S.onerror=fe(I)})},query:x(u),openCursor:g,count:function(w){var y=w.query,b=w.trans,v=y.index,I=y.range;return new Promise(function(A,S){var _=b.objectStore(h),T=v.isPrimaryKey?_:_.index(v.name),O=o(I),F=O?T.count(O):T.count();F.onsuccess=V(function(C){return A(C.target.result)}),F.onerror=fe(S)})}}}var l=i(e,r),c=l.schema,u=l.hasGetAll,p=c.tables.map(function(m){return s(m)}),d={};return p.forEach(function(m){return d[m.name]=m}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(m){var h=d[m];if(!h)throw new Error("Table '"+m+"' not found");return d[m]},cmp:a,MIN_KEY:-Infinity,MAX_KEY:Bn(n),schema:c}}function ki(e,t){return t.reduce(function(n,r){var a=r.create;return U(U({},n),a(n))},e)}function Ii(e,t,n,r){var a=n.IDBKeyRange,i=n.indexedDB,o=ki(_i(t,i,a,r),e.dbcore);return{dbcore:o}}function Mn(e,t){var n=t.db,r=Ii(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(function(a){var i=a.name;e.core.schema.tables.some(function(o){return o.name===i})&&(a.core=e.core.table(i),e[i]instanceof e.Table&&(e[i].core=a.core))})}function Xt(e,t,n,r){n.forEach(function(a){var i=r[a];t.forEach(function(o){a in o||(o===e.Transaction.prototype||o instanceof e.Transaction?ye(o,a,{get:function(){return this.table(a)},set:function(s){lr(this,a,{value:s,writable:!0,configurable:!0,enumerable:!0})}}):o[a]=new e.Table(a,i))})})}function Pn(e,t){t.forEach(function(n){for(var r in n)n[r]instanceof e.Table&&delete n[r]})}function Si(e,t){return e._cfg.version-t._cfg.version}function Ti(e,t,n,r){var a=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,a);i.create(n),i._completion.catch(r);var o=i._reject.bind(i),s=R.transless||R;Me(function(){R.trans=i,R.transless=s,t===0?(Z(a).forEach(function(l){Wn(n,l,a[l].primKey,a[l].indexes)}),Mn(e,n),k.follow(function(){return e.on.populate.fire(i)}).catch(o)):Ai(e,t,i,n).catch(o)})}function Ai(e,t,n,r){var a=[],i=e._versions,o=e._dbSchema=$r(e,e.idbdb,r),s=!1,l=i.filter(function(u){return u._cfg.version>=t});l.forEach(function(u){a.push(function(){var p=o,d=u._cfg.dbschema;Fn(e,p,r),Fn(e,d,r),o=e._dbSchema=d;var m=Oi(p,d);m.add.forEach(function(y){Wn(r,y[0],y[1].primKey,y[1].indexes)}),m.change.forEach(function(y){if(y.recreate)throw new N.Upgrade("Not yet support for changing primary key");var b=r.objectStore(y.name);y.add.forEach(function(v){return zn(b,v)}),y.change.forEach(function(v){b.deleteIndex(v.name),zn(b,v)}),y.del.forEach(function(v){return b.deleteIndex(v)})});var h=u._cfg.contentUpgrade;if(h&&u._cfg.version>t){Mn(e,r),s=!0;var f=hr(d);m.del.forEach(function(y){f[y]=p[y]}),Pn(e,[e.Transaction.prototype]),Xt(e,[e.Transaction.prototype],Z(f),f),n.schema=f;var g=yr(h);g&&gt();var x,w=k.follow(function(){if(x=h(n),x&&g){var y=Ye.bind(null,null);x.then(y,y)}});return x&&typeof x.then=="function"?k.resolve(x):w.then(function(){return x})}}),a.push(function(p){if(!s||!ii){var d=u._cfg.dbschema;Ni(d,p)}Pn(e,[e.Transaction.prototype]),Xt(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema})});function c(){return a.length?k.resolve(a.shift()(n.idbtrans)).then(c):k.resolve()}return c().then(function(){Ri(o,r)})}function Oi(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var a=e[r],i=t[r];if(!a)n.add.push([r,i]);else{var o={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(a.primKey.src!==i.primKey.src&&!Tn)o.recreate=!0,n.change.push(o);else{var s=a.idxByName,l=i.idxByName,c=void 0;for(c in s)l[c]||o.del.push(c);for(c in l){var u=s[c],p=l[c];u?u.src!==p.src&&o.change.push(p):o.add.push(p)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}}return n}function Wn(e,t,n,r){var a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(i){return zn(a,i)}),a}function Ri(e,t){Z(e).forEach(function(n){t.db.objectStoreNames.contains(n)||Wn(t,n,e[n].primKey,e[n].indexes)})}function Ni(e,t){for(var n=0;n<t.db.objectStoreNames.length;++n){var r=t.db.objectStoreNames[n];e[r]==null&&t.db.deleteObjectStore(r)}}function zn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function $r(e,t,n){var r={},a=Ct(t.objectStoreNames,0);return a.forEach(function(i){for(var o=n.objectStore(i),s=o.keyPath,l=Dn(Jr(s),s||"",!1,!1,!!o.autoIncrement,s&&typeof s!="string",!0),c=[],u=0;u<o.indexNames.length;++u){var p=o.index(o.indexNames[u]);s=p.keyPath;var d=Dn(p.name,s,!!p.unique,!!p.multiEntry,!1,s&&typeof s!="string",!1);c.push(d)}r[i]=Gr(i,l,c)}),r}function Ci(e,t,n){e.verno=t.version/10;var r=e._dbSchema=$r(e,t,n);e._storeNames=Ct(t.objectStoreNames,0),Xt(e,[e._allTables],Z(r),r)}function Fn(e,t,n){for(var r=n.db.objectStoreNames,a=0;a<r.length;++a){var i=r[a],o=n.objectStore(i);e._hasGetAll="getAll"in o;for(var s=0;s<o.indexNames.length;++s){var l=o.indexNames[s],c=o.index(l).keyPath,u=typeof c=="string"?c:"["+Ct(c).join("+")+"]";if(t[i]){var p=t[i].idxByName[u];p&&(p.name=l,delete t[i].idxByName[u],t[i].idxByName[l]=p)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&K.WorkerGlobalScope&&K instanceof K.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Bi(e){return e.split(",").map(function(t,n){t=t.trim();var r=t.replace(/([&*]|\+\+)/g,""),a=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Dn(r,a||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),ne(a),n===0)})}var Di=function(){function e(){}return e.prototype._parseStoresSpec=function(t,n){Z(t).forEach(function(r){if(t[r]!==null){var a=Bi(t[r]),i=a.shift();if(i.multi)throw new N.Schema("Primary key cannot be multi-valued");a.forEach(function(o){if(o.auto)throw new N.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new N.Schema("Index must have a name and cannot be an empty string")}),n[r]=Gr(r,i,a)}})},e.prototype.stores=function(t){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?oe(this._cfg.storesSource,t):t;var r=n._versions,a={},i={};return r.forEach(function(o){oe(a,o._cfg.storesSource),i=o._cfg.dbschema={},o._parseStoresSpec(a,i)}),n._dbSchema=i,Pn(n,[n._allTables,n,n.Transaction.prototype]),Xt(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Z(i),i),n._storeNames=Z(i),this},e.prototype.upgrade=function(t){return this._cfg.contentUpgrade=t,this},e}();function ji(e){return bt(Di.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}var kt;function Mi(e){var t=e&&typeof e.databases=="function",n;if(!t){var r=new xt(Jt,{addons:[]});r.version(1).stores({dbnames:"name"}),n=r.table("dbnames")}return{getDatabaseNames:function(){return t?k.resolve(e.databases()).then(function(a){return a.map(function(i){return i.name}).filter(function(i){return i!==Jt})}):n.toCollection().primaryKeys()},add:function(a){return!t&&a!==Jt&&n.put({name:a}).catch(q)},remove:function(a){return!t&&a!==Jt&&n.delete(a).catch(q)}}}function Pi(e){try{kt=Mi(e)}catch(t){}}function Un(e){return Me(function(){return R.letThrough=!0,e()})}function Wi(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?te(t.dbOpenError):e});de&&(t.openCanceller._stackHolder=Je()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.dbReadyResolve,a=null;return k.race([t.openCanceller,new k(function(i,o){if(!n)throw new N.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var s=e.name,l=t.autoSchema?n.open(s):n.open(s,Math.round(e.verno*10));if(!l)throw new N.MissingAPI("IndexedDB API not available");l.onerror=fe(o),l.onblocked=V(e._fireOnBlocked),l.onupgradeneeded=V(function(c){if(a=l.transaction,t.autoSchema&&!e._options.allowEmptyDB){l.onerror=Et,a.abort(),l.result.close();var u=n.deleteDatabase(s);u.onsuccess=u.onerror=V(function(){o(new N.NoSuchDatabase("Database "+s+" doesnt exist"))})}else{a.onerror=fe(o);var p=c.oldVersion>Math.pow(2,62)?0:c.oldVersion;e.idbdb=l.result,Ti(e,p/10,a,o)}},o),l.onsuccess=V(function(){a=null;var c=e.idbdb=l.result,u=Ct(c.objectStoreNames);if(u.length>0)try{var p=c.transaction(Vr(u),"readonly");t.autoSchema?Ci(e,c,p):Fn(e,e._dbSchema,p),Mn(e,p)}catch(d){}yt.push(e),c.onversionchange=V(function(d){t.vcFired=!0,e.on("versionchange").fire(d)}),kt.add(s),i()},o)})]).then(function(){return t.onReadyBeingFired=[],k.resolve(Un(e.on.ready.fire)).then(function i(){if(t.onReadyBeingFired.length>0){var o=t.onReadyBeingFired.reduce(kr,q);return t.onReadyBeingFired=[],k.resolve(Un(o)).then(i)}})}).finally(function(){t.onReadyBeingFired=null}).then(function(){return t.isBeingOpened=!1,e}).catch(function(i){try{a&&a.abort()}catch(o){}return t.isBeingOpened=!1,e.close(),t.dbOpenError=i,te(t.dbOpenError)}).finally(function(){t.openComplete=!0,r()})}function qn(e){var t=function(o){return e.next(o)},n=function(o){return e.throw(o)},r=i(t),a=i(n);function i(o){return function(s){var l=o(s),c=l.value;return l.done?c:!c||typeof c.then!="function"?ne(c)?Promise.all(c).then(r,a):r(c):c.then(r,a)}}return i(t)()}function zi(e,t,n){var r=arguments.length;if(r<2)throw new N.InvalidArgument("Too few arguments");for(var a=new Array(r-1);--r;)a[r-1]=arguments[r];n=a.pop();var i=mr(a);return[e,i,n]}function Fi(e,t,n,r,a){return k.resolve().then(function(){var i=R.transless||R,o=e._createTransaction(t,n,e._dbSchema,r),s={trans:o,transless:i};r?o.idbtrans=r.idbtrans:o.create();var l=yr(a);l&&gt();var c,u=k.follow(function(){if(c=a.call(o,o),c)if(l){var p=Ye.bind(null,null);c.then(p,p)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=qn(c))},s);return(c&&typeof c.then=="function"?k.resolve(c).then(function(p){return o.active?p:te(new N.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):u.then(function(){return c})).then(function(p){return r&&o._resolve(),o._completion.then(function(){return p})}).catch(function(p){return o._reject(p),te(p)})})}function It(e,t,n){for(var r=ne(e)?e.slice():[e],a=0;a<n;++a)r.push(t);return r}function Ui(e){return U(U({},e),{table:function(t){var n=e.table(t),r=n.schema,a={},i=[];function o(f,g,x){var w=_t(f),y=a[w]=a[w]||[],b=f==null?0:typeof f=="string"?1:f.length,v=g>0,I=U(U({},x),{isVirtual:v,isPrimaryKey:!v&&x.isPrimaryKey,keyTail:g,keyLength:b,extractKey:jn(f),unique:!v&&x.unique});if(y.push(I),I.isPrimaryKey||i.push(I),b>1){var A=b===2?f[0]:f.slice(0,b-1);o(A,g+1,x)}return y.sort(function(S,_){return S.keyTail-_.keyTail}),I}var s=o(r.primaryKey.keyPath,0,r.primaryKey);a[":id"]=[s];for(var l=0,c=r.indexes;l<c.length;l++){var u=c[l];o(u.keyPath,0,u)}function p(f){var g=a[_t(f)];return g&&g[0]}function d(f,g){return{type:f.type===1?2:f.type,lower:It(f.lower,f.lowerOpen?e.MAX_KEY:e.MIN_KEY,g),lowerOpen:!0,upper:It(f.upper,f.upperOpen?e.MIN_KEY:e.MAX_KEY,g),upperOpen:!0}}function m(f){var g=f.query.index;return g.isVirtual?U(U({},f),{query:{index:g,range:d(f.query.range,g.keyTail)}}):f}var h=U(U({},n),{schema:U(U({},r),{primaryKey:s,indexes:i,getIndexByKeyPath:p}),count:function(f){return n.count(m(f))},query:function(f){return n.query(m(f))},openCursor:function(f){var g=f.query.index,x=g.keyTail,w=g.isVirtual,y=g.keyLength;if(!w)return n.openCursor(f);function b(v){function I(S){S!=null?v.continue(It(S,f.reverse?e.MAX_KEY:e.MIN_KEY,x)):f.unique?v.continue(It(v.key,f.reverse?e.MIN_KEY:e.MAX_KEY,x)):v.continue()}var A=Object.create(v,{continue:{value:I},continuePrimaryKey:{value:function(S,_){v.continuePrimaryKey(It(S,e.MAX_KEY,x),_)}},key:{get:function(){var S=v.key;return y===1?S[0]:S.slice(0,y)}},value:{get:function(){return v.value}}});return A}return n.openCursor(m(f)).then(function(v){return v&&b(v)})}});return h}})}var qi={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Ui},Ki={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return U(U({},e),{table:function(t){var n=e.table(t),r=n.schema.primaryKey,a=U(U({},n),{mutate:function(i){var o=R.trans,s=o.table(t).hook,l=s.deleting,c=s.creating,u=s.updating;switch(i.type){case"add":if(c.fire===q)break;return o._promise("readwrite",function(){return p(i)},!0);case"put":if(c.fire===q&&u.fire===q)break;return o._promise("readwrite",function(){return p(i)},!0);case"delete":if(l.fire===q)break;return o._promise("readwrite",function(){return p(i)},!0);case"deleteRange":if(l.fire===q)break;return o._promise("readwrite",function(){return d(i)},!0)}return n.mutate(i);function p(h){var f=R.trans,g=h.keys||Qr(r,h);if(!g)throw new Error("Keys missing");return h=h.type==="add"||h.type==="put"?U(U({},h),{keys:g,wantResults:!0}):U({},h),h.type!=="delete"&&(h.values=sn(h.values)),h.keys&&(h.keys=sn(h.keys)),xi(n,h,g).then(function(x){var w=g.map(function(y,b){var v=x[b],I={onerror:null,onsuccess:null};if(h.type==="delete")l.fire.call(I,y,v,f);else if(h.type==="add"||v===void 0){var A=c.fire.call(I,y,h.values[b],f);y==null&&A!=null&&(y=A,h.keys[b]=y,r.outbound||le(h.values[b],r.keyPath,y))}else{var S=pn(v,h.values[b]),_=u.fire.call(I,S,y,v,f);if(_){var T=h.values[b];Object.keys(_).forEach(function(O){le(T,O,_[O])})}}return I});return n.mutate(h).then(function(y){for(var b=y.failures,v=y.results,I=y.numFailures,A=y.lastResult,S=0;S<g.length;++S){var _=v?v[S]:g[S],T=w[S];_==null?T.onerror&&T.onerror(b[S]):T.onsuccess&&T.onsuccess(h.type==="put"&&x[S]?h.values[S]:_)}return{failures:b,results:v,numFailures:I,lastResult:A}}).catch(function(y){return w.forEach(function(b){return b.onerror&&b.onerror(y)}),Promise.reject(y)})})}function d(h){return m(h.trans,h.range,1e4)}function m(h,f,g){return n.query({trans:h,values:!1,query:{index:r,range:f},limit:g}).then(function(x){var w=x.result;return p({type:"delete",keys:w,trans:h}).then(function(y){return y.numFailures>0?Promise.reject(y.failures[0]):w.length<g?{failures:[],numFailures:0,lastResult:void 0}:m(h,U(U({},f),{lower:w[w.length-1],lowerOpen:!0}),g)})})}}});return a}})}},xt=function(){function e(t,n){var r=this;this._middlewares={},this.verno=0;var a=e.dependencies;this._options=n=U({addons:e.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var i=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null;var o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:q,dbReadyPromise:null,cancelOpen:q,openCanceller:null,autoSchema:!0};o.dbReadyPromise=new k(function(s){o.dbReadyResolve=s}),o.openCanceller=new k(function(s,l){o.cancelOpen=l}),this._state=o,this.name=t,this.on=Gt(this,"populate","blocked","versionchange",{ready:[kr,q]}),this.on.ready.subscribe=ur(this.on.ready.subscribe,function(s){return function(l,c){e.vip(function(){var u=r._state;if(u.openComplete)u.dbOpenError||k.resolve().then(l),c&&s(l);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(l),c&&s(l);else{s(l);var p=r;c||s(function d(){p.on.ready.unsubscribe(l),p.on.ready.unsubscribe(d)})}})}}),this.Collection=ui(this),this.Table=ci(this),this.Transaction=bi(this),this.Version=ji(this),this.WhereClause=gi(this),this.on("versionchange",function(s){s.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(s){!s.newVersion||s.newVersion<s.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+s.oldVersion/10)}),this._maxKey=Bn(n.IDBKeyRange),this._createTransaction=function(s,l,c,u){return new r.Transaction(s,l,c,u)},this._fireOnBlocked=function(s){r.on("blocked").fire(s),yt.filter(function(l){return l.name===r.name&&l!==r&&!l._state.vcFired}).map(function(l){return l.on("versionchange").fire(s)})},this.use(qi),this.use(Ki),i.forEach(function(s){return s(r)})}return e.prototype.version=function(t){if(isNaN(t)||t<.1)throw new N.Type("Given version is not a positive number");if(t=Math.round(t*10)/10,this.idbdb||this._state.isBeingOpened)throw new N.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=this._versions,r=n.filter(function(a){return a._cfg.version===t})[0];return r||(r=new this.Version(t),n.push(r),n.sort(Si),r.stores({}),this._state.autoSchema=!1,r)},e.prototype._whenReady=function(t){var n=this;return this._state.openComplete||R.letThrough?t():new k(function(r,a){if(!n._state.isBeingOpened){if(!n._options.autoOpen){a(new N.DatabaseClosed);return}n.open().catch(q)}n._state.dbReadyPromise.then(r,a)}).then(t)},e.prototype.use=function(t){var n=t.stack,r=t.create,a=t.level,i=t.name;i&&this.unuse({stack:n,name:i});var o=this._middlewares[n]||(this._middlewares[n]=[]);return o.push({stack:n,create:r,level:a??10,name:i}),o.sort(function(s,l){return s.level-l.level}),this},e.prototype.unuse=function(t){var n=t.stack,r=t.name,a=t.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(i){return a?i.create!==a:r?i.name!==r:!1})),this},e.prototype.open=function(){return Wi(this)},e.prototype.close=function(){var t=yt.indexOf(this),n=this._state;if(t>=0&&yt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(r){}this.idbdb=null}this._options.autoOpen=!1,n.dbOpenError=new N.DatabaseClosed,n.isBeingOpened&&n.cancelOpen(n.dbOpenError),n.dbReadyPromise=new k(function(r){n.dbReadyResolve=r}),n.openCanceller=new k(function(r,a){n.cancelOpen=a})},e.prototype.delete=function(){var t=this,n=arguments.length>0,r=this._state;return new k(function(a,i){var o=function(){t.close();var s=t._deps.indexedDB.deleteDatabase(t.name);s.onsuccess=V(function(){kt.remove(t.name),a()}),s.onerror=fe(i),s.onblocked=t._fireOnBlocked};if(n)throw new N.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var t=this;return Z(this._allTables).map(function(n){return t._allTables[n]})},enumerable:!0,configurable:!0}),e.prototype.transaction=function(){var t=zi.apply(this,arguments);return this._transaction.apply(this,t)},e.prototype._transaction=function(t,n,r){var a=this,i=R.trans;(!i||i.db!==this||t.indexOf("!")!==-1)&&(i=null);var o=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");var s,l;try{if(l=n.map(function(u){var p=u instanceof a.Table?u.name:u;if(typeof p!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return p}),t=="r"||t===On)s=On;else if(t=="rw"||t==Rn)s=Rn;else throw new N.InvalidArgument("Invalid transaction mode: "+t);if(i){if(i.mode===On&&s===Rn)if(o)i=null;else throw new N.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i&&l.forEach(function(u){if(i&&i.storeNames.indexOf(u)===-1)if(o)i=null;else throw new N.SubTransaction("Table "+u+" not included in parent transaction.")}),o&&i&&!i.active&&(i=null)}}catch(u){return i?i._promise(null,function(p,d){d(u)}):te(u)}var c=Fi.bind(null,this,s,l,i,r);return i?i._promise(s,c,"lock"):R.trans?ht(R.transless,function(){return a._whenReady(c)}):this._whenReady(c)},e.prototype.table=function(t){if(!ce(this._allTables,t))throw new N.InvalidTable("Table "+t+" does not exist");return this._allTables[t]},e}(),Re=xt;st(Re,U(U({},jt),{delete:function(e){var t=new Re(e);return t.delete()},exists:function(e){return new Re(e,{addons:[]}).open().then(function(t){return t.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){return kt?kt.getDatabaseNames().then(e):k.resolve([])},defineClass:function(){function e(t){oe(this,t)}return e},ignoreTransaction:function(e){return R.trans?ht(R.transless,e):e()},vip:Un,async:function(e){return function(){try{var t=qn(e.apply(this,arguments));return!t||typeof t.then!="function"?k.resolve(t):t}catch(n){return te(n)}}},spawn:function(e,t,n){try{var r=qn(e.apply(n,t||[]));return!r||typeof r.then!="function"?k.resolve(r):r}catch(a){return te(a)}},currentTransaction:{get:function(){return R.trans||null}},waitFor:function(e,t){var n=k.resolve(typeof e=="function"?Re.ignoreTransaction(e):e).timeout(t||6e4);return R.trans?R.trans.waitFor(n):n},Promise:k,debug:{get:function(){return de},set:function(e){wr(e,e==="dexie"?function(){return!0}:zr)}},derive:He,extend:oe,props:st,override:ur,Events:Gt,getByKeyPath:be,setByKeyPath:le,delByKeyPath:Ra,shallowClone:hr,deepClone:Bt,getObjectDiff:pn,asap:dr,minKey:An,addons:[],connections:yt,errnames:za,dependencies:function(){try{return{indexedDB:K.indexedDB||K.mozIndexedDB||K.webkitIndexedDB||K.msIndexedDB,IDBKeyRange:K.IDBKeyRange||K.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Pr,version:Pr.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)}),default:Re,Dexie:Re}));Re.maxKey=Bn(Re.dependencies.IDBKeyRange);Pi(xt.dependencies.indexedDB);k.rejectionMapper=Ua;wr(de,zr);var j=xt;function Xr(){}function Hi(e,t){return e===Xr?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){var r=this,a=arguments;return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}function Lr(){var e=Date.now(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var r=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(n==="x"?r:r&7|8).toString(16)});return t}function Vi(e,t){return function(r){return function(a,i,o,s){if(e.dynamicallyOpened())return r.apply(this,arguments);var l=!1;a==="readwrite"&&i.some(function(u){return o[u]&&o[u].observable})&&(l=!0,i=i.slice(0),i.indexOf("_changes")===-1&&i.push("_changes"));var c=r.call(this,a,i,o,s);return l&&(c._lastWrittenRevision=0,c.on("complete",function(){if(c._lastWrittenRevision)if(!s)t.timeoutHandle&&clearTimeout(t.timeoutHandle),t.timeoutHandle=setTimeout(function(){delete t.timeoutHandle,t(c._lastWrittenRevision)},25);else{var u=function p(d){return d.parent?p(d.parent):d}(s);u._lastWrittenRevision=Math.max(c._lastWrittenRevision,u.lastWrittenRevision||0)}}),c.parent&&c.parent.source&&(c.source=c.parent.source)),c}}}function Ji(e,t,n){return function(a){t.latestRevision[e.name]<a&&(t.latestRevision[e.name]=a,j.ignoreTransaction(function(){t.on("latestRevisionIncremented").fire(e.name,a)}),n&&n.setItem("Dexie.Observable/latestRevision/"+e.name,a))}}var Gi=1,Qi=2,Yi=3;function $i(e,t){return function(r,a,i){var o=void 0;r===void 0&&t.schema.primKey.uuid&&(r=o=Lr(),t.schema.primKey.keyPath&&j.setByKeyPath(a,t.schema.primKey.keyPath,r));var s={source:i.source||null,table:t.name,key:r===void 0?null:r,type:Gi,obj:a},l=e._changes.add(s).then(function(c){return i._lastWrittenRevision=Math.max(i._lastWrittenRevision,c),c});return this.onsuccess=function(c){r!=c&&l._then(function(){s.key=c,e._changes.put(s)})},this.onerror=function(){l._then(function(c){e._changes.delete(c)})},o}}function Xi(e,t){return function(r,a,i,o){var s={},l=!1,c=j.deepClone(i);for(var u in r){var p=r[u];if(typeof p=="undefined")j.delByKeyPath(c,u),s[u]=null,l=!0;else{var d=j.getByKeyPath(i,u);p!==d&&JSON.stringify(p)!==JSON.stringify(d)&&(j.setByKeyPath(c,u,p),s[u]=p,l=!0)}}if(l){var m={source:o.source||null,table:t,key:a,type:Qi,mods:s,oldObj:i,obj:c},h=e._changes.add(m);this.onsuccess=function(){h._then(function(f){o._lastWrittenRevision=Math.max(o._lastWrittenRevision,f)})},this.onerror=function(){h._then(function(f){e._changes.delete(f)})}}}}function Li(e,t){return function(r,a,i){var o=e._changes.add({source:i.source||null,table:t,key:r,type:Yi,oldObj:a}).then(function(s){return i._lastWrittenRevision=Math.max(i._lastWrittenRevision,s),s}).catch(function(s){console.log(a),console.log(s.stack)});this.onerror=function(){o._then(function(s){e._changes.delete(s)})}}}function Zi(e){return function(n){if(n.hook._observing)return;n.hook._observing=!0;var r=n.name;n.hook("creating").subscribe($i(e,n)),n.hook("updating").subscribe(Xi(e,r)),n.hook("deleting").subscribe(Li(e,r))}}function eo(e){return function(n){if(n.key&&n.key.indexOf("Dexie.Observable/")===0){var r=n.key.split("/"),a=r[1],i=r[2];if(a==="latestRevision"){var o=parseInt(n.newValue,10);!isNaN(o)&&o>e.latestRevision[i]&&(e.latestRevision[i]=o,j.ignoreTransaction(function(){e.on("latestRevisionIncremented").fire(i,o)}))}else if(a.indexOf("deadnode:")===0){var s=parseInt(a.split(":")[1],10);n.newValue&&e.on.suicideNurseCall.fire(i,s)}else a==="intercomm"&&(n.newValue&&e.on.intercomm.fire(i))}}}function to(e,t,n){return function(a){return function(){return Object.keys(e._allTables).forEach(function(i){var o=e._allTables[i];o.schema.observable&&n(o),o.name==="_syncNodes"&&o.mapToClass(t)}),a.apply(this,arguments)}}}var St=j.Promise;function no(e,t,n,r,a){var i={};e.observable.sendMessage=function(c,u,p,d){if(d=d||{},!r.node)return d.wantReply?St.reject(new j.DatabaseClosedError):St.resolve();var m={message:u,destinationNode:p,sender:r.node.id,type:c};return j.extend(m,d),j.ignoreTransaction(function(){var h=["_intercomm"];d.wantReply&&h.push("_syncNodes");var f=e.transaction("rw",h,function(){return d.wantReply?e._syncNodes.where("id").equals(p).count(function(g){return g?e._intercomm.add(m):e._syncNodes.where("isMaster").above(0).first(function(x){return m.destinationNode=x.id,e._intercomm.add(m)})}):e._intercomm.add(m)}).then(function(g){var x=null;return d.wantReply&&(x=new St(function(w,y){i[g.toString()]={resolve:w,reject:y}})),a&&a.setItem("Dexie.Observable/intercomm/"+e.name,g.toString()),t.on.intercomm.fire(e.name),x});if(d.wantReply)return f;f.catch(function(){});return})},e.observable.broadcastMessage=function(c,u,p){if(!r.node)return;var d=r.node.id;j.ignoreTransaction(function(){e._syncNodes.toArray(function(m){return St.all(m.filter(function(h){return h.type==="local"&&(p||h.id!==d)}).map(function(h){return e.observable.sendMessage(c,u,h.id)}))}).catch(function(){})})};function o(){return r.node?j.ignoreTransaction(function(){return e.transaction("rw","_intercomm",function(){return e._intercomm.where({destinationNode:r.node.id}).toArray(function(c){return c.forEach(function(u){return s(u)}),e._intercomm.where("id").anyOf(c.map(function(u){return u.id})).delete()})})}):St.reject(new j.DatabaseClosedError)}function s(c){if(c.type==="response"){var u=i[c.requestId.toString()];u&&(c.isFailure?u.reject(c.message.error):u.resolve(c.message.result),delete i[c.requestId.toString()])}else c.resolve=function(p){e.observable.sendMessage("response",{result:p},c.sender,{requestId:c.id})},c.reject=function(p){e.observable.sendMessage("response",{error:p.toString()},c.sender,{isFailure:!0,requestId:c.id})},e.on.message.fire(c)}function l(c){c===e.name&&o().catch("DatabaseClosedError",function(){})}return{onIntercomm:l,consumeIntercommMessages:o}}function ro(e){return function(t,n){t._changes="++rev",t._syncNodes="++id,myRevision,lastHeartBeat,&url,isMaster,type,status",t._intercomm="++id,destinationNode",t._uncommittedChanges="++id,node",e.call(this,t,n),Object.keys(n).forEach(function(r){var a=n[r];a.primKey.name.indexOf("$$")===0&&(a.primKey.uuid=!0,a.primKey.name=a.primKey.name.substr(2),a.primKey.keyPath=a.primKey.keyPath.substr(2))}),Object.keys(n).forEach(function(r){r.indexOf("_")!==0&&r.indexOf("$")!==0&&(n[r].observable=!0)})}}function Zr(e){var t=100;j.ignoreTransaction(function(){return e._syncNodes.orderBy("myRevision").first(function(n){return e._changes.where("rev").below(n.myRevision).limit(t).primaryKeys()}).then(function(n){return n.length===0?void 0:e._changes.bulkDelete(n).then(function(){n.length===t&&setTimeout(function(){return e.isOpen()&&Zr(e)},500)})})}).catch(function(){})}var Le=self,ao=j.defineClass({rev:Number,source:String,table:String,key:Object,type:Number,obj:Object,mods:Object,oldObj:Object}),At=j.override,ea=j.Promise,ta=!1;function D(e){if(!/^3\./.test(j.version))throw new Error("Missing dexie version 3.x");if(e.observable){if(e.observable.version!=="{version}")throw new Error("Mixed versions of dexie-observable");return}var t=2e4,n=2e4,r=500,a=t-5e3,i=D.localStorageImpl,o=j.defineClass({myRevision:Number,type:String,lastHeartBeat:Number,deleteTimeStamp:Number,url:String,isMaster:Number,syncProtocol:String,syncContext:null,syncOptions:Object,connected:!1,status:Number,appliedRemoteRevision:null,remoteBaseRevisions:[{local:Number,remote:null}],dbUploadState:{tablesToUpload:[String],currentTable:String,currentKey:null,localBaseRevision:Number}});e.observable={version:"{version}"},e.observable.SyncNode=o;var s=Ji(e,D,i),l=Vi(e,s),c=Zi(e),u=to(e,o,c),p={node:null},d=no(e,D,o,p,i),m=d.onIntercomm,h=d.consumeIntercommMessages;Object.defineProperty(e,"_localSyncNode",{get:function(){return p.node}});var f=null,g=null;j.fake&&(e.version(1).stores({_syncNodes:"++id,myRevision,lastHeartBeat",_changes:"++rev",_intercomm:"++id,destinationNode",_uncommittedChanges:"++id,node"}),e._syncNodes.mapToClass(o),e._changes.mapToClass(ao),p.node=new o({myRevision:0,type:"local",lastHeartBeat:Date.now(),deleteTimeStamp:null})),e.Version.prototype._parseStoresSpec=At(e.Version.prototype._parseStoresSpec,ro),e.on.addEventType({changes:"asap",cleanup:[Hi,Xr],message:"asap"}),e._createTransaction=At(e._createTransaction,l),D.latestRevision[e.name]=D.latestRevision[e.name]||0,e.open=At(e.open,u),e.close=At(e.close,function(_){return function(){return e.dynamicallyOpened()?_.apply(this,arguments):(s.timeoutHandle&&(clearTimeout(s.timeoutHandle),delete s.timeoutHandle),D.on("latestRevisionIncremented").unsubscribe(w),D.on("suicideNurseCall").unsubscribe(S),D.on("intercomm").unsubscribe(m),D.on("beforeunload").unsubscribe(A),p.node&&p.node.id&&(D.on.suicideNurseCall.fire(e.name,p.node.id),i&&i.setItem("Dexie.Observable/deadnode:"+p.node.id.toString()+"/"+e.name,"dead"),p.node.deleteTimeStamp=1,p.node.lastHeartBeat=0,e._syncNodes.put(p.node),p.node=null),f&&clearTimeout(f),f=null,g&&clearTimeout(g),g=null,_.apply(this,arguments))}}),e.delete=At(e.delete,function(_){return function(){return _.apply(this,arguments).then(function(T){return D.latestRevision[e.name]=0,T})}}),e.on("ready",function(){return e.dynamicallyOpened()?e:e.table("_changes").orderBy("rev").last(function(T){var O=T?T.rev:0;return p.node=new o({myRevision:O,type:"local",lastHeartBeat:Date.now(),deleteTimeStamp:null,isMaster:0}),D.latestRevision[e.name]<O&&(D.latestRevision[e.name]=O,j.ignoreTransaction(function(){D.on.latestRevisionIncremented.fire(O)})),e._syncNodes.put(p.node).then(j.ignoreTransaction(function(){var F=1;return e._syncNodes.orderBy("isMaster").reverse().modify(function(C){if(C.isMaster&&(C.lastHeartBeat<Date.now()-t?C.isMaster=0:F=0),!p.node)return;C.id===p.node.id&&(C.isMaster=p.node.isMaster=F)})})).then(function(){D.on("latestRevisionIncremented",w),D.on("beforeunload",A),D.on("suicideNurseCall",S),D.on("intercomm",m),f=setTimeout(v,r),g=setTimeout(b,a)}).then(function(){I()})})},!0);var x=0;function w(_,T){if(_===e.name){if(x>=T)return;x=T,j.vip(function(){y(T).catch("DatabaseClosedError",function(){})})}}function y(_,T,O){if(!T&&y.ongoingOperation)return y.ongoingOperation;var F=!1,C=p.node;if(!C)return ea.reject(new j.DatabaseClosedError);var H=1e3,P=e._changes.where("rev").above(C.myRevision).limit(H).toArray(function(W){if(W.length>0){var B=W[W.length-1];F=W.length===H,e.on("changes").fire(W,F),C.myRevision=B.rev}else O&&e.on("changes").fire([],!1);var re=!1;return e._syncNodes.where(":id").equals(C.id).modify(function(G){re=!0,G.lastHeartBeat=Date.now(),G.deleteTimeStamp=null,G.myRevision=Math.max(G.myRevision,C.myRevision)}).then(function(){return re})}).then(function(W){if(!W)throw ta?new Error("Browser is shutting down"):(e.close(),console.error("Out of sync"),Le.location&&Le.location.reload(!0),new Error("Out of sync"));if(F||D.latestRevision[e.name]>C.myRevision)return y(D.latestRevision[e.name],(T||0)+1,F)}).finally(function(){delete y.ongoingOperation});return T||(y.ongoingOperation=P),P}function b(){g=null;var _=p.node&&p.node.id;if(!_)return;e.transaction("rw!",e._syncNodes,function(){e._syncNodes.where({id:_}).first(function(T){if(!T){e.isOpen()&&e.close();return}return T.lastHeartBeat=Date.now(),T.deleteTimeStamp=null,e._syncNodes.put(T)})}).catch("DatabaseClosedError",function(){}).finally(function(){p.node&&p.node.id===_&&e.isOpen()&&(g=setTimeout(b,a))})}function v(){f=null;var _=p.node&&p.node.id;if(!_)return;j.vip(function(){y(D.latestRevision[e.name]).then(I).then(h).catch("DatabaseClosedError",function(){}).finally(function(){p.node&&p.node.id===_&&e.isOpen()&&(f=setTimeout(v,r))})})}function I(){var _=p.node;return _?e.transaction("rw","_syncNodes","_changes","_intercomm",function(){var T=!1;e._syncNodes.where("lastHeartBeat").below(Date.now()-t).filter(function(O){return O.type==="local"}).modify(function(O){O.deleteTimeStamp&&O.deleteTimeStamp<Date.now()?(delete this.value,i&&i.removeItem("Dexie.Observable/deadnode:"+O.id+"/"+e.name),O.isMaster&&(e._syncNodes.update(_,{isMaster:1}),T=!0),e._intercomm.where({destinationNode:O.id}).modify(function(F){F.wantReply?F.destinationNode=_.id:delete this.value})):O.deleteTimeStamp||(O.deleteTimeStamp=Date.now()+n)}).then(function(){return D.deleteOldChanges(e),e.on("cleanup").fire(T)})}):ea.reject(new j.DatabaseClosedError)}function A(){if(!p.node)return;ta=!0,p.node.deleteTimeStamp=1,p.node.lastHeartBeat=0,e._syncNodes.put(p.node),D.wereTheOneDying=!0,i&&i.setItem("Dexie.Observable/deadnode:"+p.node.id.toString()+"/"+e.name,"dead")}function S(_,T){_===e.name&&!D.wereTheOneDying&&j.vip(function(){e._syncNodes.update(T,{deleteTimeStamp:1,lastHeartBeat:0}).then(I)})}}D.version="{version}";D.latestRevision={};D.on=j.Events(null,"latestRevisionIncremented","suicideNurseCall","intercomm","beforeunload");D.createUUID=Lr;D.deleteOldChanges=Zr;D._onStorage=eo(D);D._onBeforeUnload=function(){D.on.beforeunload.fire()};try{D.localStorageImpl=Le.localStorage}catch(e){}Le.addEventListener&&(Le.addEventListener("storage",D._onStorage),Le.addEventListener("beforeunload",D._onBeforeUnload));if(j.Observable){if(j.Observable.version!=="{version}")throw new Error("Mixed versions of dexie-observable")}else j.Observable=D,j.addons.push(D);var ls=j.Observable;const io=1;class oo extends j{constructor(e="default"){super("uristorage:"+e);this.version(io).stores({nodes:"&path, ctime, mime_type, mtime, type"}),this.nodes=this.table("nodes"),this.EVENT_WATCH=J(t=>{function n(a){for(const i of a)switch(i.type){case 1:t({change:z.created,path:i.obj.path,type:i.obj.type});break;case 3:t({change:z.removed,path:i.oldObj.path,type:i.oldObj.path});break;case 2:i.mods.payload?t({change:z.attached,path:i.oldObj.path,type:i.oldObj.path}):t({change:z.updated,path:i.oldObj.path,type:i.oldObj.path});break}}const r=this.on("changes",n);return()=>r.unsubscribe(n)})}}class Ze extends ae{constructor(e={}){super(e)}async create_url_object(e){const{storage:t}=this;if(!t)throw new Error("bad dispatch to 'create_url_object' (database is not mounted)");const n=this.normalize(e),r=await t.nodes.get(n);if(!r)throw new Error("bad argument #0 to 'create_url_object' (Node must be created before using 'create_url_object')");if(!r.payload)throw new Error("bad argument #0 to 'create_url_object' (Node payload must be created before using 'create_url_object')");const a=_e(r.payload,r.mime_type);return{destroy:a.destroy,path:r.path,url:a.url}}async get(e){const{storage:t}=this;if(!t)throw new Error("bad dispatch to 'get' (database is not mounted)");const n=this.normalize(e),r=await t.nodes.get(n);return r?{ctime:r.ctime,mime_type:r.mime_type,mtime:r.mtime,path:r.path,type:r.type}:null}async put(e,t=M.undefined,n){const{storage:r}=this;if(!r)throw new Error("bad dispatch to 'put' (database is not mounted)");const a=this.normalize(e),i=await r.nodes.get(a),o=ge();n||(n=Se(a)||ve),i?await r.nodes.update(i,{mtime:o,mime_type:n,type:t}):await r.nodes.put({ctime:o,mime_type:n,mtime:o,path:a,type:t})}async query(e={}){const{storage:t}=this;if(!t)throw new Error("bad dispatch to 'query' (database is not mounted)");const{path:n={},type:r}=e;let a=t.nodes.toCollection();if(r&&(typeof r=="string"?a=a.filter(o=>o.type===r):a=a.filter(o=>r.includes(o.type))),n.glob){const o=pe(Q(n.glob));a=a.filter(s=>o.test(s.path))}else if(n.regex){const{regex:o}=n;a=a.filter(s=>o.test(s.path))}else{let{path:o="/"}=n;o=n.recursive?ie(o,"**"):ie(o,"*");const s=pe(Q(o));a=a.filter(l=>s.test(l.path))}const i=await a.toArray();return i.map((o,s)=>{const{path:l,type:c}=o;return{path:l,type:c}})}async read(e){const{storage:t}=this;if(!t)throw new Error("bad dispatch to 'get_payload' (database is not mounted)");const n=this.normalize(e),r=await t.nodes.get(n);return!r||!r.payload?null:r.payload}async remove(e){const{storage:t}=this;if(!t)throw new Error("bad dispatch to 'remove' (database is not mounted)");const n=this.normalize(e),r=await t.nodes.get(n);return r?(t.nodes.delete(n),!0):!1}async watch(e={}){const{storage:t}=this;if(!t)throw new Error("bad dispatch to 'remove' (database is not mounted)");return ke(t.EVENT_WATCH,e)}async write(e,t){const{storage:n}=this;if(!n)throw new Error("bad dispatch to 'attach' (database is not mounted)");const r=this.normalize(e),a=await n.nodes.get(r);if(!a)throw new Error("bad argument #0 to 'attach' (Node must be created before using 'attach')");await n.nodes.update(a,{payload:t,mtime:ge()})}is_mounted(){return!!this.storage}async mount(){if(this.storage)throw new Error("bad dispatch to 'mount' (database is already mounted)");const{namespace:e}=this.options,t=new oo(e);await t.open(),this.storage=t}async unmount(){const{storage:e}=this;if(!e)throw new Error("bad dispatch to 'unmount' (database is not mounted)");await e.close(),delete this.storage}}Ze.can_hotlink=!0,Ze.can_watch=!0,Ze.is_available=!!(typeof window=="object"&&window.indexedDB),Ze.requires_mount=!0;const tt=Ot(la());function Zt(e,t={}){const{mode:n=L.text}=t;switch(n){case L.bytes:return tt.decode(e,"ByteArray");case L.text:return tt.decode(e,"String");default:throw new Error(`bad option 'options.mode' to 'decode_safe' (encoding mode '${n}' not available)`)}}function en(e){const t=new TextDecoder;return t.decode(e)}function tn(e,t={}){const{mode:n=L.text}=t;switch(n){case L.bytes:return tt.encode(e,"ByteArray");case L.text:return tt.encode(e,"String");default:throw new Error(`bad option 'options.mode' to 'encode_safe' (encoding mode '${n}' not available)`)}}function nn(e){const t=new TextEncoder;return t.encode(e)}class mo{constructor(e,t){this.EVENT_WATCH=J();this.prefix_node=`uristorage:${e}:n:`,this.prefix_payload=`uristorage:${e}:p:`,this.storage=t}attach(e,t,n){const{storage:r}=this,a=this.prefix_node+e,i=this.prefix_payload+e,o={...JSON.parse(r.getItem(a)),mtime:n};r.setItem(a,JSON.stringify(o)),r.setItem(i,tn(t)),this.EVENT_WATCH.dispatch({change:z.attached,path:e,type:o.type})}get(e){const t=this.prefix_node+e,n=this.storage.getItem(t);if(n){const{ctime:r=0,mime_type:a=ve,mtime:i=0,type:o=M.undefined}=JSON.parse(n);return{ctime:r,mime_type:a,mtime:i,path:e,type:o}}return null}get_payload(e){const t=this.prefix_payload+e,n=this.storage.getItem(t);return n?Zt(n,{mode:L.bytes}):null}has(e){return e=this.prefix_node+e,!!this.storage.getItem(e)}*nodes(){const{prefix_node:e,storage:t}=this;for(let n=0;n<t.length;n++){const r=t.key(n);if(r?.startsWith(e)){const a=t.getItem(r),{type:i=M.undefined}=JSON.parse(a);yield{path:r.slice(e.length),type:i}}}}put(e,t){const n={...t,path:e},r=JSON.stringify(n);this.storage.setItem(this.prefix_node+e,r),this.EVENT_WATCH.dispatch({change:z.created,path:e,type:n.type})}remove(e){const{storage:t}=this,n=this.prefix_node+e,r=t.getItem(n);if(!r)return!1;const a=JSON.parse(r);return t.removeItem(n),t.removeItem(this.prefix_payload+e),this.EVENT_WATCH.dispatch({change:z.removed,path:e,type:a.type}),!0}update(e,t){const{storage:n}=this,r=this.prefix_node+e,a={...JSON.parse(n.getItem(r)),...t,path:e};n.setItem(r,JSON.stringify(a)),this.EVENT_WATCH.dispatch({change:z.updated,path:a.path,type:a.type})}}function vo(e={}){const{compressed:t=!0}=e;return{...e,compressed:t}}class Ne extends ae{constructor(e,t={}){super(vo(t));const{namespace:n}=this.options;this.storage=new mo(n,e)}async create_url_object(e){const{storage:t}=this,{compressed:n}=this.options,r=this.normalize(e);if(!t.has(r))throw new Error("bad argument #0 to 'create_url_object' (Node must be created before using 'create_url_object')");let a=t.get_payload(r);if(!a)throw new Error("bad argument #0 to 'create_url_object' (Node payload must be created before using 'create_url_object')");const i=t.get(r);a=n?Ie(a):a;const o=_e(a,i.mime_type);return{destroy:o.destroy,path:i.path,url:o.url}}async get(e){const t=this.normalize(e);return this.storage.get(t)}async put(e,t=M.undefined,n){const{storage:r}=this,a=this.normalize(e),i=ge();n||(n=Se(a)||ve),r.has(a)?r.update(a,{mime_type:n,mtime:i,type:t}):r.put(a,{ctime:i,mime_type:n,mtime:i,type:t})}async query(e={}){const t=Array.from(this.storage.nodes());return qe(t,e)}async read(e){const{compressed:t}=this.options,n=this.normalize(e),r=this.storage.get_payload(n);return r?t?Ie(r):r:null}async remove(e){const t=this.normalize(e);return this.storage.remove(t)}async watch(e={}){return ke(this.storage.EVENT_WATCH,e)}async write(e,t){const{storage:n}=this,{compressed:r}=this.options,a=this.normalize(e);if(!n.has(a))throw new Error("bad argument #0 to 'attach' (Node must be created before using 'attach')");t=r?Ke(t):t,n.attach(a,t,ge())}is_mounted(){return!0}async mount(){}async unmount(){}}Ne.can_hotlink=!0,Ne.can_watch=!0,Ne.is_available=!1,Ne.storage=null;class Vn extends Ne{constructor(e={}){super(window.localStorage,e)}}Vn.is_available=!!(typeof window=="object"&&window.localStorage);class Jn extends Ne{constructor(e={}){super(window.sessionStorage,e)}}Jn.is_available=!!(typeof window=="object"&&window.sessionStorage);class rn extends Nt{constructor(){super();this.EVENT_MOUNTED=J();this.EVENT_REGISTERED=J();this.EVENT_UNMOUNTED=J();this.EVENT_UNREGISTERED=J();this.clone=e=>{const{namespace:t,storage:n}=e;return{namespace:t,storage:n}}}clear(){const e=this.entries();for(const[t,n]of e){const{storage:r}=n;this.EVENT_UNREGISTERED.dispatch({namespace:t,storage:r})}super.clear()}register(e,t){if(this.has(e))throw new Error(`bad argument #0 to 'register' (namespace '${e}' already registered)`);const n={namespace:e,storage:t};return super.set(e,n),t.EVENT_MOUNTED.subscribe(()=>this.EVENT_MOUNTED.dispatch({namespace:e,storage:t})),t.EVENT_UNMOUNTED.subscribe(()=>this.EVENT_UNMOUNTED.dispatch({namespace:e,storage:t})),this.EVENT_REGISTERED.dispatch({namespace:e,storage:t}),this}unregister(e){const t=this.get(e);if(!t)throw new Error(`bad argument #0 to 'unregister' (namespace '${e}' not registered)`);return super.delete(e),this.EVENT_UNREGISTERED.dispatch({namespace:e,storage:t.storage}),this}resolve(e){let t;try{t=new URL(e)}catch(a){return null}const n=t.protocol.slice(0,-1),r=this.get(n);return r?{...r,path:t.pathname}:null}}class pa extends rn{create_url_object(e){const t=this.resolve(e);if(!t)throw new Error(`bad argument #0 to 'create_url_object' (could not resolve '${e}')`);const{path:n,storage:r}=t;return r.create_url_object(n)}create_directory(e){const t=this.resolve(e);if(!t)throw new Error(`bad argument #0 to 'create_directory' (could not resolve '${e}')`);const{path:n,storage:r}=t;return r.create_directory(n)}exists(e){const t=this.resolve(e);if(!t)throw new Error(`bad argument #0 to 'exists' (could not resolve '${e}')`);const{path:n,storage:r}=t;return r.exists(n)}get_stats(e){const t=this.resolve(e);if(!t)throw new Error(`bad argument #0 to 'get_stats' (could not resolve '${e}')`);const{path:n,storage:r}=t;return r.get_stats(n)}read_directory(e,t={}){const n=this.get(e);if(!n)throw new Error(`bad argument #0 to 'read_directory' (could not resolve '${e}')`);const{storage:r}=n;return r.read_directory(t)}read_file(e){const t=this.resolve(e);if(!t)throw new Error(`bad argument #0 to 'read_file' (could not resolve '${e}')`);const{path:n,storage:r}=t;return r.read_file(n)}remove_directory(e,t={}){const n=this.resolve(e);if(!n)throw new Error(`bad argument #0 to 'remove_directory' (could not resolve '${e}')`);const{path:r,storage:a}=n;return a.remove_directory(r,t)}remove_file(e){const t=this.resolve(e);if(!t)throw new Error(`bad argument #0 to 'remove_file' (could not resolve '${e}')`);const{path:n,storage:r}=t;return r.remove_file(n)}watch_directory(e,t={}){const n=this.resolve(e);if(!n)throw new Error(`bad argument #0 to 'watch_directory' (could not resolve '${e}')`);const{path:r,storage:a}=n;return a.watch_directory(r,t)}watch_file(e){const t=this.resolve(e);if(!t)throw new Error(`bad argument #0 to 'watch_file' (could not resolve '${e}')`);const{path:n,storage:r}=t;return r.watch_file(n)}write_file(e,t){const n=this.resolve(e);if(!n)throw new Error(`bad argument #0 to 'write_file' (could not resolve '${e}')`);const{path:r,storage:a}=n;return a.write_file(r,t)}read_file_json(e,t){const n=this.resolve(e);if(!n)throw new Error(`bad argument #0 to 'read_file_json' (could not resolve '${e}')`);const{path:r,storage:a}=n;return a.read_file_json(r,t)}read_file_text(e){const t=this.resolve(e);if(!t)throw new Error(`bad argument #0 to 'read_file_text' (could not resolve '${e}')`);const{path:n,storage:r}=t;return r.read_file_text(n)}write_file_json(e,t,n,r){const a=this.resolve(e);if(!a)throw new Error(`bad argument #0 to 'write_file_json' (could not resolve '${e}')`);const{path:i,storage:o}=a;return o.write_file_json(i,t,n,r)}write_file_text(e,t){const n=this.resolve(e);if(!n)throw new Error(`bad argument #0 to 'write_file_text' (could not resolve '${e}')`);const{path:r,storage:a}=n;return a.write_file_text(r,t)}}class an{constructor(e){this.EVENT_MOUNTED=J();this.EVENT_UNMOUNTED=J();if(this.adapter=e,!this.has_feature("is_available"))throw new Error("bad dispatch to 'BaseOverlay' (adapter is not available in this context)");e.EVENT_MOUNTED.subscribe(t=>this.EVENT_MOUNTED.dispatch({storage:this})),e.EVENT_UNMOUNTED.subscribe(t=>this.EVENT_UNMOUNTED.dispatch({storage:this}))}has_feature(e){const t=this.adapter.constructor;return t[e]}is_mounted(){return this.adapter.is_mounted()}mount(){return this.adapter.mount()}unmount(){return this.adapter.unmount()}}var xe;(function(e){e.created="CHANGE_CREATED",e.removed="CHANGE_REMOVED",e.updated="CHANGE_UPDATED"})(xe||(xe={}));const go=/\//g,yo=e=>e;function ua(e){const t=e.match(go);return t?t.length:0}function bo(e={}){let{scope:t=yo}=e;if(typeof t=="string"){const n=Q(t);t=r=>ie(n,r)}return{scope:t}}class Gn extends an{constructor(e,t={}){super(e);this.options=bo(t),this.scope=this.options.scope}create_scope(e){const t=new Gn(this.adapter,{scope:this.scope(e)});return t}async create_url_object(e){if(!this.has_feature("can_hotlink"))throw new Error("bad dispatch to 'create_url_object' (adapter does not support feature)");e=this.scope(e);const{adapter:t}=this,n=await t.get(e);if(n){if(n.type!==M.file)throw new Error("bad argument #0 to 'create_url_object' (file path is not a file)")}else throw new Error("bad argument #0 to 'create_url_object' (file path not found)");return t.create_url_object(e)}async create_directory(e){if(this.has_feature("is_readonly"))throw new Error("bad dispatch to 'create_directory' (adapter does not support feature)");const{adapter:t}=this;if(e=this.scope(e),e=Q(e),e==="/")throw new Error("bad argument #0 to 'create_directory' (directory path is already a directory)");const n=await t.get(e);if(n)switch(n.type){case M.directory:throw new Error("bad argument #0 to 'create_directory' (directory path is already a directory)");case M.file:throw new Error("bad argument #0 to 'create_directory' (directory path is already a file)")}const r=rt(e);if(r!=="/"){const a=await t.get(r);if(a){if(a.type!==M.directory)throw new Error("bad argument #0 to 'create_directory' (parent path is not a directory)")}else throw new Error("bad argument #0 to 'create_directory' (parent path does not exist)")}return t.put(e,M.directory)}async exists(e){e=this.scope(e);const t=await this.adapter.get(e);return!!t}async get_stats(e){e=this.scope(e);const t=await this.adapter.get(e);if(!t)throw new Error("bad argument #0 to 'get_stats' (path not found)");return{ctime:t.ctime,path:t.path,mtime:t.mtime,is_directory:t.type===M.directory,is_file:t.type===M.file}}async read_directory(e={}){const{adapter:t}=this,{is_directory:n,is_file:r,glob:a,regex:i,path:o,recursive:s=!1}=e;let l;n?l=M.directory:r?l=M.file:l=[M.directory,M.file];let c;if(o||o===""){let u=this.scope(o);u=Q(u);const p=await t.get(u);if(u!=="/")if(p){if(p.type!==M.directory)throw new Error("bad option 'IFileSystemQueryOptions.path' to 'read_directory' (directory path is not a directory)")}else throw new Error("bad option 'IFileSystemQueryOptions.path' to 'read_directory' (directory path not found)");c=await t.query({type:l,path:{recursive:s,path:u}})}else a?c=await t.query({type:l,path:{glob:this.scope(a)}}):i?c=await t.query({type:l,path:{regex:i}}):c=await t.query({type:l,path:{recursive:s,path:this.scope("/")}});return c.map((u,p)=>{const{path:d,type:m}=u;return{path:d,is_directory:m===M.directory,is_file:m===M.file}})}async read_file(e){const{adapter:t}=this;e=this.scope(e);const n=await t.get(e);if(n){if(n.type!==M.file)throw new Error("bad argument #0 to 'read_file' (file path is not a file)")}else throw new Error("bad argument #0 to 'read_file' (file path not found)");const r=await t.read(e);return r||new Uint8Array}async remove_directory(e,t={}){if(this.has_feature("is_readonly"))throw new Error("bad dispatch to 'remove_directory' (adapter does not support feature)");const{adapter:n}=this,{recursive:r=!1}=t;if(e=this.scope(e),e=Q(e),e==="/")throw new Error("bad argument #0 to 'remove_directory' (directory path not found)");const a=await n.get(e);if(a){if(a.type!==M.directory)throw new Error("bad argument #0 to 'remove_directory' (directory path is not a directory)")}else throw new Error("bad argument #0 to 'remove_directory' (directory path not found)");const i=await n.query({path:{path:e,recursive:!0}});if(i.length>0)if(r){i.sort((s,l)=>ua(l.path)-ua(s.path));const o=i.map((s,l)=>n.remove(s.path));await Promise.all(o)}else throw new Error("bad argument #0 to 'remove_directory' (directory contains children)");return n.remove(e)}async remove_file(e){if(this.has_feature("is_readonly"))throw new Error("bad dispatch to 'remove_file' (adapter does not support feature)");const{adapter:t}=this;e=this.scope(e);const n=await t.get(e);if(n){if(n.type!==M.file)throw new Error("bad argument #0 to 'remove_file' (file path is not a file)")}else throw new Error("bad argument #0 to 'remove_file' (file path not found)");const r=await t.remove(e);if(!r)throw new Error("bad argument #0 to 'remove_file' (could not remove file path)")}async watch_directory(e,t={}){if(!this.has_feature("can_watch"))throw new Error("bad dispatch to 'watch_directory' (adapter does not support feature)");const{adapter:n}=this,{recursive:r}=t;if(e=this.scope(e),e=Q(e),e!=="/"){const i=await n.get(e);if(i){if(i.type!==M.directory)throw new Error("bad argument #0 to 'watch_directory' (directory path is not a directory)")}else throw new Error("bad argument #0 to 'watch_directory' (directory path not found)")}const a=await n.watch({recursive:r,change:[z.attached,z.created,z.removed],inclusive:!0,path:e});return J(i=>{const o=a.subscribe(s=>{switch(s.change){case z.attached:i({change:xe.updated,path:s.path,type:s.type});break;case z.created:i({change:xe.created,path:s.path,type:s.type});break;case z.removed:i({change:xe.removed,path:s.path,type:s.type});break}});return()=>o()})}async watch_file(e){if(!this.has_feature("can_watch"))throw new Error("bad dispatch to 'watch_file' (adapter does not support feature)");const{adapter:t}=this;e=this.scope(e);const n=await t.get(e);if(n){if(n.type!==M.file)throw new Error("bad argument #0 to 'watch_file' (file path is not a file)")}else throw new Error("bad argument #0 to 'watch_file' (file path not found)");const r=await t.watch({change:[z.attached,z.removed],path:e});return J(a=>{async function i(s){switch(s.change){case z.attached:a({change:xe.updated,path:s.path,type:s.type});break;case z.removed:a({change:xe.removed,path:s.path,type:s.type});break}}const o=r.subscribe(i);return()=>o()})}async write_file(e,t){if(this.has_feature("is_readonly"))throw new Error("bad dispatch to 'write_file' (adapter does not support feature)");const{adapter:n}=this;if(e=this.scope(e),e=Q(e),e==="/")throw new Error("bad argument #0 to 'write_file' (file path is not a file)");const r=await n.get(e);if(r&&r.type!==M.file)throw new Error("bad argument #0 to 'write_file' (file path is not a file)");const a=rt(e);if(a!=="/"){const i=await n.get(a);if(!i||i.type!==M.directory)throw new Error("bad argument #0 to 'write_file' (parent path is not a directory)")}return await n.put(e,M.file),n.write(e,t)}async read_file_json(e,t){const n=await this.read_file_text(e);return JSON.parse(n,t)}async read_file_text(e){const t=await this.read_file(e);return en(t)}write_file_json(e,t,n,r){const a=JSON.stringify(t,n,r);return this.write_file_text(e,a)}write_file_text(e,t){const n=nn(t);return this.write_file(e,n)}}return da();})();
/*!
 LZ-UTF8 v0.5.6

 Copyright (c) 2018, Rotem Dan
 Released under the MIT license.

 Build date: 2020-08-10 

 Please report any issue at https://github.com/rotemdan/lzutf8.js/issues
*/
//# sourceMappingURL=uristorage.umd.min.js.map
